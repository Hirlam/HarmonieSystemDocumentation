<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Local Â· Harmonie wiki</title><script async src="https://www.googletagmanager.com/gtag/js?id=UA-221448594-1"></script><script>  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-221448594-1', {'page_path': location.pathname + location.search + location.hash});
</script><script data-outdated-warner src="../../assets/warner.js"></script><link rel="canonical" href="https://hirlam.github.io/HarmonieSystemDocumentation/dev/System/QuickStartLocal/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.png" alt="Harmonie wiki logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">Harmonie wiki</a></span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Getting Started</span><ul><li><a class="tocitem" href="../GitDeveloperDocumentation/">GitHub workflow</a></li><li><a class="tocitem" href="../../Overview/da_graph/">Graphical Overview</a></li><li><a class="tocitem" href="../RunningHarmonieOnAtos/">Running on Atos</a></li><li><input class="collapse-toggle" id="menuitem-2-4" type="checkbox"/><label class="tocitem" for="menuitem-2-4"><span class="docs-label">Overview</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../Overview/Content/">Content</a></li><li><a class="tocitem" href="../../Overview/Binaries/">Binaries</a></li><li><a class="tocitem" href="../../Overview/FileFormats/">File Formats</a></li><li><a class="tocitem" href="../../Overview/Source/">Source</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2-5" type="checkbox"/><label class="tocitem" for="menuitem-2-5"><span class="docs-label">Experiment Configuration</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../ExperimentConfiguration/ConfigureYourExperiment/">Experiment</a></li><li><a class="tocitem" href="../../ExperimentConfiguration/Namelists/">Namelist</a></li><li><a class="tocitem" href="../../ExperimentConfiguration/UseofObservation/">Observations</a></li><li><a class="tocitem" href="../../ExperimentConfiguration/PlatformConfiguration/">Platform</a></li><li><a class="tocitem" href="../../ExperimentConfiguration/How_to_use_hires_topography/">HiRes Topography</a></li><li><a class="tocitem" href="../../ExperimentConfiguration/ModelDomain/">Domain</a></li><li><a class="tocitem" href="../../ExperimentConfiguration/VerticalGrid/">Vertical Grid</a></li></ul></li></ul></li><li><span class="tocitem">NWP Components</span><ul><li><input class="collapse-toggle" id="menuitem-3-1" type="checkbox"/><label class="tocitem" for="menuitem-3-1"><span class="docs-label">Observations</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><input class="collapse-toggle" id="menuitem-3-1-1" type="checkbox"/><label class="tocitem" for="menuitem-3-1-1"><span class="docs-label">Preprocessing</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../Observations/ObservationPreprocessing/">Preprocessing</a></li><li><a class="tocitem" href="../../Observations/Oulan/">Oulan</a></li><li><a class="tocitem" href="../../Observations/Bator/">Bator</a></li><li><a class="tocitem" href="../../Observations/Cope/">Cope</a></li><li><a class="tocitem" href="../../Observations/ObservationData/">ObservationData</a></li><li><a class="tocitem" href="../../Observations/Conrad/">Conrad</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-1-2" type="checkbox"/><label class="tocitem" for="menuitem-3-1-2"><span class="docs-label">How to</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../Observations/SYNOP/">SYNOP</a></li><li><a class="tocitem" href="../../Observations/Amv/">AMV</a></li><li><a class="tocitem" href="../../Observations/Iasi/">IASI</a></li><li><a class="tocitem" href="../../Observations/Atovs/">ATOVS</a></li><li><a class="tocitem" href="../../Observations/Scatt/">Scatt</a></li><li><a class="tocitem" href="../../Observations/Ascat/">AScat</a></li><li><a class="tocitem" href="../../Observations/GNSS/">GNSS</a></li><li><a class="tocitem" href="../../Observations/Modes/">Modes</a></li><li><a class="tocitem" href="../../Observations/RadarData/">Radar</a></li></ul></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-2" type="checkbox"/><label class="tocitem" for="menuitem-3-2"><span class="docs-label">Data Assimilation</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><input class="collapse-toggle" id="menuitem-3-2-1" type="checkbox"/><label class="tocitem" for="menuitem-3-2-1"><span class="docs-label">Surface</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../DataAssimilation/Surface/CANARI/">CANARI</a></li><li><a class="tocitem" href="../../DataAssimilation/Surface/CANARI_OI_MAIN/">CANARI OI MAIN</a></li><li><a class="tocitem" href="../../DataAssimilation/Surface/CANARI_EKF_SURFEX/">CANARI EKF SURFEX</a></li><li><a class="tocitem" href="../../DataAssimilation/Surface/SurfaceAnalysis/">Surface Analysis</a></li></ul></li><li><a class="tocitem" href="../../DataAssimilation/Screening/">Screening</a></li><li><a class="tocitem" href="../../DataAssimilation/StructureFunctions/">Structure functions</a></li><li><a class="tocitem" href="../../DataAssimilation/DataAssimilation4DVAR/">4DVAR</a></li><li><a class="tocitem" href="../../DataAssimilation/DigitalFilterInitialization/">Digital Filter Initialization</a></li><li><a class="tocitem" href="../../DataAssimilation/ObservationOperators/">HOP_DRIVER</a></li><li><a class="tocitem" href="../../DataAssimilation/SingleObs/">Single Obs</a></li><li><a class="tocitem" href="../../DataAssimilation/LSMIXandJk/">LSMIX and Jk</a></li><li><a class="tocitem" href="../../DataAssimilation/DFS/">DFS</a></li><li><a class="tocitem" href="../../DataAssimilation/MTEN/">MTEN</a></li><li><a class="tocitem" href="../../DataAssimilation/CHKEVO/">CHKEVO</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-3" type="checkbox"/><label class="tocitem" for="menuitem-3-3"><span class="docs-label">Boundaries</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../Boundaries/BoundaryFilePreparation/">Preparation</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-4" type="checkbox"/><label class="tocitem" for="menuitem-3-4"><span class="docs-label">Forecast Model</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../ForecastModel/Forecast/">Forecast</a></li><li><a class="tocitem" href="../../ForecastModel/Outputlist/">Output List</a></li><li><a class="tocitem" href="../../ForecastModel/HR/">High Res</a></li><li><input class="collapse-toggle" id="menuitem-3-4-4" type="checkbox"/><label class="tocitem" for="menuitem-3-4-4"><span class="docs-label">Single Column Model</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../ForecastModel/SingleColumnModel/MUSC/">MUSC</a></li><li><a class="tocitem" href="../../ForecastModel/SingleColumnModel/Forcing/">Forcing</a></li><li><a class="tocitem" href="../../ForecastModel/SingleColumnModel/MUSC_vars/">MUSC vars</a></li></ul></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-5" type="checkbox"/><label class="tocitem" for="menuitem-3-5"><span class="docs-label">Climate Generation</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../ClimateGeneration/ClimateGeneration/">Climate Generation</a></li><li><a class="tocitem" href="../../ClimateGeneration/DownloadInputData/">Input Data</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-6" type="checkbox"/><label class="tocitem" for="menuitem-3-6"><span class="docs-label">EPS</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../EPS/Howto/">Howto</a></li><li><a class="tocitem" href="../../EPS/System/">System</a></li><li><a class="tocitem" href="../../EPS/BDSTRATEGY/">BDSTRATEGY</a></li><li><a class="tocitem" href="../../EPS/SLAF/">SLAF</a></li><li><a class="tocitem" href="../../EPS/SPP/">SPP</a></li><li><a class="tocitem" href="../../EPS/SPPT/">SPPT</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-7" type="checkbox"/><label class="tocitem" for="menuitem-3-7"><span class="docs-label">Post Processing</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../PostProcessing/Diagnostics/">Diagnostics</a></li><li><a class="tocitem" href="../../PostProcessing/FileConversions/">FileConversions</a></li><li><a class="tocitem" href="../../PostProcessing/Fullpos/">FullPos</a></li><li><a class="tocitem" href="../../PostProcessing/gl/">GL</a></li><li><a class="tocitem" href="../../PostProcessing/xtool/">xtool</a></li><li><a class="tocitem" href="../../PostProcessing/PostPP/">PostPP</a></li><li><a class="tocitem" href="../../PostProcessing/Interpolation/">Interpolation GL</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-8" type="checkbox"/><label class="tocitem" for="menuitem-3-8"><span class="docs-label">Verification</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../Verification/Extract4verification/">Extract4verification</a></li><li><a class="tocitem" href="../../Verification/Verification/">Verification</a></li><li><a class="tocitem" href="../../Verification/HARP/">HARP</a></li><li><a class="tocitem" href="../../Verification/Obsmon/">Obsmon</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-9" type="checkbox"/><label class="tocitem" for="menuitem-3-9"><span class="docs-label">Visualization</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../Visualization/EPyGrAM/">EpyGram</a></li></ul></li></ul></li><li><span class="tocitem">System</span><ul><li><input class="collapse-toggle" id="menuitem-4-1" type="checkbox"/><label class="tocitem" for="menuitem-4-1"><span class="docs-label">Build</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../Build/General/">Software requirements</a></li><li><a class="tocitem" href="../../Build/Build_with_makeup/">Makeup</a></li><li><a class="tocitem" href="../../Build/Build_with_cmake/">CMake</a></li><li><a class="tocitem" href="../../Build/gmkpack/">Gmkpack</a></li><li><a class="tocitem" href="../../Build/Gmkpack_vs_Make/">Gmkpack vs Make</a></li><li><a class="tocitem" href="../../Build/CompileHarmonie/">Compile Harmonie</a></li><li><a class="tocitem" href="../../Build/Installation/">Installation</a></li><li><a class="tocitem" href="../../Build/Redhat7Install/">Redhat7 Install</a></li><li><a class="tocitem" href="../../Build/Centos6Install/">Centos6 Install</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4-2" type="checkbox"/><label class="tocitem" for="menuitem-4-2"><span class="docs-label">Phasing</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../MFaccess/">MF Access</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4-3" type="checkbox"/><label class="tocitem" for="menuitem-4-3"><span class="docs-label">Suite Management</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../SuiteManagement/ECFLOW/">ECFLOW</a></li></ul></li><li><a class="tocitem" href="../TheHarmonieScript/">The Harmonie script</a></li><li><a class="tocitem" href="../Fast_start_on_cca/">Fast start on cca</a></li><li class="is-active"><a class="tocitem" href>Local</a><ul class="internal"><li><a class="tocitem" href="#Introduction"><span>Introduction</span></a></li><li><a class="tocitem" href="#Configure-your-experiment"><span>Configure your experiment</span></a></li><li><a class="tocitem" href="#Start-your-experiment"><span>Start your experiment</span></a></li><li><a class="tocitem" href="#Continue-your-experiment"><span>Continue your experiment</span></a></li><li><a class="tocitem" href="#Start/Restart-of-mXCdp"><span>Start/Restart of mXCdp</span></a></li><li><a class="tocitem" href="#Making-local-changes"><span>Making local changes</span></a></li><li><a class="tocitem" href="#Directory-structure"><span>Directory structure</span></a></li><li><a class="tocitem" href="#Archive-contents"><span>Archive contents</span></a></li><li><a class="tocitem" href="#Cleanup-of-old-experiments"><span>Cleanup of old experiments</span></a></li></ul></li><li><a class="tocitem" href="../HarmonieTestbed/">Testbed</a></li><li><a class="tocitem" href="../ECMWF_teleport/">Teleport</a></li><li><a class="tocitem" href="../Build_local_docs/">Local Documentation</a></li><li><a class="tocitem" href="../DrHook/">DrHook</a></li><li><a class="tocitem" href="../StandaloneOdb/">Stand alone ODB</a></li><li><a class="tocitem" href="../UpdateNamelists/">Update Namelist</a></li><li><a class="tocitem" href="../Scalability_and_Refactoring/">Scalability and refactoring</a></li><li><a class="tocitem" href="../HarmonieBenchMark/">Benchmark</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">System</a></li><li class="is-active"><a href>Local</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Local</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/Hirlam/Harmonie/blob/dev-CY46h1/docs/src/System/QuickStartLocal.md" title="Edit on GitHub"><span class="docs-icon fab">ï</span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Running-Harmonie-on-your-local-platform"><a class="docs-heading-anchor" href="#Running-Harmonie-on-your-local-platform">Running Harmonie on your local platform</a><a id="Running-Harmonie-on-your-local-platform-1"></a><a class="docs-heading-anchor-permalink" href="#Running-Harmonie-on-your-local-platform" title="Permalink"></a></h1><h2 id="Introduction"><a class="docs-heading-anchor" href="#Introduction">Introduction</a><a id="Introduction-1"></a><a class="docs-heading-anchor-permalink" href="#Introduction" title="Permalink"></a></h2><p>These &quot;quick start instructions&quot; assumes that someone has already put in place a valid configuration for your local platform, <code>CONFIG=linux.local</code> for example.</p><p>The Harmonie system runs through a number of steps to help you complete your experiment. The chain can be summarized like:</p><ul><li>Configure and start the experiment: This is where you define your domain, choose your settings and specify the period for your experiment.</li></ul><p>Once you have done this you can start the system and let it create the basic infrastructure</p><ul><li>Setup the necessary directories and copy the system files needed (<code>InitRun</code>, <code>Prepare_cycle</code>)</li><li>Compile the binaries you need to run your experiment (<code>Build</code>)</li><li>Create the constant climate files specifying your domain (<code>Climate</code>)</li></ul><p>With the basic setup and files in place we can proceed to the integration part where we have three loops taking care of </p><ul><li>Prepare boundaries and observations (<code>MakeCycleInput</code>)</li><li>Run assimilation and forecasts (<code>Date</code>)</li><li>Post process and archive the result (<code>Postprocessing</code>)</li></ul><p>The three different task are allowed to run ahead/after each other to get a good throughput.</p><p>The configuration, the full suite and the relation between different tasks is controlled by the scheduler. This documentation describes how to get started with your first experiment. The description is general for a single host. (The reference Harmonie system on ECMWF platform assumes a dual-hosts setup with the front-end <code>ecgb</code> used to configure and launch experiments and <code>cca</code> is used for all computations except those for operations related to observation verification and monitoring. </p><p>Following example shows the steps to launch an Harmonie experiment <code>my_exp</code>.</p><p>If this is the first time to install HARMONIE on your local platform please take a look at the basic install instructions <a href="../../ExperimentConfiguration/PlatformConfiguration/">here</a>. </p><h2 id="Configure-your-experiment"><a class="docs-heading-anchor" href="#Configure-your-experiment">Configure your experiment</a><a id="Configure-your-experiment-1"></a><a class="docs-heading-anchor-permalink" href="#Configure-your-experiment" title="Permalink"></a></h2><ul><li>Create an experiment directory under HOME/hm<em>home and use the master script Harmonie to set up a minimum environment for your experiment.  ```bash  mkdir -p HOME/hm</em>home/my<em>exp  cd HOME/hm</em>home/my<em>exp  PATH</em>TO<em>HARMONIE/config-sh/Harmonie setup -r PATH</em>TO_HARMONIE -h YOURHOST  ```</li></ul><p>where</p><ul><li><code>-r</code> is the path to your downloaded version of HARMONIE</li><li><code>-h</code> tells which configuration files to use. At ECMWF <code>config.ecgb</code> is the default one. List <code>PATH_TO_HARMONIE/config-sh/config.*</code> for available <code>HOST</code> configurations</li><li>This setup command  provides the default setup which currently is AROME physics with <code>CANARI</code>+<code>OI_MAIN</code> surface assimilation and 3DVAR upper air assimilations with 3h cycling on a domain covering Denmark using 2.5km horizontal resolution and 65 levels in the vertical.</li><li>Now you can edit the basic configuration file <code>ecf/config_exp.h</code> to configure your experiment scenarios. Modify specifications for model domain, physics (AROME, ALARO), data locations, settings for dynamics, physics, domain, coupling host model etc. Read more about the options in <a href="../../ExperimentConfiguration/ConfigureYourExperiment/">here</a>. You can also use some of the predefined configurations by calling Harmonie with the <code>-c</code> option:</li></ul><pre><code class="language-bash hljs">mkdir $HOME/hm_home/my_exp
cd $HOME/hm_home/my_exp
PATH_TO_HARMONIE/config-sh/Harmonie setup -r PATH_TO_HARMONIE -h YOURHOST -c CONFIG </code></pre><p>where <code>CONFIG</code> is one of the setups defined in <code>scr/Harmonie_configurations.pm</code>. If you give <code>-c</code> with out an argument or a non existing configuration a list of configurations will be printed.</p><ul><li>In some cases you might have to edit the general system configuration file, <code>Env_system</code>. See <a href="../../ExperimentConfiguration/PlatformConfiguration/">here</a> for further information</li><li>The rules for how to submit jobs are defined in <code>Env_submit</code>. See <a href="../../ExperimentConfiguration/PlatformConfiguration/">here</a> for further information</li><li>If you experiment in data assimilation you might also want to change <code>scr/include.ass</code></li></ul><h2 id="Start-your-experiment"><a class="docs-heading-anchor" href="#Start-your-experiment">Start your experiment</a><a id="Start-your-experiment-1"></a><a class="docs-heading-anchor-permalink" href="#Start-your-experiment" title="Permalink"></a></h2><p>Launch the experiment by giving start time, <code>DTG</code>, end time, <code>DTGEND</code>, and forecast length, <code>LL</code></p><pre><code class="language-bash hljs">cd $HOME/hm_home/my_exp
PATH_TO_HARMONIE/config-sh/Harmonie start DTG=YYYYMMDDHH DTGEND=YYYYMMDDHH LL=12
# e.g., PATH_TO_HARMONIE/Harmonie start DTG=2012122400 DTGEND=2012122406 LL=12</code></pre><p>If you would like to only run long forecasts at 00/12 UTC and short (3h) at 03/06/09/15/18/21, you specify the longer forecast length as <code>LLMAIN</code>. </p><pre><code class="language-bash hljs">cd $HOME/hm_home/my_exp
PATH_TO_HARMONIE/config-sh/Harmonie start DTG=2012122400 LLMAIN=24</code></pre><p>If successful, ecflow will identify your experiment name and start building your binaries and run your forecast. If not, you need to examine the mSMS log file <code>$HM_DATA/mSMS.log</code>. <code>$HM_DATA</code> is defined in your <code>Env_system file</code>. At ECMWF <code>$HM_DATA=$SCRATCH/hm_home/$EXP</code> where <code>$EXP</code> is your experiment name. Read more about where things happen further down.</p><h2 id="Continue-your-experiment"><a class="docs-heading-anchor" href="#Continue-your-experiment">Continue your experiment</a><a id="Continue-your-experiment-1"></a><a class="docs-heading-anchor-permalink" href="#Continue-your-experiment" title="Permalink"></a></h2><p>If your experiment have successfully completed and you would like to continue for another period you should write</p><pre><code class="language-bash hljs">cd $HOME/hm_home/my_exp
PATH_TO_HARMONIE/config-sh/Harmonie prod DTGEND=YYYYMMDDHH LL=12 </code></pre><p>By using <code>prod</code> you tell the system that you are continuing the experiment and using the first guess from the previous cycle. The start date is take from a file <code>progress.log</code> created in your <code>$HOME/hm_home/my_exp</code> directory. If you would have used <code>start</code> the initial data would have been interpolated from the boundaries, a cold start in other words.</p><h2 id="Start/Restart-of-mXCdp"><a class="docs-heading-anchor" href="#Start/Restart-of-mXCdp">Start/Restart of mXCdp</a><a id="Start/Restart-of-mXCdp-1"></a><a class="docs-heading-anchor-permalink" href="#Start/Restart-of-mXCdp" title="Permalink"></a></h2><p>To start the graphical window for mSMS on ecgb type</p><pre><code class="language-bash hljs">cd $HOME/hm_home/my_exp
PATH_TO_HARMONIE/config-sh/Harmonie mon</code></pre><p>The graphical window, mXCdp runs independently of the mSMS job and can be closed and restarted again with the same command. With the graphical interface you can control and view logfiles of each task. </p><h2 id="Making-local-changes"><a class="docs-heading-anchor" href="#Making-local-changes">Making local changes</a><a id="Making-local-changes-1"></a><a class="docs-heading-anchor-permalink" href="#Making-local-changes" title="Permalink"></a></h2><p>Very soon you will find that you need to do changes in a script or in the source code. Once you have identified which file to edit you put it into the current <code>$HOME/hm_home/my_exp</code> directory, with exactly the same subdirectory structure as in the reference. e.g, if you want to modify a namelist setting </p><pre><code class="language-bash hljs">cd $HOME/hm_home/my_exp
PATH_TO_HARMONIE/config-sh/Harmonie co nam/harmonie_namelists.pm         # retrieve default namelist harmonie_namelists.pm
vi nam/harmonie_namelists.pm                        # modify the namelist</code></pre><p>Next time you run your experiment the changed file will be used. You can also make changes in a running experiment. Make the change you wish and rerun the <code>InitRun</code> task in the <code>mXCdp</code> window. The !InitRun task copies all files from your local experiment directory to your working directory <code>$HM_DATA</code>. Once your <code>InitRun</code> task is complete your can rerun the task you are interested in. If you wish to recompile something you will also have to rerun the <code>Build</code> tasks. Read more about how to control and rerun tasks in mini-SMS from mXCdp.</p><h2 id="Directory-structure"><a class="docs-heading-anchor" href="#Directory-structure">Directory structure</a><a id="Directory-structure-1"></a><a class="docs-heading-anchor-permalink" href="#Directory-structure" title="Permalink"></a></h2><p>On most platforms HARMONIE compiles and produces all its output data under HM_DATA (defined in ~/hm<em>home/my</em>exp/Env_system)</p><table><tr><th style="text-align: right">= Description                            =</th><th style="text-align: right">= Location                                                                                  =</th></tr><tr><td style="text-align: right">Binaries</td><td style="text-align: right"><code>$BINDIR</code> (set in <code>ecf/config_exp.h</code> ), default is <code>$HM_DATA/bin</code></td></tr><tr><td style="text-align: right">libraries, object files &amp; source code</td><td style="text-align: right"><code>$HM_DATA/lib/src</code> if <code>MAKEUP=yes</code>, <code>$HMDATA/gmkpack_build</code> if <code>MAKEUP=no</code></td></tr><tr><td style="text-align: right">Scripts</td><td style="text-align: right"><code>$HM_DATA/lib/scr</code></td></tr><tr><td style="text-align: right">config files (Env<em>system &amp; Env</em>system</td><td style="text-align: right"><code>$HM_DATA/lib</code> linked to files in <code>$HM_DATA/config-sh</code></td></tr><tr><td style="text-align: right">sms</td><td style="text-align: right"><code>$HM_DATA/lib/sms</code></td></tr><tr><td style="text-align: right">msms definitions</td><td style="text-align: right"><code>$HM_DATA/lib/msms</code></td></tr><tr><td style="text-align: right">Utilities such as gmkpack, gl &amp; monitor</td><td style="text-align: right"><code>$HM_DATA/lib/util</code></td></tr><tr><td style="text-align: right">Climate files</td><td style="text-align: right"><code>$HM_DATA/climate</code></td></tr><tr><td style="text-align: right">Working directory for the current cycle</td><td style="text-align: right"><code>$HM_DATA/YYYYMMDD_HH</code></td></tr><tr><td style="text-align: right">Archived files</td><td style="text-align: right"><code>$HM_DATA/archive</code></td></tr><tr><td style="text-align: right">Archived cycle output</td><td style="text-align: right"><code>$HM_DATA/archive/YYYY/MM/DD/HH</code></td></tr><tr><td style="text-align: right">Archived log files</td><td style="text-align: right"><code>$HM_DATA/archive/log/HM_TaskFamily_YYYYMMDDHH.html</code> where <code>TaskFamily</code>=<code>MakeCycleInput</code>,<code>Date</code>,<code>Postprocessing</code></td></tr><tr><td style="text-align: right">Task log files</td><td style="text-align: right"><code>$JOBOUTDIR</code> (set in <code>Env_system</code>) usually <code>$HM_DATA/sms_logfiles</code></td></tr><tr><td style="text-align: right">Verification data (vfld/vobs/logmonitor)</td><td style="text-align: right"><code>$HM_DATA/archive/extract</code></td></tr><tr><td style="text-align: right">Verification (monitor) results</td><td style="text-align: right"><code>$HM_DATA/archive/extract/WebgraF</code></td></tr><tr><td style="text-align: right">&quot;Fail&quot; directory</td><td style="text-align: right"><code>$HM_DATA/YYYYMMDD_HH/Failed_Family_Task</code> (look at <code>ifs.stat</code>,<code>NODE.001_01</code>, <code>fort.4</code></td></tr></table><h2 id="Archive-contents"><a class="docs-heading-anchor" href="#Archive-contents">Archive contents</a><a id="Archive-contents-1"></a><a class="docs-heading-anchor-permalink" href="#Archive-contents" title="Permalink"></a></h2><p><code>$HM_DATA/archive/YYYY/MM/DD/HH</code> is used to store &quot;archived&quot; output from HARMONIE cycles. The level of archiving depends on <code>ARSTRATEGY</code> in <code>ecf/config_exp.h</code> . The default setting is medium which will keep the following cycle data:</p><ul><li>Surface analysis: <code>ICMSHANAL+0000</code></li><li>Atmospheric analysis result: <code>MXMIN1999+0000</code></li><li>Blending between surface/atmospheric analysis and cloud variable from the first guess: <code>ANAB1999+0000</code></li><li><code>ICMSHHARM+NNNN</code> and <code>ICMSHHARM+NNNN.sfx</code> are atmospheric and surfex forecast output files</li><li><code>PFHARM*</code> files produced by the inline postprocessing </li><li><code>GRIB</code> files produced by the conversion of FA output files to GRIB if <code>MAKEGRIB=yes</code> in <code>ecf/config_exp.h</code> </li><li>ODB databases and feedback information in <code>odb_stuff.tar</code></li></ul><h2 id="Cleanup-of-old-experiments"><a class="docs-heading-anchor" href="#Cleanup-of-old-experiments">Cleanup of old experiments</a><a id="Cleanup-of-old-experiments-1"></a><a class="docs-heading-anchor-permalink" href="#Cleanup-of-old-experiments" title="Permalink"></a></h2><p>Once you have complete your experiment you may wish to remove code, scripts and data from the disks. Harmonie provides some simple tools to do this. First check the content of the different disks by</p><pre><code class="language-bash hljs"> Harmonie CleanUp -ALL</code></pre><p>Once you have convinced yourself that this is OK you can proceed with the removal.</p><pre><code class="language-bash hljs"> Harmonie CleanUp -ALL -go </code></pre><p>If you would like to exclude the data stored  <code>HM_DATA</code> ( as defined in <code>Env_system</code> ) you run </p><pre><code class="language-bash hljs"> Harmonie CleanUp -d</code></pre><p>to list the directories intended for cleaning. Again, convince yourself that this is OK and proceed with the cleaning by</p><pre><code class="language-bash hljs"> Harmonie CleanUp -d -go</code></pre><p><strong>NOTE that these commands may not work properly in all versions. Do not run the removal before you&#39;re sure it&#39;s OK</strong></p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../Fast_start_on_cca/">Â« Fast start on cca</a><a class="docs-footer-nextpage" href="../HarmonieTestbed/">Testbed Â»</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.22 on <span class="colophon-date" title="Tuesday 9 August 2022 10:36">Tuesday 9 August 2022</span>. Using Julia version 1.6.7.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
