<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Experiment · Harmonie wiki</title><meta name="title" content="Experiment · Harmonie wiki"/><meta property="og:title" content="Experiment · Harmonie wiki"/><meta property="twitter:title" content="Experiment · Harmonie wiki"/><meta name="description" content="Documentation for Harmonie wiki."/><meta property="og:description" content="Documentation for Harmonie wiki."/><meta property="twitter:description" content="Documentation for Harmonie wiki."/><meta property="og:url" content="https://hirlam.github.io/HarmonieSystemDocumentation/dev/ExperimentConfiguration/ConfigureYourExperiment/"/><meta property="twitter:url" content="https://hirlam.github.io/HarmonieSystemDocumentation/dev/ExperimentConfiguration/ConfigureYourExperiment/"/><link rel="canonical" href="https://hirlam.github.io/HarmonieSystemDocumentation/dev/ExperimentConfiguration/ConfigureYourExperiment/"/><script async src="https://www.googletagmanager.com/gtag/js?id=G-HQ1BCP3LPJ"></script><script>  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-HQ1BCP3LPJ', {'page_path': location.pathname + location.search + location.hash});
</script><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.png" alt="Harmonie wiki logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">Harmonie wiki</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Getting Started</span><ul><li><a class="tocitem" href="../../System/GitDeveloperDocumentation/">GitHub workflow</a></li><li><a class="tocitem" href="../../Overview/da_graph/">Graphical Overview</a></li><li><a class="tocitem" href="../../System/ECMWF/RunningHarmonieOnAtos/">Running on Atos</a></li><li><input class="collapse-toggle" id="menuitem-2-4" type="checkbox"/><label class="tocitem" for="menuitem-2-4"><span class="docs-label">Overview</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../Overview/Content/">Content</a></li><li><a class="tocitem" href="../../Overview/Binaries/">Binaries</a></li><li><a class="tocitem" href="../../Overview/FileFormats/">File Formats</a></li><li><a class="tocitem" href="../../Overview/Source/">Source</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2-5" type="checkbox" checked/><label class="tocitem" for="menuitem-2-5"><span class="docs-label">Experiment Configuration</span><i class="docs-chevron"></i></label><ul class="collapsed"><li class="is-active"><a class="tocitem" href>Experiment</a><ul class="internal"><li><a class="tocitem" href="#Introduction"><span>Introduction</span></a></li><li><a class="tocitem" href="#Build-options"><span>Build options</span></a></li><li><a class="tocitem" href="#General-settings"><span>General settings</span></a></li><li><a class="tocitem" href="#Archive-settings-(ECMWF)"><span>Archive settings (ECMWF)</span></a></li><li><a class="tocitem" href="#Running-Mode"><span>Running Mode</span></a></li><li><a class="tocitem" href="#Model-domain-settings"><span>Model domain settings</span></a></li><li><a class="tocitem" href="#Vertical-levels"><span>Vertical levels</span></a></li><li><a class="tocitem" href="#Forecast-model"><span>Forecast model</span></a></li><li><a class="tocitem" href="#Physics"><span>Physics</span></a></li><li><a class="tocitem" href="#Assimilation"><span>Assimilation</span></a></li><li><a class="tocitem" href="#Observations"><span>Observations</span></a></li><li><a class="tocitem" href="#4DVAR-settings"><span>4DVAR settings</span></a></li><li><a class="tocitem" href="#digital-filter"><span>Digital filter settings </span></a></li><li><a class="tocitem" href="#Boundaries-and-initial-conditions"><span>Boundaries and initial conditions</span></a></li><li><a class="tocitem" href="#Ensemble-mode-settings"><span>Ensemble mode settings</span></a></li><li><a class="tocitem" href="#Aerosol-choices"><span>Aerosol choices</span></a></li><li><a class="tocitem" href="#Climate-file-settings"><span>Climate file settings</span></a></li><li><a class="tocitem" href="#Archiving-settings"><span>Archiving settings</span></a></li><li><a class="tocitem" href="#Forecast-output"><span>Forecast output</span></a></li><li><a class="tocitem" href="#Verification-and-monitoring"><span>Verification and monitoring</span></a></li><li><a class="tocitem" href="#Mail-addresses"><span>Mail addresses</span></a></li><li><a class="tocitem" href="#Testbed"><span>Testbed</span></a></li></ul></li><li><a class="tocitem" href="../Namelists/">Namelist</a></li><li><a class="tocitem" href="../UseofObservation/">Observations</a></li><li><a class="tocitem" href="../PlatformConfiguration/">Platform</a></li><li><a class="tocitem" href="../How_to_use_hires_topography/">HiRes Topography</a></li><li><a class="tocitem" href="../ModelDomain/">Domain</a></li><li><a class="tocitem" href="../VerticalGrid/">Vertical Grid</a></li></ul></li></ul></li><li><span class="tocitem">NWP Components</span><ul><li><input class="collapse-toggle" id="menuitem-3-1" type="checkbox"/><label class="tocitem" for="menuitem-3-1"><span class="docs-label">Observations</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><input class="collapse-toggle" id="menuitem-3-1-1" type="checkbox"/><label class="tocitem" for="menuitem-3-1-1"><span class="docs-label">Preprocessing</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../Observations/ObservationPreprocessing/">Preprocessing</a></li><li><a class="tocitem" href="../../Observations/Oulan/">Oulan</a></li><li><a class="tocitem" href="../../Observations/Bator/">Bator</a></li><li><a class="tocitem" href="../../Observations/Cope/">Cope</a></li><li><a class="tocitem" href="../../Observations/ObservationData/">ObservationData</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-1-2" type="checkbox"/><label class="tocitem" for="menuitem-3-1-2"><span class="docs-label">How to</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../Observations/SYNOP/">SYNOP</a></li><li><a class="tocitem" href="../../Observations/Amv/">AMV</a></li><li><a class="tocitem" href="../../Observations/Atovs/">ATOVS</a></li><li><a class="tocitem" href="../../Observations/Iasi/">IASI</a></li><li><a class="tocitem" href="../../Observations/Seviri/">SEVIRI</a></li><li><a class="tocitem" href="../../Observations/Scatt/">Scatt</a></li><li><a class="tocitem" href="../../Observations/Ascat/">AScat</a></li><li><a class="tocitem" href="../../Observations/GNSS/">GNSS</a></li><li><a class="tocitem" href="../../Observations/Modes/">Modes</a></li><li><a class="tocitem" href="../../Observations/RadarData/">Radar</a></li><li><a class="tocitem" href="../../Observations/Aeolus/">Aeolus</a></li></ul></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-2" type="checkbox"/><label class="tocitem" for="menuitem-3-2"><span class="docs-label">Data Assimilation</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><input class="collapse-toggle" id="menuitem-3-2-1" type="checkbox"/><label class="tocitem" for="menuitem-3-2-1"><span class="docs-label">Surface</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../DataAssimilation/Surface/CANARI/">CANARI</a></li><li><a class="tocitem" href="../../DataAssimilation/Surface/CANARI_OI_MAIN/">CANARI OI MAIN</a></li><li><a class="tocitem" href="../../DataAssimilation/Surface/CANARI_EKF_SURFEX/">CANARI EKF SURFEX</a></li><li><a class="tocitem" href="../../DataAssimilation/Surface/SurfaceAnalysis/">Surface Analysis</a></li></ul></li><li><a class="tocitem" href="../../DataAssimilation/Screening/">Screening</a></li><li><a class="tocitem" href="../../DataAssimilation/StructureFunctions/">Structure functions</a></li><li><a class="tocitem" href="../../DataAssimilation/DaAlgorithms/">Algorithms</a></li><li><a class="tocitem" href="../../DataAssimilation/DigitalFilterInitialization/">Digital Filter Initialization</a></li><li><a class="tocitem" href="../../DataAssimilation/ObservationOperators/">HOP_DRIVER</a></li><li><a class="tocitem" href="../../DataAssimilation/SingleObs/">Single Obs</a></li><li><a class="tocitem" href="../../DataAssimilation/LSMIXandJk/">LSMIX and Jk</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-3" type="checkbox"/><label class="tocitem" for="menuitem-3-3"><span class="docs-label">Diagnostics</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><input class="collapse-toggle" id="menuitem-3-3-1" type="checkbox"/><label class="tocitem" for="menuitem-3-3-1"><span class="docs-label">Data Assimilation</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../DataAssimilation/DFS/">DFS</a></li><li><a class="tocitem" href="../../DataAssimilation/MTEN/">MTEN</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-3-2" type="checkbox"/><label class="tocitem" for="menuitem-3-3-2"><span class="docs-label">Forecast(spin-up)</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../DataAssimilation/CHKEVO/">CHKEVO</a></li><li><a class="tocitem" href="../../DataAssimilation/NWECHKEVO/">NWECHKEVO</a></li></ul></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-4" type="checkbox"/><label class="tocitem" for="menuitem-3-4"><span class="docs-label">Boundaries</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../Boundaries/BoundaryFilePreparation/">Preparation</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-5" type="checkbox"/><label class="tocitem" for="menuitem-3-5"><span class="docs-label">Forecast Model</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../ForecastModel/Forecast/">Forecast</a></li><li><a class="tocitem" href="../../ForecastModel/ForecastSettings/">Settings</a></li><li><a class="tocitem" href="../../ForecastModel/Outputlist/">Output List</a></li><li><a class="tocitem" href="../../ForecastModel/HR/">High Res</a></li><li><input class="collapse-toggle" id="menuitem-3-5-5" type="checkbox"/><label class="tocitem" for="menuitem-3-5-5"><span class="docs-label">Single Column Model</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../ForecastModel/SingleColumnModel/MUSC/">MUSC</a></li><li><a class="tocitem" href="../../ForecastModel/SingleColumnModel/Forcing/">Forcing</a></li><li><a class="tocitem" href="../../ForecastModel/SingleColumnModel/MUSC_EMS/">MUSC EMS</a></li><li><a class="tocitem" href="../../ForecastModel/SingleColumnModel/MUSC_vars/">MUSC vars</a></li></ul></li><li><a class="tocitem" href="../../ForecastModel/WindFarms/">Wind Farm Parameterisation</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-6" type="checkbox"/><label class="tocitem" for="menuitem-3-6"><span class="docs-label">Climate Generation</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../ClimateGeneration/ClimateGeneration/">Climate Generation</a></li><li><a class="tocitem" href="../../ClimateGeneration/DownloadInputData/">Input Data</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-7" type="checkbox"/><label class="tocitem" for="menuitem-3-7"><span class="docs-label">EPS</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../EPS/Howto/">Howto</a></li><li><a class="tocitem" href="../../EPS/System/">System</a></li><li><a class="tocitem" href="../../EPS/BDSTRATEGY/">BDSTRATEGY</a></li><li><a class="tocitem" href="../../EPS/SLAF/">SLAF</a></li><li><a class="tocitem" href="../../EPS/SPP/">SPP</a></li><li><a class="tocitem" href="../../EPS/SPPT/">SPPT</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-8" type="checkbox"/><label class="tocitem" for="menuitem-3-8"><span class="docs-label">Post Processing</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../PostProcessing/Diagnostics/">Diagnostics</a></li><li><a class="tocitem" href="../../PostProcessing/FileConversions/">FileConversions</a></li><li><a class="tocitem" href="../../PostProcessing/Fullpos/">FullPos</a></li><li><a class="tocitem" href="../../PostProcessing/gl/">GL</a></li><li><a class="tocitem" href="../../PostProcessing/xtool/">xtool</a></li><li><a class="tocitem" href="../../PostProcessing/Interpolation/">Interpolation GL</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-9" type="checkbox"/><label class="tocitem" for="menuitem-3-9"><span class="docs-label">Verification</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../Verification/Extract4verification/">Extract4verification</a></li><li><a class="tocitem" href="../../Verification/Verification/">Verification</a></li><li><a class="tocitem" href="../../Verification/AllobsVerification/">allobs Verification</a></li><li><a class="tocitem" href="../../Verification/HARP/">HARP</a></li><li><a class="tocitem" href="../../Verification/Obsmon/">Obsmon</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-10" type="checkbox"/><label class="tocitem" for="menuitem-3-10"><span class="docs-label">Visualization</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../Visualization/EPyGrAM/">EpyGram</a></li></ul></li></ul></li><li><span class="tocitem">System</span><ul><li><input class="collapse-toggle" id="menuitem-4-1" type="checkbox"/><label class="tocitem" for="menuitem-4-1"><span class="docs-label">Build</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../Build/Build_with_cmake/">CMake</a></li><li><a class="tocitem" href="../../Build/Build_with_makeup/">Makeup</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4-2" type="checkbox"/><label class="tocitem" for="menuitem-4-2"><span class="docs-label">Phasing</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../System/MFaccess/">MF Access</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4-3" type="checkbox"/><label class="tocitem" for="menuitem-4-3"><span class="docs-label">Suite Management</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../SuiteManagement/ECFLOW/">ECFLOW</a></li></ul></li><li><a class="tocitem" href="../../System/TheHarmonieScript/">The Harmonie script</a></li><li><a class="tocitem" href="../../System/ECMWF/RunningHarmonieOnAtos/">Running on ECMWF&#39;s Atos</a></li><li><a class="tocitem" href="../../System/ReleaseProcess/">Harmonie release process</a></li><li><a class="tocitem" href="../../System/Local/QuickStartLocal/">Local</a></li><li><a class="tocitem" href="../../System/HarmonieTestbed/">Testbed</a></li><li><a class="tocitem" href="../../System/ECMWF/ECMWF_teleport/">Teleport</a></li><li><a class="tocitem" href="../../System/Build_local_docs/">Local Documentation</a></li><li><a class="tocitem" href="../../System/DrHook/">DrHook</a></li><li><a class="tocitem" href="../../System/StandaloneOdb/">Stand alone ODB</a></li><li><a class="tocitem" href="../../System/UpdateNamelists/">Update Namelist</a></li></ul></li><li><a class="tocitem" href="../../references/">References</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Getting Started</a></li><li><a class="is-disabled">Experiment Configuration</a></li><li class="is-active"><a href>Experiment</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Experiment</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/Hirlam/Harmonie" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/Hirlam/Harmonie/blob/dev-CY46h1/docs/src/ExperimentConfiguration/ConfigureYourExperiment.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="configure-your-experiment"><a class="docs-heading-anchor" href="#configure-your-experiment">Experiment configuration</a><a id="configure-your-experiment-1"></a><a class="docs-heading-anchor-permalink" href="#configure-your-experiment" title="Permalink"></a></h1><h2 id="Introduction"><a class="docs-heading-anchor" href="#Introduction">Introduction</a><a id="Introduction-1"></a><a class="docs-heading-anchor-permalink" href="#Introduction" title="Permalink"></a></h2><p>There are several levels on configuration available in HARMONIE. The highest level of configuration is done in <code>ecf/config_exp.h</code>. It includes the environment variables, which are used to control the experimentation. In the following we describe the meaning of the different variables and are described in the order they appear in <code>ecf/config_exp.h</code>.</p><p>Host specific paths and environment variables for your system are defined in <code>Env_system</code>. </p><h2 id="Build-options"><a class="docs-heading-anchor" href="#Build-options">Build options</a><a id="Build-options-1"></a><a class="docs-heading-anchor-permalink" href="#Build-options" title="Permalink"></a></h2><pre><code class="language-bash hljs"># **** Build and bin paths ****
# Definitions about Build, should fit with hm_rev
BUILD=${BUILD-yes}              # Turn on or off the compilation and binary build (yes|no)
BUILD_WITH=${BUILD_WITH-makeup} # Which build system to use (makeup|cmake)</code></pre><p><code>BUILD</code> is a switch for compiling HARMONIE code (<strong>yes</strong>|no) and <code>BUILD_WITH</code> controls which build system to use when compiling HARMONIE-AROME.</p><pre><code class="language-bash hljs">BINDIR=${BINDIR-$HM_DATA/bin}                 # Binary directory</code></pre><p><code>BINDIR</code> is the location of where your HARMONIE binaries will be installed. You can use this to point to binaries outside of your experiment. A few other options for non default configurations exists as well:</p><pre><code class="language-bash hljs">COMPILE_ENKF=${COMPILE_ENKF-&quot;no&quot;}             # Compile LETKF code (yes|no)
COMPILE_DABYFA=${COMPILE_DABYFA-&quot;no&quot;}         # Compile FA/VC code (yes|no)
SURFEX_OFFLINE_BINARIES=&quot;no&quot;                  # Switch to compile and use offline SURFEX binaries</code></pre><h2 id="General-settings"><a class="docs-heading-anchor" href="#General-settings">General settings</a><a id="General-settings-1"></a><a class="docs-heading-anchor-permalink" href="#General-settings" title="Permalink"></a></h2><pre><code class="language-bash hljs"># **** Misc, defined first because it&#39;s used later ****

CNMEXP=HARM                             # Four character experiment identifier
WRK=$HM_DATA/$CYCLEDIR                  # Work directory</code></pre><ul><li><code>CNMEXP</code>: experiment identifier used by <code>MASTERODB</code></li><li><code>WRK</code> is the work directory. The suggested path on <code>ECMWF.atos</code> is <code>$SCRATCH/hm_home/${EXP}/$CYCLEDIR</code></li></ul><h2 id="Archive-settings-(ECMWF)"><a class="docs-heading-anchor" href="#Archive-settings-(ECMWF)">Archive settings (ECMWF)</a><a id="Archive-settings-(ECMWF)-1"></a><a class="docs-heading-anchor-permalink" href="#Archive-settings-(ECMWF)" title="Permalink"></a></h2><p>Since <code>$SCRATCH</code> is cleaned regularly on ECMWF some files are transferred to <code>ECFS</code> for a more permanent storage by the scripts <code>scr/Archive_host1</code> and <code>scr/Archive_logs</code>. </p><pre><code class="language-bash hljs"># **** Paths to archive ****
# We need to define ARCHIVE early since it might be used further down

ARCHIVE_ROOT=$HM_DATA/archive           # Archive root directory
ECFSLOC=ectmp                           # Archiving site at ECMWF-ECFS: &quot;ec&quot; or ECFS-TMP &quot;ectmp&quot;
ECFSGROUP=accord                        # Group in which to chgrp the ECMWF archive, &quot;default&quot; or &quot;accord&quot;
EXTRARCH=$ARCHIVE_ROOT/extract          # Archive for fld/obs-extractions</code></pre><ul><li><code>ARCHIVE_ROOT</code> is the path to forecast file archive. <strong>Note that at ECMWF this directory is not a permanent storage</strong></li><li><code>EXTRARCH</code> is the path to field extraction archive. <strong>Note that at ECMWF this directory is not a permanent storage</strong></li><li><code>ECFSLOC</code> Archiving site at ECMWF-ECFS  (<strong>ectmp</strong>|ec) <strong>Note that files archived on ectmp will be lost after 90 days.</strong> If you wish your files to stay longer you should set <code>ECFSLOC=ec</code>. </li><li><code>ECFSGROUP</code> Group in which to chgrp the ECMWF archive, (<strong>accord</strong>|default)</li></ul><h2 id="Running-Mode"><a class="docs-heading-anchor" href="#Running-Mode">Running Mode</a><a id="Running-Mode-1"></a><a class="docs-heading-anchor-permalink" href="#Running-Mode" title="Permalink"></a></h2><pre><code class="language-bash hljs"># **** Running mode ****
RUNNING_MODE=research                   # Research or operational mode (research|operational)
                                        # operational implies that the suite will continue even if e.g.
                                        # observations are missing or assimilation fails

SIMULATION_TYPE=nwp                     # Type of simulation (nwp|climate)</code></pre><ul><li><code>RUNNING_MODE</code> can be <strong>research</strong> or operational. Operational is more forgiving in the error handling and e.g. the assimilation will be skipped if Bator doesn&#39;t find any observations. Exceptions handled by the operational mode are written to <code>$HM_DATA/severe_warnings.txt</code></li><li><code>SIMULATION_TYPE</code> Switch between <strong>nwp</strong> and climate type of simulation. The climate simulations are still in an experimental stage. </li></ul><h2 id="Model-domain-settings"><a class="docs-heading-anchor" href="#Model-domain-settings">Model domain settings</a><a id="Model-domain-settings-1"></a><a class="docs-heading-anchor-permalink" href="#Model-domain-settings" title="Permalink"></a></h2><p>Horizontal domain settings. Further information is available <a href="../ModelDomain/#model-domain">here</a></p><pre><code class="language-bash hljs">
# **** Model geometry ****
DOMAIN=DKCOEXP                          # See definitions in scr/Harmonie_domains.pm
TOPO_SOURCE=gmted2010                   # Input source for orography. Available are (gmted2010|gtopo30)
GRID_TYPE=LINEAR                        # Type of grid (LINEAR|QUADRATIC|CUBIC)</code></pre><ul><li><code>DOMAIN</code> defines your domain according to the settings in <code>scr/Harmonie_domains.pm</code> (<strong>DKCOEXP</strong>). The spectral truncation for your domain is determined from <code>NLON</code> and <code>NLAT</code> by <code>scr/Harmonie_domains.pm</code>. Further information on model domains are available <a href="../ModelDomain/#model-domain">here</a></li><li><code>TOPO_SOURCE</code>: Defines input source for model orography (<strong>gmted2010</strong>|gtopo30). Further information available here: <a href="../How_to_use_hires_topography/#hires-topography">hi-res topography</a></li><li><code>GRID_TYPE</code>: This variable is used to define the spectral truncation used (<strong>LINEAR</strong>|QUADRATIC|CUBIC). <code>GRID_TYPE</code> is used in <code>scr/Climate</code> and <code>scr/Forecast</code></li></ul><h2 id="Vertical-levels"><a class="docs-heading-anchor" href="#Vertical-levels">Vertical levels</a><a id="Vertical-levels-1"></a><a class="docs-heading-anchor-permalink" href="#Vertical-levels" title="Permalink"></a></h2><p>Set the number vertical levels to use. Further information is available <a href="../VerticalGrid/#vertical-grid">here</a></p><pre><code class="language-bash hljs">VLEV=65                                 # Vertical level definition name
                                        # HIRLAM_60, MF_60,HIRLAM_40, or
                                        # BOUNDARIES = same number of levs as on boundary file.
                                        # See the other choices from scr/Vertical_levels.pl</code></pre><ul><li><code>VLEV</code> is the name of the vertical levels defined in <code>scr/Vertical_levels.pl</code> (<strong>65</strong>). Further information is available <a href="../VerticalGrid/#vertical-grid">here</a>. If you intend to run upper air assimilation you must select the same domain and level definition for which you have derived structure functions. Read more <a href="../../DataAssimilation/StructureFunctions/#structure-functions">Structure Functions</a></li></ul><h2 id="Forecast-model"><a class="docs-heading-anchor" href="#Forecast-model">Forecast model</a><a id="Forecast-model-1"></a><a class="docs-heading-anchor-permalink" href="#Forecast-model" title="Permalink"></a></h2><p>Higher level forecast model settings.</p><pre><code class="language-bash hljs"># **** High level forecast options ****
NAMELIST_BASE=&quot;harmonie&quot;                # Input for namelist generation (harmonie|alaro1)
                                        #   harmonie : The default HARMONIE namelist base nam/harmonie_namelists.pm
                                        #   alaro1   : For ALARO-1 baseline with only a few configurations available
                                        #              nam/alaro1_namelists.pm
DYNAMICS=&quot;nh&quot;                           # Hydrostatic or non-hydrostatic dynamics (h|nh)
VERT_DISC=vfd                           # Discretization in the vertical (vfd,vfe)
                                        # Note that vfe does not yet work in non-hydrostatic mode
PHYSICS=&quot;arome&quot;                         # Main model physics flag (arome|alaro)
SURFACE=&quot;surfex&quot;                        # Surface flag (old_surface|surfex)
DFI=&quot;none&quot;                              # Digital filter initialization (idfi|fdfi|none)
                                        # idfi : Incremental dfi
                                        # fdfi : Full dfi
                                        # none : No initialization (AROME case)
LSPBDC=no                               # Spectral boundary contions option off(no) | on(yes)
LGRADSP=yes                             # Apply Wedi/Hortal vorticity dealiasing
LUNBC=yes                               # Apply upper nested boundary condition</code></pre><ul><li><code>NAMELIST_BASE</code>: Two different namelist sets are available (<strong>harmonie</strong>|alaro).</li><li><code>DYNAMICS</code>: Hydrostatic or non-hydrostatic dynamics (h|<strong>nh</strong>)</li><li><code>VERT_DISC</code>: Vertical discretization (<strong>vfd</strong>,vfe)</li><li><code>PHYSICS</code>: HARMONIE uses either AROME or ALARO for its forecast model physics (<strong>arome</strong>|alaro)</li><li><code>SURFACE</code>: Surface physics flag to use either the SURFEX or the ALADIN surface scheme(<strong>surfex</strong>|<code>old_surface</code>)</li><li><code>DFI</code>: Digital filter initialization switch (idfi|fdfi|<strong>none</strong>). idfi - incremental dfi, fdfi - full dfi, none - no initialization. See <a href="#digital-filter">Digital filter</a> for more information</li><li><code>LSPBDC</code>: Specify whether the boundary conditions are spectral or not (yes|<strong>no</strong>)</li><li><code>LGRADSP</code>: Switch to apply vorticity dealiasing (<strong>yes</strong>|no)</li><li><code>LUNBC</code>: Switch to apply upper boundary conditions (<strong>yes</strong>|no)</li></ul><h2 id="Physics"><a class="docs-heading-anchor" href="#Physics">Physics</a><a id="Physics-1"></a><a class="docs-heading-anchor-permalink" href="#Physics" title="Permalink"></a></h2><p>Physics options.</p><pre><code class="language-bash hljs"># Highlighted physics switches
CISBA=&quot;3-L&quot;                             # Type of ISBA scheme in SURFEX. Options: &quot;3-L&quot; and &quot;2-L&quot;.
CROUGH=&quot;NONE&quot;                           # SSO scheme used in SURFEX &quot;NONE&quot;|&quot;&#39;Z01D&#39;&quot;|&quot;&#39;BE04&#39;&quot;
SURFEX_SEA_ICE=&quot;none&quot;                   # Treatment of sea ice in surfex (none|sice)
MASS_FLUX_SCHEME=edmfm                  # Version of EDMF scheme (edkf|edmfm)
                                        # Only applicable if PHYSICS=arome
                                        # edkf is the AROME-MF version
                                        # edmfm is the KNMI implementation of Eddy Diffusivity Mass Flux scheme for Meso-scale
HARATU=&quot;yes&quot;                            # Switch for HARATU turbulence scheme (no|yes)
ALARO_VERSION=0                         # Alaro version (1|0)</code></pre><ul><li><code>CISBA</code>: If <code>SURFACE</code> is set to surfex this selects the type of ISBA scheme to use in SURFEX. (<strong>3-L</strong>|2-L). See <code>src/surfex_namelists.pm</code>  <a href="../Namelists/#namelists">Namelists</a></li><li><code>CROUGH</code>: If <code>SURFACE</code> is set to surfex this selects the sub-grid scale orography scheme used in SURFEX. (<strong>NONE</strong>|Z01D|BE04). See <code>src/surfex_namelists.pm</code>  <a href="../Namelists/#namelists">Namelist</a></li><li><code>SURFEX_SEA_ICE</code>: Treatment of sea ice in surfex (none|sice). See <code>nam/surfex_namelists.pm</code></li><li><code>MASS_FLUX_SCHEME</code>: If <code>PHYSICS</code> is set to arome choose the mass flux scheme to be used by AROME; edkf to use the AROME-MF scheme or edmfm to use the KNMI developed scheme</li><li><code>HARATU</code>: Switch to use the <code>HARATU</code> turbulence scheme</li><li><code>ALARO_VERSION</code>: If <code>PHYSICS</code> is set to <code>alaro</code> select version of <code>ALARO</code> to use (<strong>0</strong>|1)</li></ul><h2 id="Assimilation"><a class="docs-heading-anchor" href="#Assimilation">Assimilation</a><a id="Assimilation-1"></a><a class="docs-heading-anchor-permalink" href="#Assimilation" title="Permalink"></a></h2><p>Data assimilation settings. More assimilation related settings, in particular what observations to assimilate, can be found in <code>src/include.ass</code></p><pre><code class="language-bash hljs"># **** Assimilation ****
ANAATMO=3DVAR                           # Atmospheric analysis (3DVAR|4DVAR|blending|none)
ANASURF=CANARI_OI_MAIN                  # Surface analysis (CANARI|CANARI_OI_MAIN|CANARI_EKF_SURFEX|none)
                                        # CANARI            : Old style CANARI
                                        # CANARI_OI_MAIN    : CANARI + SURFEX OI
                                        # CANARI_EKF_SURFEX : CANARI + SURFEX EKF ( experimental )
                                        # none              : No surface assimilation
ANASURF_MODE=&quot;before&quot;                   # When ANASURF should be done
                                        # before            : Before ANAATMO
                                        # after             : After ANAATMO
                                        # both              : Before and after ANAATMO (Only for ANAATMO=4DVAR)
INCV=&quot;1,1,1,1&quot;                          # Active EKF control variables. 1=WG2 2=WG1 3=TG2 4=TG1
INCO=&quot;1,1,0&quot;                            # Active EKF observation types (Element 1=T2m, element 2=RH2m and element 3=Soil moisture) 

SST=BOUNDARY                            # Which SST fields to be used in surface analysis
                                        # BOUNDARY          : SST interpolated from the boundary file. ECMWF boundaries utilize a special method.
                                        #                     HIRLAM and HARMONIE boundaries applies T0M which should be SST over sea.
LSMIXBC=no                              # Spectral mixing of LBC0 file before assimilation
[ &quot;$ANAATMO&quot; = 3DVAR] &amp;&amp; LSMIXBC=yes
JB_INTERPOL=no                          # Interpolation of structure functions from a pre-defined domain to your domain
</code></pre><ul><li><code>ANAATMO</code>: Atmospheric analysis (<strong>3DVAR</strong>|4DVAR|blending|none)</li><li><code>ANASURF</code>: Surface analysis (CANARI|<strong>CANARI<em>OI</em>MAIN</strong>|CANARI<em>EKF</em>SURFEX|none). See <code>nam/surfex_namelists.pm</code></li><li><code>ANASURF_MODE</code>:When the surface should be called (<strong>before</strong>|after|both)</li><li><code>INCV</code>: Active EKF control variables. 1=WG2 2=WG1 3=TG2 4=TG1 (0|1)</li><li><code>INCO</code>: Active EKF observation types (Element 1=T2m, element 2=RH2m and element 3=Soil moisture) (0|1)</li><li><code>SST</code>: which sea surface temperature field to use in the surface analysis</li><li><code>LSMIXBC</code> Spectral mixing of LBC0 file before assimilation (<strong>no</strong>|yes)</li><li><code>JB_INTERPOL</code> Interpolation of structure functions from a pre-defined domain to your domain (<strong>no</strong>|yes). Note that this has to be used with some caution.</li></ul><h2 id="Observations"><a class="docs-heading-anchor" href="#Observations">Observations</a><a id="Observations-1"></a><a class="docs-heading-anchor-permalink" href="#Observations" title="Permalink"></a></h2><pre><code class="language-bash hljs"># **** Observations ****
OBDIR=$HM_DATA/observations             # Observation file directory
RADARDIR=$HM_DATA/radardata             # Radar observation file directory
SINGLEOBS=no                            # Run single obs experiment with observation created by scr/Create_single_obs (no|yes)

USE_MSG=no                              # Use MSG data for adjustment of inital profiles, EXPERIMENTAL! (no|yes)</code></pre><ul><li><code>OBDIR</code>: Defines the directory that your (BUFR) observation files (<code>obYYYYMMDDHH</code>) are to read from</li><li><code>RADARDIR</code>: Defines the directory that your (OPERA HDF5) radar observation files are to be read from. BALTRAD OPERA HDF5, MF BUFR and LOCAL files are treated in <code>scr/Prepradar</code></li><li><code>SINGLEOBS</code> Run single obs experiment with synthetic observation created by <code>scr/Create_single_obs scr/Create_single_obs</code> (<strong>no</strong>|yes)</li><li><code>USE_MSG</code>: Use MSG data for adjustment of inital profiles, EXPERIMENTAL! (<strong>no</strong>|yes), expects <code>MSGcloudYYYYMMDDHH.grib</code> in <code>$OBDIR</code></li></ul><h2 id="4DVAR-settings"><a class="docs-heading-anchor" href="#4DVAR-settings">4DVAR settings</a><a id="4DVAR-settings-1"></a><a class="docs-heading-anchor-permalink" href="#4DVAR-settings" title="Permalink"></a></h2><p>4DVAR settings (experimental)</p><pre><code class="language-bash hljs"># **** 4DVAR ****
NOUTERLOOP=1                            # 4DVAR outer loops, need to be 1 at present
ILRES=2,2                               # Resolution (in parts of full) of outer loops
TSTEP4D=360,360                         # Timestep length (seconds) of outer loops TL+AD
TL_TEST=yes                             # Only active for playfile tlad_tests
AD_TEST=yes                             # Only active for playfile tlad_tests</code></pre><ul><li><code>NOUTERLOOP</code>: Number of outer loops, need to be 1 at present</li><li><code>ILRES</code>:  Resolution (in parts of full) of outer loops</li><li><code>TSTEP4D</code>: Timestep length (seconds) of outer loops TL+AD</li><li><code>TL_TEST</code>: Only active for playfile tlad_tests (<strong>yes</strong>|no)</li><li><code>AD_TEST</code>: Only active for playfile tlad_tests (<strong>yes</strong>|no)</li></ul><h2 id="digital-filter"><a class="docs-heading-anchor" href="#digital-filter">Digital filter settings </a><a id="digital-filter-1"></a><a class="docs-heading-anchor-permalink" href="#digital-filter" title="Permalink"></a></h2><p>Digital filter initialization settings if DFI is not equal to &quot;none&quot;</p><pre><code class="language-bash hljs"># **** DFI setting ****
TAUS=5400                               # cut-off frequency in second
TSPAN=5400                              # 7200s or 5400s</code></pre><ul><li><code>TAUS</code> cut-off frequency in seconds </li><li><code>TSPAN</code> length of DFI run in seconds</li></ul><h2 id="Boundaries-and-initial-conditions"><a class="docs-heading-anchor" href="#Boundaries-and-initial-conditions">Boundaries and initial conditions</a><a id="Boundaries-and-initial-conditions-1"></a><a class="docs-heading-anchor-permalink" href="#Boundaries-and-initial-conditions" title="Permalink"></a></h2><p>Settings for generation of lateral boundaries conditions for HARMONIE. Further information is available <a href="../../Boundaries/BoundaryFilePreparation/#boundary-file-preparation">here</a></p><pre><code class="language-bash hljs"># **** Lateral boundary conditions ****
HOST_MODEL=&quot;ifs&quot;                        # Host model (ifs|hir|ald|ala|aro)
                                        # ifs : ecmwf data
                                        # hir : hirlam data
                                        # ald : Output from aladin physics
                                        # ala : Output from alaro physics
                                        # aro : Output from arome physics

HOST_SURFEX=&quot;no&quot;                        # yes if the host model is run with SURFEX
SURFEX_INPUT_FORMAT=lfi                 # Input format for host model run with surfex (lfi|fa)

NBDMAX=12                               # Number of parallel interpolation tasks
BDLIB=ECMWF                             # Boundary experiment, set:
                                        # ECMWF to use MARS data
                                        # RCRa  to use RCRa data from ECFS
                                        # Other HARMONIE/HIRLAM experiment

BDDIR=$HM_DATA/${BDLIB}/archive/@YYYY@/@MM@/@DD@/@HH@   # Boundary file directory,
                                                        # For more information, read in scr/Boundary_strategy.pl

SST_SOURCES=$HOST_MODEL                 # List of external SST sources like $HOST_MODEL|HIROMB|NEMO|ROMS|ECE
                                        # See util/gl/ala/merge_ocean.F90 for more details
SST_IS_LSM=&quot;auto&quot;                       # Switch for using SST as LSM (lsm|sst|auto)

INT_BDFILE=$WRK/ELSCF${CNMEXP}ALBC@NNN@                 # Interpolated boundary file name and location

BDSTRATEGY=simulate_operational # Which boundary strategy to follow
                                # as defined in scr/Boundary_strategy.pl
                                #
                                # available            : Search for available files in BDDIR, try to keep forecast consistency
                                #                        This is ment to be used operationally
                                # simulate_operational : Mimic the behaviour of the operational runs using ECMWF LBC,
                                #                        i.e. 6 hour old boundaries
                                # same_forecast        : Use all boundaries from the same forecast, start from analysis
                                # analysis_only        : Use only analysises as boundaries
                                # era                  : As for analysis_only but using ERA interim data
                                # latest               : Use the latest possible boundary with the shortest forecast length
                                # RCR_operational      : Mimic the behaviour of the RCR runs, ie
                                #                        12h old boundaries at 00 and 12 and
                                #                        06h old boundaries at 06 and 18
                                # enda                 : use ECMWF ENDA data for running ensemble data assimilation
                                #                        or generation of background statistic.
                                #                        Note that only LL up to 9h is supported
                                #                        with this you should set your ENSMSEL members
                                # eps_ec               : ECMWF EPS members (on reduced gaussian grid)
                                #                      : Only meaningful with ENSMSEL non-empty, i.e., ENSSIZE &gt; 0

BDINT=1                         # Boundary interval in hours

SURFEX_PREP=&quot;yes&quot;                # Use offline surfex prep facility (Alt. gl + Fullpos + prep )</code></pre><ul><li><code>HOST_MODEL</code> defines the host model that provides the lateral boundaries conditions for your experiment<ul><li><code>hir</code> for HIRLAM.</li><li><code>ald</code> for ALADIN </li><li><code>ala</code> for ALARO</li><li><code>aro</code> for AROME</li><li><code>ifs</code> for ECMWF-IFS. </li></ul></li><li><code>HOST_SURFEX</code> Set to yes if host model runs with SURFEX. (<strong>no</strong>|yes)</li><li><code>SURFEX_INPUT_FORMAT</code> Input format for host model run with surfex (<strong>lfi</strong>|fa)</li><li><code>BDLIB</code> is the experiment to be used as boundaries. Possible values, <strong>ECMWF</strong> for IFS from MARS (default), <strong>RCRa</strong> for HIRLAM-RCR from ECFS or other <strong>HARMONIE experiment</strong>. </li><li><code>BDDIR</code> is the boundary file directory. The possible date information in the path must be given by using UPPER CASE letters (@YYYY@=year,@MM@=month,@DD@=day,@HH@=hour,@FFF@=forecast length).  </li><li><code>BDSTRATEGY</code> Which boundary strategy to follow i.e. How to find the right boundaries with the right age and location. <a href="../../Boundaries/BoundaryFilePreparation/#boundary-file-preparation">Read more</a></li><li><code>BDINT</code> is boundary interval in hours.</li><li><code>BDCLIM</code> is the path to climate files corresponding the boundary files, when nesting HARMONIE to HARMONIE.</li><li><code>INT_BDFILE</code> is the name and location of the interpolated boundary files. These files are removed every cycle, but if you wish to save them you can specify a more permanent location here. By setting <code>INT_BDFILE=$ARCHIVE</code> the interpolated files will be stored in your archive directory.</li><li><code>NBDMAX</code> Number of parallel boundary interpolation tasks in mSMS. The current default value is 12.</li><li><code>SST_SOURCES</code> defines the host model used for SST &amp; SIC</li><li><code>SST_IS_LSM</code> in interpolation of SST/SIC from host to HARMONIE grid, use SST (with missing values above land) to derive LSM, or use the actual provided LSM. The default, <code>auto</code>, makes a smart guess based on host model.</li><li><code>SURFEX_PREP</code> Use SURFEX tool PREP instead of gl+FULLPOS to prepare SURFEX initial conditions. This is now the default. The gl+FULLPOS version is still working but will not be maintained in the future (no|<strong>yes</strong>)</li></ul><p>Read more about the boundary file preparation <a href="../../Boundaries/BoundaryFilePreparation/#boundary-file-preparation">here</a>.</p><h2 id="Ensemble-mode-settings"><a class="docs-heading-anchor" href="#Ensemble-mode-settings">Ensemble mode settings</a><a id="Ensemble-mode-settings-1"></a><a class="docs-heading-anchor-permalink" href="#Ensemble-mode-settings" title="Permalink"></a></h2><pre><code class="language-bash hljs"># *** Ensemble mode general settings. ***
# *** For member specific settings use msms/harmonie.pm ***
ENSMSEL=                                # Ensemble member selection, comma separated list, and/or range(s):
                                        # m1,m2,m3-m4,m5-m6:step    mb-me == mb-me:1 == mb,mb+1,mb+2,...,me
                                        # 0=control. ENSMFIRST, ENSMLAST, ENSSIZE derived automatically from ENSMSEL.
ENSINIPERT=                             # Ensemble perturbation method (bnd). Not yet implemented: etkf, hmsv.
ENSCTL=                                 # Which member is my control member? Needed for ENSINIPERT=bnd. See harmonie.pm.
ENSBDMBR=                               # Which host member is used for my boundaries? Use harmonie.pm to set.
ENSMFAIL=0                              # Failure tolerance for all members.
ENSMDAFAIL=0                            # Failure tolerance for members doing own DA. Not implemented.
SLAFK=1.0                               # best set in harmonie.pm
SLAFLAG=0                               # --- &quot; ---
SLAFDIFF=0                              # --- &quot; ---

# *** This part is for EDA with observations perturbation
PERTATMO=none                           # ECMAIN  : In-line observation perturbation using the default IFS way.
                            			# CCMA    : Perturbation of the active observations only (CCMA content)
	                            		#           before the Minimization, using the PERTCMA executable.
                            			# none    : no perturbation of upper-air observations

PERTSURF=none                           # ECMA    : perturb also the surface observation before Canari (recommended
                            			#         : for EDA to have full perturbation of the initial state).
                                        # model   : perturb surface fields in grid-point space (recursive filter)
			                            # none    : no perturbation for surface observations.

FESTAT=no                               # Extract differences and do Jb calculations (no|yes)
</code></pre><ul><li><code>ENSMSEL</code>  Ensemble member selection, comma separated list, and/or range(s):<pre><code class="nohighlight hljs"> # m1,m2,m3-m4,m5-m6:step    mb-me == mb-me:1 == mb,mb+1,mb+2,...,me
  # 0=control. ENSMFIRST, ENSMLAST, ENSSIZE derived automatically from ENSMSEL.</code></pre></li><li><code>ENSINIPERT</code> Ensemble perturbation method (bnd). Not yet implemented: etkf, hmsv, slaf.</li><li><code>ENSMFAIL</code> Failure tolerance for all members. Not yet implemented.</li><li><code>ENSMDAFAIL</code> Failure tolerance for members doing own DA. Not yet implemented.</li><li><code>ENSCTL</code> Which member is my control member? Needed for <code>ENSINIPERT=bnd</code>. See <code>harmonie.pm</code>.</li><li><code>ENSBDMBR</code> Which host member is used for my boundaries? Use <code>harmonie.pm</code> to set.</li><li><code>SLAFK</code> Perturbation coefficients for <code>SLAF</code>, experimental</li><li><code>SLAFLAG</code> Time lag for boundaries in <code>SLAG</code>, experimental</li></ul><p>For member dependent settings see <code>msms/harmonie.pm</code>.</p><ul><li><p><code>PERTATMO</code> Observation perturbation with three options </p><ul><li><p><code>ECMA</code> : In-line observation perturbation using the default IFS way.</p></li><li><p><code>CCMA</code> : Perturbation of the active observations only (CCMA content) before the Minimization, using the PERTCMA executable.</p></li><li><p><code>none</code> : no perturbation of upper-air observations</p></li><li><p><code>PERTSURF</code> Perturbation of surface observations before Canari (recommended for EDA to have full perturbation of the initial state) (<strong>no</strong>|yes).</p></li></ul></li></ul><ul><li><code>FESTAT</code> Extract differences and do Jb calculations (<strong>no</strong>|yes). Read more about the procedure <a href="../../DataAssimilation/StructureFunctions/#structure-functions">here</a>.</li></ul><h2 id="Aerosol-choices"><a class="docs-heading-anchor" href="#Aerosol-choices">Aerosol choices</a><a id="Aerosol-choices-1"></a><a class="docs-heading-anchor-permalink" href="#Aerosol-choices" title="Permalink"></a></h2><p>USEAERO influences import of near-real-time aerosol via boundaries and use of aerosol in the forecast model. It selects use of n.r.t, climatology or no aerosol. When USEAERO=climaero, CAERO selects data for monthly climate file generation from existing sources (4 species of Tegen or CAMS AOD@550nm or 11 species of CAMS vertically integrated mass). CAMS aerosol mass climatology [camscms] and MOCAGE n.r.t. [mocanrt] are currently not available for within HARMONIE forecast system. </p><pre><code class="language-bash hljs"># **** Aerosol choices [USEAERO implies aerosol usage in physics via forecast_model_settings!] ****
USEAERO=camsnrt # Aerosol usage: camsnrt | climaero | noaero | [mocanrt]
CAERO=tegenaod  # Aerosol climatology generation: tegenaod | [camscms not yet available] </code></pre><h2 id="Climate-file-settings"><a class="docs-heading-anchor" href="#Climate-file-settings">Climate file settings</a><a id="Climate-file-settings-1"></a><a class="docs-heading-anchor-permalink" href="#Climate-file-settings" title="Permalink"></a></h2><p>Climate file generation settings. Further information is available <a href="../../ClimateGeneration/ClimateGeneration/#climate-generation">here</a></p><pre><code class="language-bash hljs"># **** Climate files ****
CREATE_CLIMATE=${CREATE_CLIMATE-yes}    # Run climate generation (yes|no)
CLIMDIR=$HM_DATA/climate/$DOMAIN        # Climate files directory
BDCLIM=$HM_DATA/${BDLIB}/climate        # Boundary climate files (ald2ald,ald2aro)
                                        # This should point to intermediate aladin
                                        # climate file in case of hir2aro,ifs2aro processes.
ECOCLIMAP_PARAM_BINDIR=$HM_DATA/climate # Binary cover param files directory

# Physiography input for SURFEX
ECOCLIMAP_VERSION=SG                    # Version of ECOCLIMAP for surfex
                                        # Available versions are 1.1-1.5,2.0-2.2,2.2.1,2.5_plus and SG
                                        # FLake requires 2.5_plus or SG
XSCALE_H_TREE=1.0                       # Scale the tree height with this factor
# Activate inclusion of fake trees for open land VEGTYPEs. The vector positions represent:
# 1 NVT_BOGR, 2 NVT_GRAS, 3 NVT_TROG, 4 NVT_C3W, 5 NVT_C3S, 6 NVT_C4, 7 NVT_FLGR
LFAKETREE=.F.,.F.,.F.,.F.,.F.,.F.,.F.
LDB_VERSION=3.0                         # Lake database version.
SOIL_TEXTURE_VERSION=SOILGRID           # Soil texture input data FAO|HWSD_v2|SOILGRID|SOILGRID_v2

# Path to pre-generated domains, in use if USE_REF_CLIMDIR=yes set in Env_system
# Saves time for quick experiments
REF_CLIMDIR=ec:/hlam/harmonie_climdir/release-43h2.1.1/$DOMAIN/$GRID_TYPE/$ECOCLIMAP_VERSION
</code></pre><ul><li><code>CREATE_CLIMATE</code>: Run climate generation (<strong>yes</strong>|no). If you already have a full set of climate files generated in <code>CLIMDIR</code> you can set this flag to no for a faster run.</li><li><code>CLIMDIR</code>: path to the generated climate files for your specific domain. The input data for the climate generation is defined by <code>HM_CLDATA</code> defined in <code>Env_system</code> -&gt; <code>config-sh/config.YOURHOST</code></li><li><code>BDCLIM</code>: path to intermediate climate files</li><li><code>ECOCLIMAP_PARAM_BINDIR</code>: Direcotry where the binray version of ECOCLIMAP 1st generation parameter files will be stored.</li><li><code>ECOCLIMAP_VERSION</code> is the version of ECOCLIMAP to be used with SURFEX. Available versions are 1.1-1.5,2.0-2.2,2.2.1,2.5_plus,<strong>SG</strong>. See <code>surfex_namelists.pm</code> <a href="../Namelists/#namelists">Namelist</a></li><li><code>XSCALE_H_TREE</code>: A factor that scales the original tree height that comes from the database.</li><li><code>LFAKETREE</code>: Only relevant for <code>ECOCLIMAP_VERSION=SG</code>. It activates the inclusion of fake trees for open land VEGTYPEs to increase the roughness length. The vector positions represent <code>1 NVT_BOGR, 2 NVT_GRAS, 3 NVT_TROG, 4 NVT_C3W, 5 NVT_C3S, 6 NVT_C4, 7 NVT_FLGR</code>.</li><li><code>LDB_VERSION</code>: Specifies the version of the Global Lake Database used for FLake.</li><li><code>SOIL_TEXTURE_VERSION</code> Soil texture input data (FAO|HWSD_v2|<strong>SOILGRID</strong>|SOILGRID_v2). See <code>surfex_namelists.pm</code> more info.</li><li><code>REF_CLIMDIR</code>: Specifies the location of possible pre-generated domains. Is used if <code>USE_REF_CLIMDIR=yes</code> set in <code>Env_system</code>.</li></ul><h2 id="Archiving-settings"><a class="docs-heading-anchor" href="#Archiving-settings">Archiving settings</a><a id="Archiving-settings-1"></a><a class="docs-heading-anchor-permalink" href="#Archiving-settings" title="Permalink"></a></h2><pre><code class="language-bash hljs"># **** Archiving settings ****
ARCHIVE_ECMWF=yes                       # Archive to $ECFSLOC at ECMWF (yes|no)
# Archiving selection syntax, settings done below
#
# [fc|an|pp]_[fa|gr|nc] : Output from
#  an : All steps from upper air and surface analysis
#  fc : Forecast model state files from upper air and surfex
#  pp : Output from FULLPOS and SURFEX_LSELECT=yes (ICMSHSELE+NNNN.sfx)
# in any of the formats if applicable
#  fa : FA files
#  gr : GRIB[1|2] files
#  nc : NetCDF files
# sqlite|odb|VARBC|bdstrategy : odb and sqlite files stored in odb_stuff.tar
# fldver|ddh|vobs|vfld : fldver/ddh/vobs/vfld files
# climate : Climate files from PGD and E923
# Some macros
# odb_stuff=odb:VARBC:bdstrategy:sqlite
# verif=vobs:vfld
# fg : Required files to run the next cycle</code></pre><h2 id="Forecast-output"><a class="docs-heading-anchor" href="#Forecast-output">Forecast output</a><a id="Forecast-output-1"></a><a class="docs-heading-anchor-permalink" href="#Forecast-output" title="Permalink"></a></h2><pre><code class="language-bash hljs"># **** Cycles to run, and their forecast length ****

TFLAG=&quot;h&quot;                               # Time flag for model output. (h|min)
                                        # h   = hour based output
                                        # min = minute based output


# The unit of HWRITUPTIMES, FULLFATIMES, ..., SFXFWFTIMES should be:
#   - hours   if TFLAG=&quot;h&quot;
#   - minutes if TFLAG=&quot;min&quot;

# Writeup times of # history,surfex and fullpos files
# Comma separated list, and/or range(s) like:
# t1,t2,t3-t4,t5-t6:step    tb-te == tb-te:1 == tb,tb+1,tb+2,...,te

if [ -z &quot;$ENSMSEL&quot;] ; then
  # Standard deterministic run
  HH_LIST=&quot;00-21:3&quot;                       # Which cycles to run, replaces FCINT
  LL_LIST=&quot;12,3&quot;                          # Forecast lengths for the cycles [h], replaces LL, LLMAIN
                                          # The LL_LIST list is wrapped around if necessary, to fit HH_LIST
  HWRITUPTIMES=&quot;00-21:3,24-60:6&quot;          # History file output times
  FULLFAFTIMES=$HWRITUPTIMES              # History FA file IO server gather times
  PWRITUPTIMES=&quot;00-60:3&quot;                  # Postprocessing times
  PFFULLWFTIMES=-1                        # Postprocessing FA file IO server gathering times
  VERITIMES=&quot;00-60:1&quot;                     # Verification output times, may change PWRITUPTIMES
  SFXSELTIMES=$HWRITUPTIMES               # Surfex select file output times
                                          # Only meaningful if SURFEX_LSELECT=yes
  SFXSWFTIMES=-1                          # SURFEX select FA file IO server gathering times
  SWRITUPTIMES=&quot;00-06:3&quot;                  # Surfex model state output times
  SFXWFTIMES=$SWRITUPTIMES                # SURFEX history FA file IO server gathering times
  if [ &quot;$SIMULATION_TYPE&quot; == climate]; then  #Specific settings for climate simulations
    HWRITUPTIMES=&quot;00-760:6&quot;                 # History file output times
    FULLFAFTIMES=&quot;00-760:24&quot;                # History FA file IO server gather times
    PWRITUPTIMES=$HWRITUPTIMES              # Postprocessing times
    VERITIMES=$HWRITUPTIMES                 # Verification output times, may change PWRITUPTIMES
    SFXSELTIMES=$HWRITUPTIMES               # Surfex select file output times - Only meaningful if SURFEX_LSELECT=yes
    SWRITUPTIMES=&quot;00-760:12&quot;                # Surfex model state output times
    SFXWFTIMES=$SWRITUPTIMES                # SURFEX history FA file IO server gathering times
  fi

  ARSTRATEGY=&quot;climate:fg:verif:odb_stuff: \
              [an|fc]_fa:pp_grb&quot;          # Files to archive on ECFS, see above for syntax

else
  # EPS settings
  HH_LIST=&quot;00-21:3&quot;                       # Which cycles to run, replaces FCINT
  LL_LIST=&quot;36,3,3,3&quot;                      # Forecast lengths for the cycles [h], replaces LL, LLMAIN
  HWRITUPTIMES=&quot;00-06:3&quot;                  # History file output times
  FULLFAFTIMES=$HWRITUPTIMES              # History FA file IO server gather times
  PWRITUPTIMES=&quot;00-48:1&quot;                  # Postprocessing times
  PFFULLWFTIMES=-1                        # Postprocessing FA file IO server gathering times
  VERITIMES=&quot;00-60:3&quot;                     # Verification output times, may change PWRITUPTIMES
  SFXSELTIMES=$HWRITUPTIMES               # Surfex select file output times
                                          # Only meaningful if SURFEX_LSELECT=yes
  SFXSWFTIMES=-1                          # SURFEX select FA file IO server gathering times
  SWRITUPTIMES=&quot;00-06:3&quot;                  # Surfex model state output times
  SFXWFTIMES=$SWRITUPTIMES                # SURFEX history FA file IO server gathering times

  ARSTRATEGY=&quot;climate:fg:verif:odb_stuff: \
              an_fa:pp_grb&quot;               # Files to archive on ECFS, see above for syntax

fi
</code></pre><p>The writeup times of model output can be defined as a space separated list or as a fixed frequency for model history files, surfex files and postprocessed files respectively. The unit of the steps of WRITUPTIMES, SWRITUPTIMES, PWRITUPTIMES and OUTINT should be in hours or minutes depending on the <strong>TFLAG</strong> Regular output interval can be switched on by setting OUTINT&gt;0. Consequently, OUTINT will override the WRITUPTIMES lists!</p><ul><li><code>TFLAG</code>: Time flag for model output. Hourly or minute-based output (<strong>h</strong>|min)</li><li><code>HWRITUPTIMES</code>:  Output list for history files. Default is <code>00-21:3,24-60:6</code> which will output files every 3 hours for 00-21 and every 6 hours for 24-60.</li><li><code>VERITIMES</code>:  Output list for verification files. Default is <code>00-60:1</code> which will produce file every 1 hour for 00-60</li><li><code>SWRITUPTIMES</code>  Output list for surfex files. Default is <code>00-06:3</code> which output a  SURFEX file every 3 hours for 00-06.</li><li><code>PWRITUPTIMES</code>  Output list for fullpos (post-processed) files. Default is <code>00-21:3,24-60:6</code> which will output files every 3 hours for 00-21 and every 6 hours for 24-60.</li></ul><pre><code class="language-bash hljs">SURFEX_LSELECT=&quot;yes&quot;                    # Only write selected fields in surfex outpute files. (yes|no)
                                        # Check nam/surfex_selected_output.pm for details.
                                        # Not tested with lfi files.
INT_SINI_FILE=$WRK/SURFXINI.fa          # Surfex initial file name and location

# **** Postprocessing/output ****
IO_SERVER=yes                           # Use IO server (yes|no). Set the number of cores to be used
                                        # in your Env_submit
IO_SERVER_BD=yes                        # Use IO server for reading of boundary data
POSTP=&quot;inline&quot;                          # Postprocessing by Fullpos (inline|offline|none).
                                        # See Setup_postp.pl for selection of fields.
                                        # inline: this is run inside of the forecast
                                        # offline: this is run in parallel to the forecast in a separate task

FREQ_RESET_TEMP=3                       # Reset frequency of max/min temperature values in hours, controls NRAZTS
FREQ_RESET_GUST=1                       # Reset frequency of max/min gust values in hours, controls NXGSTPERIOD
                                        # Set to -1 to get the same frequency _AND_ reset behaviour as for min/max temperature
                                        # See yomxfu.F90 for further information.
</code></pre><ul><li><p><code>SURFEX_LSELECT</code>: Switch to write a selection of fields in SURFEX output files (<strong>yes</strong>|no). See <code>surfex_selected_output.pm</code> for more info. <a href="../Namelists/#namelists">Namelist</a></p></li><li><p><code>INT_SINI_FILE</code>: name and location of the initial SURFEX file</p></li><li><p><code>ARCHIVE_ECMWF</code>: archive files to ECFSLOC at ECMWF (<strong>yes</strong>|no)</p></li><li><p><code>IO_SERVER</code>: Use IO server (yes|<strong>no</strong>). If set to &quot;yes&quot; changes may be required in <code>Env_submit</code> -&gt; <code>config-sh/submit.YOURHOUST</code></p></li><li><p><code>POSTP</code>: Postprocessing by Fullpos (<strong>inline</strong>|offline|none).</p></li><li><p><code>FREQ_RESET_[TEMP|GUST]</code>: Reset frequency of max/min values in hours, controls <code>NRAZTS</code>. Default is every 3/1 hours</p></li></ul><pre><code class="language-bash hljs"># **** GRIB ****
CONVERTFA=yes                           # Conversion of FA file to GRIB/nc (yes|no)
ARCHIVE_FORMAT=GRIB1                    # Format of archive files (GRIB1|GRIB2|nc). nc format yet only available in climate mode
NCNAMES=nwp                             # Nameing of NetCDF files follows (climate|nwp) convention.
RCR_POSTP=no                            # Produce a subset of fields from the history file for RCR monitoring
                                        # Only applicable if ARCHIVE_FORMAT=GRIB
MAKEGRIB_LISTENERS=1                    # Number of parallel listeners for Makegrib
                                        # Only applicable if ARCHIVE_FORMAT=GRIB
</code></pre><p>More options on fullpos postprocessing can be found in <code>scr/Select_posp.pl</code></p><ul><li><code>CONVERTFA</code>: Conversion of FA files to GRIB or NetCDF (<strong>yes</strong>|no)</li><li><code>ARCHIVE_FORMAT</code>: Format of archive files (<strong>GRIB1</strong>|nc). NetCDF format yet only available in climate mode</li><li><code>RCR_POSTP</code>: Produce a subset of fields from the history file for RCR monitoring (yes|<strong>no</strong>). This is only applicable if <code>ARCHIVE_FORMAT=GRIB1|GRIB2</code></li><li><code>MAKEGRIB_LISTENERS</code>: Number of parallel listeners for Makegrib. Only applicable if <code>ARCHIVE_FORMAT=GRIB1|GRIB2</code></li></ul><p>More options on file conversion can be found in <code>scr/Makegrib</code></p><h2 id="Verification-and-monitoring"><a class="docs-heading-anchor" href="#Verification-and-monitoring">Verification and monitoring</a><a id="Verification-and-monitoring-1"></a><a class="docs-heading-anchor-permalink" href="#Verification-and-monitoring" title="Permalink"></a></h2><pre><code class="language-bash hljs"># **** Verification extraction ****
OBSEXTR=yes                             # Extract observations from BUFR (yes|no)
FLDEXTR=yes                             # Extract model data for verification from model files (yes|no)
FLDEXTR_TASKS=1                         # Number of parallel tasks for field extraction
VFLDEXP=$EXP                            # Experiment name on vfld files
SCREXTR=no                              # Use Screening (NCONF=002) to produce O-F data
SCREXTR_TASKS=1                         # Number of parallel tasks for O-F extraction
FGREFEXP=${FGREFEXP-undef}              # reference experiment name for FirstGuess
OBREFEXP=${OBREFEXP-undef}              # reference experiment name for ODBs</code></pre><ul><li><code>OBSEXTR</code>: Extract observations for verification from BUFR (<strong>yes</strong>|no)</li><li><code>FLDEXTR</code>: Extract model data for verification from model files (<strong>yes</strong>|no)</li><li><code>*FLDEXTR_TASKS</code>: Number of parallel tasks for field extraction</li><li><code>VFLDEXP</code>: Change <em>vfld</em> file name to this string</li><li><code>SCREXTR</code> : Switch on extraction of O-F data for verification using Screening (NCONF=002)</li><li><code>SCREXTR_TASKS</code> : Number of parallel tasks for O-F extraction</li><li><code>FGREFEXP=${FGREFEXP-undef}</code> : reference experiment name for FirstGuess (useful with PLAYFILE=allobsver)</li><li><code>OBREFEXP=${OBREFEXP-undef}</code> : reference experiment name for ODBs (useful with PLAYFILE=allobsver)</li></ul><p>Read more about the verification package <a href="../../Verification/Verification/#Monitor">here</a></p><h3 id="Field-verification"><a class="docs-heading-anchor" href="#Field-verification">Field verification</a><a id="Field-verification-1"></a><a class="docs-heading-anchor-permalink" href="#Field-verification" title="Permalink"></a></h3><pre><code class="language-bash hljs"># *** Field verification ***
FLDVER=no                               # Main switch for field verification (yes|no)
FLDVER_HOURS=&quot;06 12 18 24 30 36 42 48&quot;  # Hours for field verification</code></pre><ul><li><code>FLDVER</code> Main switch for field verification (yes|<strong>no</strong>). The field verification extracts some selected variables for calculation of bias, rmse, stdv and averages on the model grid.</li><li><code>FLDVER_HOURS</code> Hours for field verification</li></ul><p>More options on field verification can be found in <code>scr/Fldver</code> and <code>scr/AccuFldver</code></p><h3 id="Observation-monitoring-and-general-diagnostics"><a class="docs-heading-anchor" href="#Observation-monitoring-and-general-diagnostics">Observation monitoring and general diagnostics</a><a id="Observation-monitoring-and-general-diagnostics-1"></a><a class="docs-heading-anchor-permalink" href="#Observation-monitoring-and-general-diagnostics" title="Permalink"></a></h3><pre><code class="language-bash hljs"># *** Observation monitoring ***
OBSMONITOR=obstat                       # Create Observation statistics plots
                                        # Format: OBSMONITOR=Option1:Option2:...:OptionN
                                        # obstat: Daily usage maps and departures
                                        # no: Nothing at all
                                        #
                                        # obstat is # only active if ANAATMO != none
OBSMON_SYNC=no                          # Sync obsmn sqlite tables from HOST1 (if set) to HOST0 (yes|no)</code></pre><p><code>OBSMONITOR</code> Selection for observation statistics plots</p><ul><li><code>obstat</code> Observations usage. Read more <a href="../../Verification/Obsmon/#obsmon">here</a>.</li><li><code>no</code> No monitoring</li></ul><p><strong>Note that this is only active if ANAATMO != none</strong></p><h2 id="Mail-addresses"><a class="docs-heading-anchor" href="#Mail-addresses">Mail addresses</a><a id="Mail-addresses-1"></a><a class="docs-heading-anchor-permalink" href="#Mail-addresses" title="Permalink"></a></h2><pre><code class="language-bash hljs"># Recipient(s) to send mails to (you@work,you@home)
MAIL_ON_ABORT=                          # when a task aborts
MAIL_TESTBED=                           # testbed results summary</code></pre><ul><li><code>MAIL_ON_ABORT</code> e-mail address to send a mail to if a task fails in ecFlow</li><li><code>MAIL_TESTBED</code>  e-mail address to send a mail to with a summary of the testbed results</li></ul><h2 id="Testbed"><a class="docs-heading-anchor" href="#Testbed">Testbed</a><a id="Testbed-1"></a><a class="docs-heading-anchor-permalink" href="#Testbed" title="Permalink"></a></h2><pre><code class="language-bash hljs">export TESTBED_LIST=&quot;AROME AROME_1D AROME_3DVAR \
                     AROME_BD_ARO AROME_BD_ARO_IO_SERV \
                     HarmonEPS HarmonEPS_IFSENS \
                     AROME_CLIMSIM&quot;</code></pre><ul><li><code>TESTBED_LIST</code> contains the configurations that will be run in the testbed</li></ul></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../Overview/Source/">« Source</a><a class="docs-footer-nextpage" href="../Namelists/">Namelist »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.3.0 on <span class="colophon-date" title="Thursday 6 June 2024 07:33">Thursday 6 June 2024</span>. Using Julia version 1.9.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
