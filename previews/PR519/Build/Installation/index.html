<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Installation Â· Harmonie wiki</title><script async src="https://www.googletagmanager.com/gtag/js?id=UA-221448594-1"></script><script>  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-221448594-1', {'page_path': location.pathname + location.search + location.hash});
</script><script data-outdated-warner src="../../assets/warner.js"></script><link rel="canonical" href="https://hirlam.github.io/HarmonieSystemDocumentation/dev/Build/Installation/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.png" alt="Harmonie wiki logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">Harmonie wiki</a></span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Getting Started</span><ul><li><a class="tocitem" href="../../System/GitDeveloperDocumentation/">GitHub workflow</a></li><li><a class="tocitem" href="../../Overview/da_graph/">Graphical Overview</a></li><li><a class="tocitem" href="../../System/ECMWF/RunningHarmonieOnAtos/">Running on Atos</a></li><li><input class="collapse-toggle" id="menuitem-2-4" type="checkbox"/><label class="tocitem" for="menuitem-2-4"><span class="docs-label">Overview</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../Overview/Content/">Content</a></li><li><a class="tocitem" href="../../Overview/Binaries/">Binaries</a></li><li><a class="tocitem" href="../../Overview/FileFormats/">File Formats</a></li><li><a class="tocitem" href="../../Overview/Source/">Source</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2-5" type="checkbox"/><label class="tocitem" for="menuitem-2-5"><span class="docs-label">Experiment Configuration</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../ExperimentConfiguration/ConfigureYourExperiment/">Experiment</a></li><li><a class="tocitem" href="../../ExperimentConfiguration/Namelists/">Namelist</a></li><li><a class="tocitem" href="../../ExperimentConfiguration/UseofObservation/">Observations</a></li><li><a class="tocitem" href="../../ExperimentConfiguration/PlatformConfiguration/">Platform</a></li><li><a class="tocitem" href="../../ExperimentConfiguration/How_to_use_hires_topography/">HiRes Topography</a></li><li><a class="tocitem" href="../../ExperimentConfiguration/ModelDomain/">Domain</a></li><li><a class="tocitem" href="../../ExperimentConfiguration/VerticalGrid/">Vertical Grid</a></li></ul></li></ul></li><li><span class="tocitem">NWP Components</span><ul><li><input class="collapse-toggle" id="menuitem-3-1" type="checkbox"/><label class="tocitem" for="menuitem-3-1"><span class="docs-label">Observations</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><input class="collapse-toggle" id="menuitem-3-1-1" type="checkbox"/><label class="tocitem" for="menuitem-3-1-1"><span class="docs-label">Preprocessing</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../Observations/ObservationPreprocessing/">Preprocessing</a></li><li><a class="tocitem" href="../../Observations/Oulan/">Oulan</a></li><li><a class="tocitem" href="../../Observations/Bator/">Bator</a></li><li><a class="tocitem" href="../../Observations/Cope/">Cope</a></li><li><a class="tocitem" href="../../Observations/ObservationData/">ObservationData</a></li><li><a class="tocitem" href="../../Observations/Conrad/">Conrad</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-1-2" type="checkbox"/><label class="tocitem" for="menuitem-3-1-2"><span class="docs-label">How to</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../Observations/SYNOP/">SYNOP</a></li><li><a class="tocitem" href="../../Observations/Amv/">AMV</a></li><li><a class="tocitem" href="../../Observations/Iasi/">IASI</a></li><li><a class="tocitem" href="../../Observations/Atovs/">ATOVS</a></li><li><a class="tocitem" href="../../Observations/Scatt/">Scatt</a></li><li><a class="tocitem" href="../../Observations/Ascat/">AScat</a></li><li><a class="tocitem" href="../../Observations/GNSS/">GNSS</a></li><li><a class="tocitem" href="../../Observations/Modes/">Modes</a></li><li><a class="tocitem" href="../../Observations/RadarData/">Radar</a></li></ul></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-2" type="checkbox"/><label class="tocitem" for="menuitem-3-2"><span class="docs-label">Data Assimilation</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><input class="collapse-toggle" id="menuitem-3-2-1" type="checkbox"/><label class="tocitem" for="menuitem-3-2-1"><span class="docs-label">Surface</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../DataAssimilation/Surface/CANARI/">CANARI</a></li><li><a class="tocitem" href="../../DataAssimilation/Surface/CANARI_OI_MAIN/">CANARI OI MAIN</a></li><li><a class="tocitem" href="../../DataAssimilation/Surface/CANARI_EKF_SURFEX/">CANARI EKF SURFEX</a></li><li><a class="tocitem" href="../../DataAssimilation/Surface/SurfaceAnalysis/">Surface Analysis</a></li></ul></li><li><a class="tocitem" href="../../DataAssimilation/Screening/">Screening</a></li><li><a class="tocitem" href="../../DataAssimilation/StructureFunctions/">Structure functions</a></li><li><a class="tocitem" href="../../DataAssimilation/DataAssimilation4DVAR/">4DVAR</a></li><li><a class="tocitem" href="../../DataAssimilation/DigitalFilterInitialization/">Digital Filter Initialization</a></li><li><a class="tocitem" href="../../DataAssimilation/ObservationOperators/">HOP_DRIVER</a></li><li><a class="tocitem" href="../../DataAssimilation/SingleObs/">Single Obs</a></li><li><a class="tocitem" href="../../DataAssimilation/LSMIXandJk/">LSMIX and Jk</a></li><li><a class="tocitem" href="../../DataAssimilation/DFS/">DFS</a></li><li><a class="tocitem" href="../../DataAssimilation/MTEN/">MTEN</a></li><li><a class="tocitem" href="../../DataAssimilation/CHKEVO/">CHKEVO</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-3" type="checkbox"/><label class="tocitem" for="menuitem-3-3"><span class="docs-label">Boundaries</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../Boundaries/BoundaryFilePreparation/">Preparation</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-4" type="checkbox"/><label class="tocitem" for="menuitem-3-4"><span class="docs-label">Forecast Model</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../ForecastModel/Forecast/">Forecast</a></li><li><a class="tocitem" href="../../ForecastModel/Outputlist/">Output List</a></li><li><a class="tocitem" href="../../ForecastModel/HR/">High Res</a></li><li><input class="collapse-toggle" id="menuitem-3-4-4" type="checkbox"/><label class="tocitem" for="menuitem-3-4-4"><span class="docs-label">Single Column Model</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../ForecastModel/SingleColumnModel/MUSC/">MUSC</a></li><li><a class="tocitem" href="../../ForecastModel/SingleColumnModel/Forcing/">Forcing</a></li><li><a class="tocitem" href="../../ForecastModel/SingleColumnModel/MUSC_vars/">MUSC vars</a></li></ul></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-5" type="checkbox"/><label class="tocitem" for="menuitem-3-5"><span class="docs-label">Climate Generation</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../ClimateGeneration/ClimateGeneration/">Climate Generation</a></li><li><a class="tocitem" href="../../ClimateGeneration/DownloadInputData/">Input Data</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-6" type="checkbox"/><label class="tocitem" for="menuitem-3-6"><span class="docs-label">EPS</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../EPS/Howto/">Howto</a></li><li><a class="tocitem" href="../../EPS/System/">System</a></li><li><a class="tocitem" href="../../EPS/BDSTRATEGY/">BDSTRATEGY</a></li><li><a class="tocitem" href="../../EPS/SLAF/">SLAF</a></li><li><a class="tocitem" href="../../EPS/SPP/">SPP</a></li><li><a class="tocitem" href="../../EPS/SPPT/">SPPT</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-7" type="checkbox"/><label class="tocitem" for="menuitem-3-7"><span class="docs-label">Post Processing</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../PostProcessing/Diagnostics/">Diagnostics</a></li><li><a class="tocitem" href="../../PostProcessing/FileConversions/">FileConversions</a></li><li><a class="tocitem" href="../../PostProcessing/Fullpos/">FullPos</a></li><li><a class="tocitem" href="../../PostProcessing/gl/">GL</a></li><li><a class="tocitem" href="../../PostProcessing/xtool/">xtool</a></li><li><a class="tocitem" href="../../PostProcessing/PostPP/">PostPP</a></li><li><a class="tocitem" href="../../PostProcessing/Interpolation/">Interpolation GL</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-8" type="checkbox"/><label class="tocitem" for="menuitem-3-8"><span class="docs-label">Verification</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../Verification/Extract4verification/">Extract4verification</a></li><li><a class="tocitem" href="../../Verification/Verification/">Verification</a></li><li><a class="tocitem" href="../../Verification/HARP/">HARP</a></li><li><a class="tocitem" href="../../Verification/Obsmon/">Obsmon</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-9" type="checkbox"/><label class="tocitem" for="menuitem-3-9"><span class="docs-label">Visualization</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../Visualization/EPyGrAM/">EpyGram</a></li></ul></li></ul></li><li><span class="tocitem">System</span><ul><li><input class="collapse-toggle" id="menuitem-4-1" type="checkbox" checked/><label class="tocitem" for="menuitem-4-1"><span class="docs-label">Build</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../General/">Software requirements</a></li><li><a class="tocitem" href="../Build_with_makeup/">Makeup</a></li><li><a class="tocitem" href="../Build_with_cmake/">CMake</a></li><li><a class="tocitem" href="../gmkpack/">Gmkpack</a></li><li><a class="tocitem" href="../Gmkpack_vs_Make/">Gmkpack vs Make</a></li><li><a class="tocitem" href="../CompileHarmonie/">Compile Harmonie</a></li><li class="is-active"><a class="tocitem" href>Installation</a><ul class="internal"><li><a class="tocitem" href="#Introduction"><span>Introduction</span></a></li><li><a class="tocitem" href="#Rootpack-Installation"><span>Rootpack Installation</span></a></li><li><a class="tocitem" href="#Configure-your-system"><span>Configure your system</span></a></li><li><a class="tocitem" href="#Submission-rules"><span>Submission rules</span></a></li><li><a class="tocitem" href="#Running-the-installation"><span>Running the installation</span></a></li></ul></li><li><a class="tocitem" href="../Redhat7Install/">Redhat7 Install</a></li><li><a class="tocitem" href="../Centos6Install/">Centos6 Install</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4-2" type="checkbox"/><label class="tocitem" for="menuitem-4-2"><span class="docs-label">Phasing</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../System/MFaccess/">MF Access</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4-3" type="checkbox"/><label class="tocitem" for="menuitem-4-3"><span class="docs-label">Suite Management</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../SuiteManagement/ECFLOW/">ECFLOW</a></li></ul></li><li><a class="tocitem" href="../../System/TheHarmonieScript/">The Harmonie script</a></li><li><a class="tocitem" href="../../System/ECMWF/RunningHarmonieOnAtos/">Running on ECMWF&#39;s Atos</a></li><li><a class="tocitem" href="../../System/ReleaseProcess/">Harmonie release process</a></li><li><a class="tocitem" href="../../System/Local/QuickStartLocal/">Local</a></li><li><a class="tocitem" href="../../System/HarmonieTestbed/">Testbed</a></li><li><a class="tocitem" href="../../System/ECMWF/ECMWF_teleport/">Teleport</a></li><li><a class="tocitem" href="../../System/Build_local_docs/">Local Documentation</a></li><li><a class="tocitem" href="../../System/DrHook/">DrHook</a></li><li><a class="tocitem" href="../../System/StandaloneOdb/">Stand alone ODB</a></li><li><a class="tocitem" href="../../System/UpdateNamelists/">Update Namelist</a></li><li><a class="tocitem" href="../../System/Scalability_and_Refactoring/">Scalability and refactoring</a></li><li><a class="tocitem" href="../../System/HarmonieBenchMark/">Benchmark</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">System</a></li><li><a class="is-disabled">Build</a></li><li class="is-active"><a href>Installation</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Installation</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/Hirlam/Harmonie/blob/dev-CY46h1/docs/src/Build/Installation.md" title="Edit on GitHub"><span class="docs-icon fab">ï</span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="HARMONIE-System-Installation"><a class="docs-heading-anchor" href="#HARMONIE-System-Installation">HARMONIE System Installation</a><a id="HARMONIE-System-Installation-1"></a><a class="docs-heading-anchor-permalink" href="#HARMONIE-System-Installation" title="Permalink"></a></h1><h2 id="Introduction"><a class="docs-heading-anchor" href="#Introduction">Introduction</a><a id="Introduction-1"></a><a class="docs-heading-anchor-permalink" href="#Introduction" title="Permalink"></a></h2><p>In the following the installation and compilation of system is described. Read more about how to get the system in <a href="../General/">here</a></p><h2 id="Rootpack-Installation"><a class="docs-heading-anchor" href="#Rootpack-Installation">Rootpack Installation</a><a id="Rootpack-Installation-1"></a><a class="docs-heading-anchor-permalink" href="#Rootpack-Installation" title="Permalink"></a></h2><p>Gmkpack is the ALADIN utility to compile ARPEGE/IFS</p><ul><li>Handle dependencies (includes/modules)</li><li>Handle exceptions</li><li>Compile the code</li><li>Build the binaries</li></ul><p>A mainpack installs and builds a complete HARMONIE source (ALADIN/HIRALD/ALARO/AROME models). Generate a set of pre-compiled libraries (rootpack) and modules available for USE.  Each single user buils their own  local &quot;target&quot; pack, which synchronise local source modifications with the reference libraries.  </p><p><a href="http://www.cnrm.meteo.fr/gmapdoc/spip.php?page=recherche&amp;recherche=gmkpack">gmapdoc</a></p><p><a href="../Gmkpack_vs_Make/">gmkpack vs make</a></p><p>gmkpack is intended to be installed and maintained separately. In HARMONIE it is a part of the system and used in Build<em>gmkpack, Build</em>rootpack and Build_pack</p><p>Available main packs on <code>cca:/project/hirlam/harmonie/pack</code> could look like:</p><p><code>37h1_harmonEPS_11389.01.XLF130100000009.x</code> <code>37h1_harmonEPS_11842.01.XLF130100000009.x</code> <code>37h1_harmonEPS_11899.01.XLF130100000009.x</code> <code>37h1_main.01.XLF130100000009.x</code> <code>37h1_main.02.XLF130100000009.x</code> <code>38h1_alpha.01.XLF130100000009.x</code> <code>38h1_alpha.02.XLF130100000009.x</code> <code>38h1_beta.01.XLF130100000009.x</code></p><p>ie. <code>CYCLE_BRANCH.VERIONS.COMPILER_VERSION.OPTION</code> For the latest available packs please check on cca.</p><ul><li>Supported platforms and compilers see <code>util/gmkpack/arch</code><ul><li>IBM power 7, xlf95</li><li>Intel (g95, gfortran, intel)</li><li>NEC</li><li>Cray, ftn</li></ul></li></ul><h2 id="Configure-your-system"><a class="docs-heading-anchor" href="#Configure-your-system">Configure your system</a><a id="Configure-your-system-1"></a><a class="docs-heading-anchor-permalink" href="#Configure-your-system" title="Permalink"></a></h2><p>We assume you have a copy of the repository under <code>PATH_TO_HARMONIE</code>. To start the build, create an experiment directory <code>$HOME/hm_home/trunk</code> and run</p><pre><code class="language-bash hljs">   PATH_TO_HARMONIE/config-sh/Harmonie setup -r PATH_TO_HARMONIE -h YOURHOST</code></pre><p>The above command creates the following files/directories under</p><pre><code class="language-bash hljs">   config-sh/hm_rev                         # gives the path to the reference installation, similar to hl_rev in synoptic-Hirlam
   config-sh/Main                           # a script to enable start Harmonie, similar to Start in synoptic-Hirlam
   Env_system -&gt; config-sh/config.YOURHOST  # describing your system, similar to Env_system in synoptic-Hirlam
   Env_submit -&gt; config-sh/submit.YOURHOST  # describing your submit commands, comparable to submission.db in synoptic-Hirlam
   ecf/config_exp.h                          # defines your experiment, comparable to Env_expdesc in synoptic-Hirlam</code></pre><p>In <code>ecf/config_exp.h</code>  you may identify the options sent to gmkpack</p><pre><code class="language-bash hljs"># Definitions about gmkpack, should fit with hm_rev
      BUILD_ROOTPACK=${BUILD_ROOTPACK-yes}    # Build your own ROOTPACK if it doesn&#39;t exists (yes|no)
                                              # This may take several hours!
                                              # Make sure you have write permissions in ROOTPACK directory defined in Env_system
      REVISION=38h1                           # Revision ( or cycle ) number, has to be set even for the trunk!
      BRANCH=trunk
      VERSION=01                              # Version of revision/branch to use
      OPTION=x                                # Which gmkpack/arch/SYSTEM.HOST.OPTION file to use
      OTHER_PROGRAMS=&quot;soda pgd blend odbtools bator ioassign odbsql blendsur addsurf surfex mandalay prep lfitools sfxtools&quot; # Other things to compile with gmkpack</code></pre><p>You could run something different than defined in hm_rev, but then there would be a mismatch between your source code and the pre-compiled libraries/modules.</p><p>Identify your system in one of the config files in config-sh or write a new <code>config.YOURHOST</code> definition, make sure that some of the important optional settings are defined in this file:</p><pre><code class="language-bash hljs"> COMPCENTRE       # should be something else than ECMWF
 HM_DATA          # where you run your experiments and where you 
 HM_LIB           # where you find the copy of the source code and the compiled libraries
 ROOTPACK         # where you refer/put your rootpack installations
 HARMONIE_CONFIG  # identifies your configuration
 AUXLIBS/EMOSLIB  # Path to your external libraries</code></pre><p>Compare e.g. with <code>config-sh/config.ECMWF.atos</code> or <code>config-sh/config.krypton</code>.</p><p>You also have to identify your system for gmkpack in:</p><pre><code class="language-bash hljs">        util/gmkpack/arch/YOURMACHINE.HARMONIE_CONFIG</code></pre><p>The source code for utilities not compiled with gmkpack you find under util. There should be five config files created/edited.</p><pre><code class="language-bash hljs">        util/gl/config/config.HARMONIE_CONFIG
        util/gl_grib_api/config/config.HARMONIE_CONFIG
        util/monitor/config/config.HARMONIE_CONFIG
        util/oulan/config.HARMONIE_CONFIG
        util/conrad/config.HARMONIE_CONFIG
</code></pre><p>The makefiles themselves should not have to be edited.</p><h2 id="Submission-rules"><a class="docs-heading-anchor" href="#Submission-rules">Submission rules</a><a id="Submission-rules-1"></a><a class="docs-heading-anchor-permalink" href="#Submission-rules" title="Permalink"></a></h2><p>Next you have to identify your submit file in config-sh or write a new submit.YOURHOST file. This file defines how you submit your jobs in your local batch system.  The routine get_job is called from <code>scr/submission.db</code> and should return the appropriate batch header including some environment variables specifying the parallel decomposition. The way the header is constructed could be different on different hosts as long as the appropriate header is returned.</p><p>On <code>config-sh/submit.ECMWF.atos</code> four list of jobs are created:</p><ul><li>backg_list for jobs running as background jobs on the ecFlow server</li><li>scalar_list single PE jobs on hpc-batch (nf queue)</li><li>frac_list parallel PE jobs on hpc-batch using less than half a node (nf queue)</li><li>par_list for parallel jobs on hpc-batch  (np queue)</li></ul><p>The scalar_list is the default one, meaning that any unspecified job will be run as a single PE job on HPCE. Default values are defined for each list. Special settings for special jobs can be set like:</p><pre><code class="language-bash hljs"> $job_list{&#39;Prep_ini_surfex&#39;}{&#39;RESOURCES&#39;} = $submit_type.&#39;resources = ConsumableCPUs(1) ConsumableMemory(6000 MB)&#39; ;</code></pre><h2 id="Running-the-installation"><a class="docs-heading-anchor" href="#Running-the-installation">Running the installation</a><a id="Running-the-installation-1"></a><a class="docs-heading-anchor-permalink" href="#Running-the-installation" title="Permalink"></a></h2><p>Start the compilation of the rootpack :</p><pre><code class="language-bash hljs">      PATH_TO_HARMONIE/config-sh/Harmonie install</code></pre><p>The suite definition file used for the installation is  <code>msms/Install_rootpack.tdf</code>. The installation is just like running an experiment.</p><p>Where are things happening</p><ul><li><p><code>Build_gmkpack</code> </p></li><li><p><code>Build_rootpack</code></p></li><li><p>rsync the sources from <code>HM_REV</code>, <code>HM_CMODS</code>, <code>HM_LIB</code></p></li><li><p>cleanpack</p></li><li><p>compiles the ODB compiler</p></li><li><p>compiles IFS</p></li><li><p>locks the pack</p></li><li><p>Build_pack</p></li><li><p>build everything in the <code>OTHER_PROGRAMS</code> list. This is done inside <code>HM_DATA/gmkpack_build</code></p></li><li><p>build the utilities (<code>gl/verobs/oulan</code>)</p></li></ul><p>When things goes wrong</p><ul><li><code>ics_*</code> can be run stand alone from the ROOTPACK or <code>$HM_DATA/gmkpack_build</code> directory<ul><li>Turn off the compilation and linking</li><li>build the libraries by running the <code>ics_*</code> file by hand</li><li><code>BUILD_ROOTPACK=no</code>, put the corrections to the failing code in your experiment</li><li>rerun Harmonie install</li></ul></li></ul><p><strong>The main task for the installation is to compile the rootpack. However, the binaries created are never used by any other experiment.</strong></p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../CompileHarmonie/">Â« Compile Harmonie</a><a class="docs-footer-nextpage" href="../Redhat7Install/">Redhat7 Install Â»</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.23 on <span class="colophon-date" title="Saturday 3 December 2022 13:23">Saturday 3 December 2022</span>. Using Julia version 1.6.7.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
