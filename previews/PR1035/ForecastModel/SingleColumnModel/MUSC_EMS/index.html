<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>MUSC EMS · Harmonie wiki</title><meta name="title" content="MUSC EMS · Harmonie wiki"/><meta property="og:title" content="MUSC EMS · Harmonie wiki"/><meta property="twitter:title" content="MUSC EMS · Harmonie wiki"/><meta name="description" content="Documentation for Harmonie wiki."/><meta property="og:description" content="Documentation for Harmonie wiki."/><meta property="twitter:description" content="Documentation for Harmonie wiki."/><meta property="og:url" content="https://hirlam.github.io/HarmonieSystemDocumentation/dev/ForecastModel/SingleColumnModel/MUSC_EMS/"/><meta property="twitter:url" content="https://hirlam.github.io/HarmonieSystemDocumentation/dev/ForecastModel/SingleColumnModel/MUSC_EMS/"/><link rel="canonical" href="https://hirlam.github.io/HarmonieSystemDocumentation/dev/ForecastModel/SingleColumnModel/MUSC_EMS/"/><script async src="https://www.googletagmanager.com/gtag/js?id=G-HQ1BCP3LPJ"></script><script>  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-HQ1BCP3LPJ', {'page_path': location.pathname + location.search + location.hash});
</script><script data-outdated-warner src="../../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../../assets/documenter.js"></script><script src="../../../search_index.js"></script><script src="../../../siteinfo.js"></script><script src="../../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../../"><img src="../../../assets/logo.png" alt="Harmonie wiki logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../../">Harmonie wiki</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../../">Home</a></li><li><span class="tocitem">Getting Started</span><ul><li><a class="tocitem" href="../../../System/GitDeveloperDocumentation/">GitHub workflow</a></li><li><a class="tocitem" href="../../../Overview/da_graph/">Graphical Overview</a></li><li><a class="tocitem" href="../../../System/ECMWF/RunningHarmonieOnAtos/">Running on Atos</a></li><li><input class="collapse-toggle" id="menuitem-2-4" type="checkbox"/><label class="tocitem" for="menuitem-2-4"><span class="docs-label">Overview</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../Overview/Content/">Content</a></li><li><a class="tocitem" href="../../../Overview/Binaries/">Binaries</a></li><li><a class="tocitem" href="../../../Overview/FileFormats/">File Formats</a></li><li><a class="tocitem" href="../../../Overview/Source/">Source</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2-5" type="checkbox"/><label class="tocitem" for="menuitem-2-5"><span class="docs-label">Experiment Configuration</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../ExperimentConfiguration/ConfigureYourExperiment/">Experiment</a></li><li><a class="tocitem" href="../../../ExperimentConfiguration/Namelists/">Namelist</a></li><li><a class="tocitem" href="../../../ExperimentConfiguration/UseofObservation/">Observations</a></li><li><a class="tocitem" href="../../../ExperimentConfiguration/PlatformConfiguration/">Platform</a></li><li><a class="tocitem" href="../../../ExperimentConfiguration/How_to_use_hires_topography/">HiRes Topography</a></li><li><a class="tocitem" href="../../../ExperimentConfiguration/ModelDomain/">Domain</a></li><li><a class="tocitem" href="../../../ExperimentConfiguration/VerticalGrid/">Vertical Grid</a></li></ul></li></ul></li><li><span class="tocitem">NWP Components</span><ul><li><input class="collapse-toggle" id="menuitem-3-1" type="checkbox"/><label class="tocitem" for="menuitem-3-1"><span class="docs-label">Observations</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><input class="collapse-toggle" id="menuitem-3-1-1" type="checkbox"/><label class="tocitem" for="menuitem-3-1-1"><span class="docs-label">Preprocessing</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../Observations/ObservationPreprocessing/">Preprocessing</a></li><li><a class="tocitem" href="../../../Observations/Oulan/">Oulan</a></li><li><a class="tocitem" href="../../../Observations/Bator/">Bator</a></li><li><a class="tocitem" href="../../../Observations/Cope/">Cope</a></li><li><a class="tocitem" href="../../../Observations/ObservationData/">ObservationData</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-1-2" type="checkbox"/><label class="tocitem" for="menuitem-3-1-2"><span class="docs-label">How to</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../Observations/SYNOP/">SYNOP</a></li><li><a class="tocitem" href="../../../Observations/Amv/">AMV</a></li><li><a class="tocitem" href="../../../Observations/Atovs/">ATOVS</a></li><li><a class="tocitem" href="../../../Observations/Iasi/">IASI</a></li><li><a class="tocitem" href="../../../Observations/Seviri/">SEVIRI</a></li><li><a class="tocitem" href="../../../Observations/Scatt/">Scatt</a></li><li><a class="tocitem" href="../../../Observations/Ascat/">AScat</a></li><li><a class="tocitem" href="../../../Observations/GNSS/">GNSS</a></li><li><a class="tocitem" href="../../../Observations/Modes/">Modes</a></li><li><a class="tocitem" href="../../../Observations/RadarData/">Radar</a></li><li><a class="tocitem" href="../../../Observations/Aeolus/">Aeolus</a></li></ul></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-2" type="checkbox"/><label class="tocitem" for="menuitem-3-2"><span class="docs-label">Data Assimilation</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><input class="collapse-toggle" id="menuitem-3-2-1" type="checkbox"/><label class="tocitem" for="menuitem-3-2-1"><span class="docs-label">Surface</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../DataAssimilation/Surface/CANARI/">CANARI</a></li><li><a class="tocitem" href="../../../DataAssimilation/Surface/CANARI_OI_MAIN/">CANARI OI MAIN</a></li><li><a class="tocitem" href="../../../DataAssimilation/Surface/CANARI_EKF_SURFEX/">CANARI EKF SURFEX</a></li><li><a class="tocitem" href="../../../DataAssimilation/Surface/SurfaceAnalysis/">Surface Analysis</a></li></ul></li><li><a class="tocitem" href="../../../DataAssimilation/Screening/">Screening</a></li><li><a class="tocitem" href="../../../DataAssimilation/StructureFunctions/">Structure functions</a></li><li><a class="tocitem" href="../../../DataAssimilation/DaAlgorithms/">Algorithms</a></li><li><a class="tocitem" href="../../../DataAssimilation/DigitalFilterInitialization/">Digital Filter Initialization</a></li><li><a class="tocitem" href="../../../DataAssimilation/ObservationOperators/">HOP_DRIVER</a></li><li><a class="tocitem" href="../../../DataAssimilation/SingleObs/">Single Obs</a></li><li><a class="tocitem" href="../../../DataAssimilation/LSMIXandJk/">LSMIX and Jk</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-3" type="checkbox"/><label class="tocitem" for="menuitem-3-3"><span class="docs-label">Diagnostics</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><input class="collapse-toggle" id="menuitem-3-3-1" type="checkbox"/><label class="tocitem" for="menuitem-3-3-1"><span class="docs-label">Data Assimilation</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../DataAssimilation/DFS/">DFS</a></li><li><a class="tocitem" href="../../../DataAssimilation/MTEN/">MTEN</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-3-2" type="checkbox"/><label class="tocitem" for="menuitem-3-3-2"><span class="docs-label">Forecast(spin-up)</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../DataAssimilation/CHKEVO/">CHKEVO</a></li><li><a class="tocitem" href="../../../DataAssimilation/NWECHKEVO/">NWECHKEVO</a></li></ul></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-4" type="checkbox"/><label class="tocitem" for="menuitem-3-4"><span class="docs-label">Boundaries</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../Boundaries/BoundaryFilePreparation/">Preparation</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-5" type="checkbox" checked/><label class="tocitem" for="menuitem-3-5"><span class="docs-label">Forecast Model</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../Forecast/">Forecast</a></li><li><a class="tocitem" href="../../ForecastSettings/">Settings</a></li><li><a class="tocitem" href="../../Outputlist/">Output List</a></li><li><a class="tocitem" href="../../HR/">High Res</a></li><li><input class="collapse-toggle" id="menuitem-3-5-5" type="checkbox" checked/><label class="tocitem" for="menuitem-3-5-5"><span class="docs-label">Single Column Model</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../MUSC/">MUSC</a></li><li><a class="tocitem" href="../Forcing/">Forcing</a></li><li class="is-active"><a class="tocitem" href>MUSC EMS</a><ul class="internal"><li><a class="tocitem" href="#Start-your-container"><span>Start your container</span></a></li><li><a class="tocitem" href="#Compile-the-code"><span>Compile the code</span></a></li><li><a class="tocitem" href="#Install-EMS"><span>Install EMS</span></a></li><li><a class="tocitem" href="#Run-EMS"><span>Run EMS</span></a></li><li><a class="tocitem" href="#Analysing-results-using-Atlas"><span>Analysing results using Atlas</span></a></li></ul></li><li><a class="tocitem" href="../MUSC_vars/">MUSC vars</a></li></ul></li><li><a class="tocitem" href="../../WindFarms/">Wind Farm Parameterisation</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-6" type="checkbox"/><label class="tocitem" for="menuitem-3-6"><span class="docs-label">Climate Generation</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../ClimateGeneration/ClimateGeneration/">Climate Generation</a></li><li><a class="tocitem" href="../../../ClimateGeneration/DownloadInputData/">Input Data</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-7" type="checkbox"/><label class="tocitem" for="menuitem-3-7"><span class="docs-label">EPS</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../EPS/Howto/">Howto</a></li><li><a class="tocitem" href="../../../EPS/System/">System</a></li><li><a class="tocitem" href="../../../EPS/BDSTRATEGY/">BDSTRATEGY</a></li><li><a class="tocitem" href="../../../EPS/SLAF/">SLAF</a></li><li><a class="tocitem" href="../../../EPS/SPP/">SPP</a></li><li><a class="tocitem" href="../../../EPS/SPPT/">SPPT</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-8" type="checkbox"/><label class="tocitem" for="menuitem-3-8"><span class="docs-label">Post Processing</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../PostProcessing/Diagnostics/">Diagnostics</a></li><li><a class="tocitem" href="../../../PostProcessing/FileConversions/">FileConversions</a></li><li><a class="tocitem" href="../../../PostProcessing/Fullpos/">FullPos</a></li><li><a class="tocitem" href="../../../PostProcessing/gl/">GL</a></li><li><a class="tocitem" href="../../../PostProcessing/xtool/">xtool</a></li><li><a class="tocitem" href="../../../PostProcessing/Interpolation/">Interpolation GL</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-9" type="checkbox"/><label class="tocitem" for="menuitem-3-9"><span class="docs-label">Verification</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../Verification/Extract4verification/">Extract4verification</a></li><li><a class="tocitem" href="../../../Verification/Verification/">Verification</a></li><li><a class="tocitem" href="../../../Verification/HARP/">HARP</a></li><li><a class="tocitem" href="../../../Verification/Obsmon/">Obsmon</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-10" type="checkbox"/><label class="tocitem" for="menuitem-3-10"><span class="docs-label">Visualization</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../Visualization/EPyGrAM/">EpyGram</a></li></ul></li></ul></li><li><span class="tocitem">System</span><ul><li><input class="collapse-toggle" id="menuitem-4-1" type="checkbox"/><label class="tocitem" for="menuitem-4-1"><span class="docs-label">Build</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../Build/Build_with_cmake/">CMake</a></li><li><a class="tocitem" href="../../../Build/Build_with_makeup/">Makeup</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4-2" type="checkbox"/><label class="tocitem" for="menuitem-4-2"><span class="docs-label">Phasing</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../System/MFaccess/">MF Access</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4-3" type="checkbox"/><label class="tocitem" for="menuitem-4-3"><span class="docs-label">Suite Management</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../SuiteManagement/ECFLOW/">ECFLOW</a></li></ul></li><li><a class="tocitem" href="../../../System/TheHarmonieScript/">The Harmonie script</a></li><li><a class="tocitem" href="../../../System/ECMWF/RunningHarmonieOnAtos/">Running on ECMWF&#39;s Atos</a></li><li><a class="tocitem" href="../../../System/ReleaseProcess/">Harmonie release process</a></li><li><a class="tocitem" href="../../../System/Local/QuickStartLocal/">Local</a></li><li><a class="tocitem" href="../../../System/HarmonieTestbed/">Testbed</a></li><li><a class="tocitem" href="../../../System/ECMWF/ECMWF_teleport/">Teleport</a></li><li><a class="tocitem" href="../../../System/Build_local_docs/">Local Documentation</a></li><li><a class="tocitem" href="../../../System/DrHook/">DrHook</a></li><li><a class="tocitem" href="../../../System/StandaloneOdb/">Stand alone ODB</a></li><li><a class="tocitem" href="../../../System/UpdateNamelists/">Update Namelist</a></li></ul></li><li><a class="tocitem" href="../../../references/">References</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">NWP Components</a></li><li><a class="is-disabled">Forecast Model</a></li><li><a class="is-disabled">Single Column Model</a></li><li class="is-active"><a href>MUSC EMS</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>MUSC EMS</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/Hirlam/Harmonie" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/Hirlam/Harmonie/blob/dev-CY46h1/docs/src/ForecastModel/SingleColumnModel/MUSC_EMS.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Run-MUSC-with-EMS"><a class="docs-heading-anchor" href="#Run-MUSC-with-EMS">Run MUSC with EMS</a><a id="Run-MUSC-with-EMS-1"></a><a class="docs-heading-anchor-permalink" href="#Run-MUSC-with-EMS" title="Permalink"></a></h1><p><strong>These instructions require the use of dev-CY46h1.</strong></p><p>If you find any issues with any of the instructions or scripts, feel free to notify Emily Gleeson (emily.gleesonATmet.ie) and Eoin Whelan (eoin.whelanATmet.ie)</p><p>In this section a description of how to install and run MUSC using EMS is provided. This is based on compilation and execution in a Ubuntu 20.04 container (tested using Apptainer on the ECMWF Atos HPC) and use of the EMS system to execute MUSC and convert the output to NetCDF. EMS is primarily developed by Romain Roehrig (Météo France) <a href="https://github.com/romainroehrig/EMS">https://github.com/romainroehrig/EMS</a>.</p><h2 id="Start-your-container"><a class="docs-heading-anchor" href="#Start-your-container">Start your container</a><a id="Start-your-container-1"></a><a class="docs-heading-anchor-permalink" href="#Start-your-container" title="Permalink"></a></h2><ol><li>Log in to hpc-login on the Atos</li><li>Load the Apptainer module and start the Ubuntu 20.04 container:</li></ol><pre><code class="language-shell hljs">module load apptainer
/home/dui/musc_ubuntu.sif</code></pre><p>Further details concerning Apptainer on the Atos are available <a href="https://confluence.ecmwf.int/display/UDOC/HPC2020%3A+Container+support">here</a></p><h2 id="Compile-the-code"><a class="docs-heading-anchor" href="#Compile-the-code">Compile the code</a><a id="Compile-the-code-1"></a><a class="docs-heading-anchor-permalink" href="#Compile-the-code" title="Permalink"></a></h2><p>I (Eoin) have not had time to sort out compilation using CMake but the following instructions provide a minimalist approach to compile the code using makeup. These instructions depend on you having a clone or copy of Harmonie (dev-46h1) in your <code>$PERM</code> directory on Atos where GHUSER is your Github username.</p><pre><code class="language-shell hljs">cd $PERM
GHUSER=your_github_username
git clone git@github.com:$GHUSER/Harmonie.git harmonie_git/$GHUSER/dev-CY46h1 -b dev-CY46h1

(Ensure that your fork is up-to-date before doing this or else take the code from the main
CY46 repo. Note that to run GABLS1 you need to use two updated surfex subroutines `tszo.F90`
and `read_pgd_tsz0_parn.F90`. You can copy these files from util/musc/patches as follows:

cp $PERM/harmonie_git/$GHUSER/dev-CY46h1/util/musc/patches/tsz0.F90 $PERM/harmonie_git/$GHUSER/dev-CY46h1/src/surfex/SURFEX/tsz0.F90
cp $PERM/harmonie_git/$GHUSER/dev-CY46h1/util/musc/patches/read_pgd_tsz0_parn.F90 $PERM/harmonie_git/$GHUSER/dev-CY46h1/src/surfex/SURFEX/read_pgd_tsz0_parn.F90
or by using git apply gabls.patch).
</code></pre><p>Compile the code in your code checkout/copy:</p><pre><code class="language-shell hljs">cd $PERM/harmonie_git/$GHUSER/dev-CY46h1
EXP=$(basename $(git symbolic-ref --short HEAD))
. config-sh/config.ubuntu20_nompi
util/makeup/build -n 4 config.${HARMONIE_CONFIG}
mkdir ${EXP}
mv makeup.${HARMONIE_CONFIG} bin configlog.1 makelog.1 ${EXP}/</code></pre><h2 id="Install-EMS"><a class="docs-heading-anchor" href="#Install-EMS">Install EMS</a><a id="Install-EMS-1"></a><a class="docs-heading-anchor-permalink" href="#Install-EMS" title="Permalink"></a></h2><p>The following instructions provide details on how to download a <em>HIRLAM</em> version of EMS and install locally in your own account:</p><pre><code class="language-shell hljs">cd $HOME
git clone git@github.com:ewhelan/EMS.git -b hirlam EMS_git/EMS
cd EMS_git/EMS/
mkdir build
cd build/
export EMS_DIR=$HOME/metapp/ems
cmake .. -DCMAKE_INSTALL_PREFIX=$EMS_DIR &amp;&amp; make &amp;&amp; ctest &amp;&amp; make install
export PATH=${EMS_DIR}/bin:$PATH
export PYTHONPATH=${EMS_DIR}</code></pre><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>For GABLS1 in <code>prep_nam_sfx.py_orig</code> the following lines need to be commented out:</p><pre><code class="nohighlight hljs">nam[nn][&#39;XUNIF_CLAY&#39;] = [&#39;1.&#39;]
nam[nn][&#39;XUNIF_SAND&#39;] = [&#39;0.&#39;]
nam[nn][&#39;XUNIF_RUNOFFB&#39;] = [&#39;0.5&#39;]

nam[nn][&#39;XHUG_SURF&#39;] = [&#39;-10.&#39;]
nam[nn][&#39;XHUG_ROOT&#39;] = [&#39;-10.&#39;]
nam[nn][&#39;XHUG_DEEP&#39;] = [&#39;-10.&#39;]
</code></pre></div></div><h2 id="Run-EMS"><a class="docs-heading-anchor" href="#Run-EMS">Run EMS</a><a id="Run-EMS-1"></a><a class="docs-heading-anchor-permalink" href="#Run-EMS" title="Permalink"></a></h2><p>Here are some instructions on how to use EMS to execute idealised cases</p><pre><code class="language-shell hljs">export EMS_DIR=$HOME/metapp/ems
export PATH=${EMS_DIR}/bin:$PATH
export PYTHONPATH=${EMS_DIR}
mkdir $HOME/ems_exec
cd $HOME/ems_exec
cp ${EMS_DIR}/share/config/config_46h1_HARMAROME_DEV.py .
### edit his file to point to your binaries
ems_list_cases.py
export PYTHONPATH=$(pwd):$PYTHONPATH
# MUSC.py -config config_46h1_HARMAROME_DEV.py -case $CASE  -subcase $SUBCASE
MUSC.py -config config_46h1_HARMAROME_DEV.py -case ARMCU  -subcase REF</code></pre><p>Output and log file can be found in <code>$HOME/ems_exec/simulations/46t1/46h1_HARMAROME_DEV/${CASE}/${SUBCASE}</code></p><h3 id="EMS-Cases"><a class="docs-heading-anchor" href="#EMS-Cases">EMS Cases</a><a id="EMS-Cases-1"></a><a class="docs-heading-anchor-permalink" href="#EMS-Cases" title="Permalink"></a></h3><p>The table below lists the cases available in EMS and results of early tests.</p><table><tr><th style="text-align: right">Case</th><th style="text-align: right">Status</th><th style="text-align: right">Reference(s)</th></tr><tr><td style="text-align: right">GABLS1 REF</td><td style="text-align: right">❌<sup class="footnote-reference"><a id="citeref-1" href="#footnote-1">[1]</a></sup></td><td style="text-align: right"></td></tr><tr><td style="text-align: right">GABLS1 MESONH</td><td style="text-align: right">❌<sup class="footnote-reference"><a id="citeref-1" href="#footnote-1">[1]</a></sup></td><td style="text-align: right"></td></tr><tr><td style="text-align: right">GABLS4 STAGE3</td><td style="text-align: right">❌<sup class="footnote-reference"><a id="citeref-1" href="#footnote-1">[1]</a></sup></td><td style="text-align: right"></td></tr><tr><td style="text-align: right">GABLS4 STAGE3-SHORT</td><td style="text-align: right">❌<sup class="footnote-reference"><a id="citeref-1" href="#footnote-1">[1]</a></sup></td><td style="text-align: right"></td></tr><tr><td style="text-align: right">AYOTTE 00SC</td><td style="text-align: right">✔️</td><td style="text-align: right"></td></tr><tr><td style="text-align: right">AYOTTE 00WC</td><td style="text-align: right">✔️</td><td style="text-align: right"></td></tr><tr><td style="text-align: right">AYOTTE 03SC</td><td style="text-align: right">✔️</td><td style="text-align: right"></td></tr><tr><td style="text-align: right">AYOTTE 05SC</td><td style="text-align: right">✔️</td><td style="text-align: right"></td></tr><tr><td style="text-align: right">AYOTTE 05WC</td><td style="text-align: right">✔️</td><td style="text-align: right"></td></tr><tr><td style="text-align: right">AYOTTE 24SC</td><td style="text-align: right">✔️</td><td style="text-align: right"></td></tr><tr><td style="text-align: right">IHOP REF</td><td style="text-align: right">✔️</td><td style="text-align: right"></td></tr><tr><td style="text-align: right">SCMS REF</td><td style="text-align: right">✔️</td><td style="text-align: right"></td></tr><tr><td style="text-align: right">RICO SHORT</td><td style="text-align: right">✔️</td><td style="text-align: right"></td></tr><tr><td style="text-align: right">RICO MESONH</td><td style="text-align: right">✔️</td><td style="text-align: right"></td></tr><tr><td style="text-align: right">ARMCU REF</td><td style="text-align: right">✔️</td><td style="text-align: right"></td></tr><tr><td style="text-align: right">ARMCU MESONH</td><td style="text-align: right">✔️</td><td style="text-align: right"></td></tr><tr><td style="text-align: right">ARMCU E3SM</td><td style="text-align: right">✔️</td><td style="text-align: right"></td></tr><tr><td style="text-align: right">BOMEX REF</td><td style="text-align: right">❌<sup class="footnote-reference"><a id="citeref-2" href="#footnote-2">[2]</a></sup></td><td style="text-align: right"></td></tr><tr><td style="text-align: right">MPACE REF</td><td style="text-align: right">✔️</td><td style="text-align: right"></td></tr><tr><td style="text-align: right">FIRE REF</td><td style="text-align: right">✔️</td><td style="text-align: right"></td></tr><tr><td style="text-align: right">SANDU REF</td><td style="text-align: right">✔️</td><td style="text-align: right"></td></tr><tr><td style="text-align: right">SANDU FAST</td><td style="text-align: right">✔️</td><td style="text-align: right"></td></tr><tr><td style="text-align: right">SANDU SLOW</td><td style="text-align: right">✔️</td><td style="text-align: right"></td></tr><tr><td style="text-align: right">AMMA REF</td><td style="text-align: right">✔️</td><td style="text-align: right"></td></tr><tr><td style="text-align: right">DYNAMO NSA3A</td><td style="text-align: right">✔️</td><td style="text-align: right">Takes a long time!</td></tr><tr><td style="text-align: right">DYNAMO NSA3A_D1</td><td style="text-align: right">✔️</td><td style="text-align: right"></td></tr><tr><td style="text-align: right">DYNAMO NSA3A_D30</td><td style="text-align: right">❌<sup class="footnote-reference"><a id="citeref-3" href="#footnote-3">[3]</a></sup></td><td style="text-align: right"></td></tr><tr><td style="text-align: right">DYNAMO NSA3A_MJO1</td><td style="text-align: right">✔️</td><td style="text-align: right"></td></tr></table><h2 id="Analysing-results-using-Atlas"><a class="docs-heading-anchor" href="#Analysing-results-using-Atlas">Analysing results using Atlas</a><a id="Analysing-results-using-Atlas-1"></a><a class="docs-heading-anchor-permalink" href="#Analysing-results-using-Atlas" title="Permalink"></a></h2><p>Still in the Apptainer container</p><pre><code class="language-shell hljs">cd $HOME
git clone git@github.com:ewhelan/SCM-atlas.git -b hirlam SCM-atlas_git/ewhelan/hirlam
export PATH=$HOME/SCM-atlas_git/ewhelan/hirlam/apptools:$PATH
export PYTHONPATH=$HOME/SCM-atlas_git/ewhelan/hirlam:$PYTHONPATH
export ATLAS_CONFIG=&quot;&quot;
mkdir -p $HOME/Atlas
cd $HOME/Atlas
mkdir config
cp $HOME/SCM-atlas_git/ewhelan/hirlam/examples/config/config_HARM.py config/
### edit config/config_HARM.py
run_atlas1d.py -config config/config_HARM.py</code></pre><section class="footnotes is-size-7"><ul><li class="footnote" id="footnote-1"><a class="tag is-link" href="#citeref-1">1</a>Issue with SURFEX namelist</li><li class="footnote" id="footnote-2"><a class="tag is-link" href="#citeref-2">2</a>Python issue L241 <code>$EMS_DIR/ems/prep_init_forc_atm_GMAP.py</code></li><li class="footnote" id="footnote-3"><a class="tag is-link" href="#citeref-3">3</a>Missing <code>data_input.nc</code> </li></ul></section></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../Forcing/">« Forcing</a><a class="docs-footer-nextpage" href="../MUSC_vars/">MUSC vars »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="auto">Automatic (OS)</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.0.1 on <span class="colophon-date" title="Monday 26 February 2024 15:22">Monday 26 February 2024</span>. Using Julia version 1.9.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
