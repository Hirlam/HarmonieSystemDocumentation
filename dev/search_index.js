var documenterSearchIndex = {"docs":
[{"location":"Overview/Content/#Harmonie-Content-1","page":"Harmonie Content","title":"Harmonie Content","text":"","category":"section"},{"location":"Overview/Content/#util-1","page":"Harmonie Content","title":"util","text":"","category":"section"},{"location":"DataAssimilation/MTEN/#Moist-Total-Energy-Norm-(MTEN)-diagnostic-1","page":"MTEN","title":"Moist Total Energy Norm (MTEN) diagnostic","text":"","category":"section"},{"location":"DataAssimilation/MTEN/#","page":"MTEN","title":"MTEN","text":"MTEN shows the sensitivity of the forecast model to different observations withdrawn from the full analysis system.  There are two ways of computing the MTEN diagnostic: A special branch was created in CY40 (see below) where the MTEN diagnostic can be requested. This approach uses Harmonie ensemble system to perform series of observation denial independent runs. This means that the following settings are used in msms/harmonie.pm","category":"page"},{"location":"DataAssimilation/MTEN/#","page":"MTEN","title":"MTEN","text":"    'ENSBDMBR' => [ 0 ],\n    'ENSCTL'   => [ '000',  '001',  '002',  '003', '004', '005', '006', '007' ],\n    'AIRCRAFT_OBS' => [ 0, 1, 1, 1, 1, 1, 1, 1],\n    'BUOY_OBS'     => [ 1, 0, 1, 1, 1, 1, 1, 1],\n    'AMSUA_OBS'    => [ 1, 1, 0, 1, 1, 1, 1, 1],\n    'AMSUB_OBS'    => [ 1, 1, 1, 0, 1, 1, 1, 1],\n    'POL_OBS'      => [ 1, 1, 1, 1, 0, 1, 1, 1],\n    'HRW_OBS'      => [ 1, 1, 1, 1, 1, 0, 1, 1],\n    'TEMP_OBS'     => [ 1, 1, 1, 1, 1, 1, 0, 1],\n    'IASI_OBS'     => [ 1, 1, 1, 1, 1, 1, 1, 0],","category":"page"},{"location":"DataAssimilation/MTEN/#","page":"MTEN","title":"MTEN","text":"In this particular example, we are interested in the impact of aircraft, Buoy, amsu-a, amsu-b/mhs, polar winds, high-resolution geowinds, radiosonde, and iasi observations. This setting is activated in config.exp with the following choice:","category":"page"},{"location":"DataAssimilation/MTEN/#","page":"MTEN","title":"MTEN","text":"export  REFEXP DOMTEN\nexport SYNOP_OBS=1             # All synop\nexport AIRCRAFT_OBS=1          # AMDAR, AIREP, ACARS\nexport BUOY_OBS=1              # Buoy\nexport POL_OBS=1               # Satob polar winds\nexport GEO_OBS=0               # Satob geo winds\nexport HRW_OBS=1               # Satob HRWind\nexport TEMP_OBS=1              # TEMP, TEMPSHIP\nexport PILOT_OBS=1             # Pilot, Europrofiler\nexport SEVIRI_OBS=0            # Seviri radiances\nexport AMSUA_OBS=1             # AMSU-A\nexport AMSUB_OBS=1             # AMSU-B, MHS\nexport IASI_OBS=1              # IASI\nexport PAOB_OBS=0              # PAOB not defined everywhere\nexport SCATT_OBS=0             # Scatterometer data not defined everywhere\nexport LIMB_OBS=0              # LIMB observations, GPS Radio Occultations\nexport RADAR_OBS=0             # Radar\nexport GNSS_OBS=0              # GNSS","category":"page"},{"location":"DataAssimilation/MTEN/#","page":"MTEN","title":"MTEN","text":"Where REFEXP is the reference experiment (see below), and DOMTEN (yes,no) is activate the MTEN choice when fetching the First-guess and the VarBC files for the MTEN computation, as follows: in /scr/Fetch_assim_data:","category":"page"},{"location":"DataAssimilation/MTEN/#","page":"MTEN","title":"MTEN","text":"if [ ${DOMTEN} = \"yes\" ]; then\n  HM_REFEXP=/sbt/harmonie/$REFEXP\n  adir=${ECFSLOC}:${HM_REFEXP}/$YY/$MM/$DD/$HH\nelse\n  adir=$( ArchDir $HM_EXP $YY $MM $DD $HH )\nfi","category":"page"},{"location":"DataAssimilation/MTEN/#","page":"MTEN","title":"MTEN","text":"in scr/FirstGuess (be careful this happens twice in the script)","category":"page"},{"location":"DataAssimilation/MTEN/#","page":"MTEN","title":"MTEN","text":"if [ ${DOMTEN} = \"yes\" ]; then\n  HM_REFEXP=/sbt/harmonie/$REFEXP\n  adir=${ECFSLOC}:${HM_REFEXP}/$FGYY/$FGMM/$FGDD/$FGHH\nelse\n  adir=$( ArchDir $HM_EXP $FGYY $FGMM $FGDD $FGHH )\nfi","category":"page"},{"location":"DataAssimilation/MTEN/#","page":"MTEN","title":"MTEN","text":"The MTEN can be also computed using a deterministic system. In this case, you need to take care of the First-guess and the VarBC files, which should come from the reference experiment. You need to carefully set the choice of the observations to be tested in scr/include.ass. In this case, you need to adapt the above Fetch_assim_data and FirstGuess scripts accordingly.","category":"page"},{"location":"DataAssimilation/MTEN/#","page":"MTEN","title":"MTEN","text":"The MTEN diagnostic, similarly to DFS, is case sensitive, so it's better to male the computation with times and dates enough distant (by 5 days or more).","category":"page"},{"location":"DataAssimilation/MTEN/#","page":"MTEN","title":"MTEN","text":"The MTEN can be computed the example below:","category":"page"},{"location":"DataAssimilation/MTEN/#","page":"MTEN","title":"MTEN","text":"  for EXP in EXP1 EXP2;\n    for RANGE in 06 12 18 24 30 36 42 48;\n    do\n\n       YY=`echo $DTG | cut -c 1-4`\n       mm=`echo $DTG | cut -c 5-6`\n       dd=`echo $DTG | cut -c 7-8`\n       hh=`echo $DTG | cut -c 9-10`\n       # -- Get the FA files\n       # ===================\n       ecp ec:/$USER/harmonie/$REFEXP/$YY/$mm/$dd/$hh/ICMSHHARM+00$RANGE ./FAREF$RANGE\n       ecp ec:/$USER/harmonie/${EXP}/$YY/$mm/$dd/$hh/ICMSHHARM+00$RANGE ./${EXP}$RANGE\n       $MTEN_BIN/MTEN ./FAREF$RANGE ./${EXP}$RANGE\n\n    done\n  done\n","category":"page"},{"location":"DataAssimilation/MTEN/#","page":"MTEN","title":"MTEN","text":"See Storto & Randriamampianina, 2010 for more details.","category":"page"},{"location":"DataAssimilation/MTEN/#","page":"MTEN","title":"MTEN","text":"The harmonie-40h1_DA branch can be used to calculate MTEN values for selected (40h1.2/trunk) forecasts by using the ensemble functionality to carry multiple observation withdrawal experiments. Follow these instructions:","category":"page"},{"location":"DataAssimilation/MTEN/#","page":"MTEN","title":"MTEN","text":"Check out the DA branch:\nmkdir -p $SCRATCH/harmonie_releases/branches\ncd $SCRATCH/harmonie_releases/branches\nsvn co https://svn.hirlam.org/branches/harmonie-40h1_DA\nSet up your (MTEN) experiment:\nmkdir -p $HOME/hm_home/mtenEXP\ncd $HOME/hm_home/mtenEXP\n$SCRATCH/harmonie_releases/branches/harmonie-40h1_DA/config-sh/Harmonie setup -r $SCRATCH/harmonie_releases/branches/harmonie-40h1_DA\nYou will need to edit the ecf/config_exp.h  file and msms/harmonie.pm file to produce the required observation withdrawal experiments.","category":"page"},{"location":"DataAssimilation/MTEN/#","page":"MTEN","title":"MTEN","text":"... More to follow ...","category":"page"},{"location":"DataAssimilation/ObservationOperators/#Observation-operators-1","page":"HOP_DRIVER","title":"Observation operators","text":"","category":"section"},{"location":"DataAssimilation/ObservationOperators/#","page":"HOP_DRIVER","title":"HOP_DRIVER","text":"This documentation summarises the observation operator in HARMONIE and the use of the HOP_DRIVER tool. The test harness, HOP_DRIVER, calls the observation operator and generates FG departures without calling any model code or initialising any model modules. Firstly, the IFS is used to dump a single-observation gom_plus to file from the 1st trajectory of an experiment. Dumping multiple observations would require a more complex and full-featured dump (good file format, multi-process parallel). For code refactoring HOP_DRIVER can be used to test changes to the observation operator of a particular observation type.","category":"page"},{"location":"DataAssimilation/ObservationOperators/#HARMONIE-and-HOP_DRIVER-1","page":"HOP_DRIVER","title":"HARMONIE and HOP_DRIVER","text":"","category":"section"},{"location":"DataAssimilation/ObservationOperators/#","page":"HOP_DRIVER","title":"HOP_DRIVER","text":"The HOP_DRIVER program was first added to CY42R2 code. The tool was initially implemented to test refactoring of the IFS observation operator code src/arpifs/op_obs/hop.F90. At the moment the refactor branch (branches/refactor/harmonie) is the only HARMONIE code set that includes HOP_DRIVER. Instructions on how to prepare the code and run HOP_DRIVER using HARMONIE are outlined below.  Presentation made at [wiki:HirlamMeetings/ModelMeetings/ObOpWorkshop OOPS Observation Operator Workshop] may provide some useful background information.","category":"page"},{"location":"DataAssimilation/ObservationOperators/#Comments-on-the-branch-1","page":"HOP_DRIVER","title":"Comments on the branch","text":"","category":"section"},{"location":"DataAssimilation/ObservationOperators/#","page":"HOP_DRIVER","title":"HOP_DRIVER","text":"Code changes were required in order to compile cy42r2bf.04 + mods (provided by MF/ECMWF) in the HARMONIE system: [14312], [14325], [14326], [14330], [14331], [14332], [14333], [14334].\nChanges were made to makeup in order to compile HOP_DRIVER correctly: [14310], [14327], [14328], [14329], [14335], [14362], [14382], [14392].\nIncluded in [14362] is a change to ODBSQLFLAGS which is set to \"ODBSQLFLAGS=-O3 -C -UCANARI -DECMWF ODBEXTRAFLAGS\" in order to use ECMWF flavoured ODB used by HOP_DRIVER\nOn cca GNU compilers 4.9 are not fully supported, ie I had to build GRIB-API and NetCDF locally using gcc/gfortran 4.9 on cca\nAn environment variable, HOPDIR, is used to define the location of necessary input data for HOP_DRIVER\nAn environment variable, HOPCOMPILER, is used by the HOP_driver script to define the compiler used. This is used to compare results.","category":"page"},{"location":"DataAssimilation/ObservationOperators/#Running-on-ecgb/cca-1","page":"HOP_DRIVER","title":"Running on ecgb/cca","text":"","category":"section"},{"location":"DataAssimilation/ObservationOperators/#","page":"HOP_DRIVER","title":"HOP_DRIVER","text":"cd $SCRATCH\nmkdir -p harmonie_releases/branches/refactor\ncd harmonie_releases/branches/refactor\nsvn co https://svn.hirlam.org/branches/refactor/harmonie-42R2\ncd $HOME\nmkdir -p hm_home/rfexp\ncd hm_home/rfexp\n$SCRATCH/harmonie_releases/branches/refactor/harmonie-42R2/config-sh/Harmonie setup -r $SCRATCH/harmonie_releases/branches/refactor/harmonie-42R2\n$SCRATCH/harmonie_releases/branches/refactor/harmonie-42R2/config-sh/Harmonie hop_driver","category":"page"},{"location":"DataAssimilation/ObservationOperators/#Running-on-local-platforms-1","page":"HOP_DRIVER","title":"Running on local platforms","text":"","category":"section"},{"location":"DataAssimilation/ObservationOperators/#","page":"HOP_DRIVER","title":"HOP_DRIVER","text":"So far, only METIE.LinuxRH7gnu, which uses gfortran 4.9 and openmpi, has been tested. Input data for the amsua test case is available on ECFS at ECMWF: ec:/dui/hopdata.tar.gz","category":"page"},{"location":"DataAssimilation/ObservationOperators/#","page":"HOP_DRIVER","title":"HOP_DRIVER","text":"cd $HOME\nmkdir -p harmonie_releases/branches/refactor\ncd harmonie_releases/branches/refactor\nsvn co https://svn.hirlam.org/branches/refactor/harmonie-42R2\ncd $HOME\nmkdir -p hm_home/rfexp\ncd hm_home/rfexp\n$HOME/harmonie_releases/branches/refactor/harmonie-42R2/config-sh/Harmonie setup -h METIE.LinuxRH7gnu -r $HOME/harmonie_releases/branches/refactor/harmonie-42R2\n$HOME/harmonie_releases/branches/refactor/harmonie-42R2/config-sh/Harmonie hop_driver","category":"page"},{"location":"DataAssimilation/ObservationOperators/#HOPOBS:-amsua-1","page":"HOP_DRIVER","title":"HOPOBS: amsua","text":"","category":"section"},{"location":"DataAssimilation/ObservationOperators/#","page":"HOP_DRIVER","title":"HOP_DRIVER","text":"Currently there is only one observation type, AMSU-A (HOPOBS=amsua), available for testing with HOPDRIVER. Alan Geer (ECMWF) has already carried out the refactoring of the HOP code related to AMSU-A observations. A single observation is provided in the ECMA and is used to test the refactoring of the HOP code. To carry out the testing of the amsua refactoring HOPOBS should be set to amsua in `ecf/configexp.h`.","category":"page"},{"location":"DataAssimilation/ObservationOperators/#","page":"HOP_DRIVER","title":"HOP_DRIVER","text":"|reportype@hdr|obstype@hdr|sensor@hdr|statid@hdr|stalt@hdr|date@hdr|time@hdr|degrees(lat)|degrees(lon)|reportstatus@hdr|datumstatus@body|obsvalue@body|varno@body|vertco_type@body| | –- | –- | –- | –- | –- | –- | –- | –- | –- | –- | –- | –- | –- | –- |  | 1007          | 7           | 3          | '        4' | 832800    | !20140131 | 215914   | -29.5906     | 0.3113       | 1                 | 12                | 173.28        | 119        | 3                |  | 1007          | 7           | 3          | '        4' | 832800    | !20140131 | 215914   | -29.5906     | 0.3113       | 1                 | 12                | 158.86        | 119        | 3                |  | 1007          | 7           | 3          | '        4' | 832800    | !20140131 | 215914   | -29.5906     | 0.3113       | 1                 | 3                 | 227.40        | 119        | 3                |  | 1007          | 7           | 3          | '        4' | 832800    | !20140131 | 215914   | -29.5906     | 0.3113       | 1                 | 3                 | 260.82        | 119        | 3                |  | 1007          | 7           | 3          | '        4' | 832800    | !20140131 | 215914   | -29.5906     | 0.3113       | 1                 | 1                 | 256.90        | 119        | 3                |  | 1007          | 7           | 3          | '        4' | 832800    | !20140131 | 215914   | -29.5906     | 0.3113       | 1                 | 1                 | 239.60        | 119        | 3                |  | 1007          | 7           | 3          | '        4' | 832800    | !20140131 | 215914   | -29.5906     | 0.3113       | 1                 | 12                | NULL          | 119        | 3                |  | 1007          | 7           | 3          | '        4' | 832800    | !20140131 | 215914   | -29.5906     | 0.3113       | 1                 | 3                 | 217.69        | 119        | 3                |  | 1007          | 7           | 3          | '        4' | 832800    | !20140131 | 215914   | -29.5906     | 0.3113       | 1                 | 1                 | 209.39        | 119        | 3                |  | 1007          | 7           | 3          | '        4' | 832800    | !20140131 | 215914   | -29.5906     | 0.3113       | 1                 | 1                 | 214.05        | 119        | 3                |  | 1007          | 7           | 3          | '        4' | 832800    | !20140131 | 215914   | -29.5906     | 0.3113       | 1                 | 1                 | 223.02        | 119        | 3                |  | 1007          | 7           | 3          | '        4' | 832800    | !20140131 | 215914   | -29.5906     | 0.3113       | 1                 | 1                 | 234.42        | 119        | 3                |  | 1007          | 7           | 3          | '        4' | 832800    | !20140131 | 215914   | -29.5906     | 0.3113       | 1                 | 1                 | 245.14        | 119        | 3                |  | 1007          | 7           | 3          | '        4' | 832800    | !20140131 | 215914   | -29.5906     | 0.3113       | 1                 | 1                 | 257.18        | 119        | 3                |  | 1007          | 7           | 3          | '        4' | 832800    | !20140131 | 215914   | -29.5906     | 0.3113       | 1                 | 12                | 227.91        | 119        | 3                |","category":"page"},{"location":"DataAssimilation/ObservationOperators/#HOP_DRIVER-1","page":"HOP_DRIVER","title":"HOP_DRIVER","text":"","category":"section"},{"location":"DataAssimilation/ObservationOperators/#Using-HOP_DRIVER-1","page":"HOP_DRIVER","title":"Using HOP_DRIVER","text":"","category":"section"},{"location":"DataAssimilation/ObservationOperators/#","page":"HOP_DRIVER","title":"HOP_DRIVER","text":"With LHOP_RESULTS=.TRUE. HOP_DRIVER will write results to a file called hop_results${MYPROC} for comparison between online and offline results. (The results file is opened by src/arpifs/var/taskob.F90. HOP_DRIVER results are written to hop_results${MYPROC} in src/arpifs/op_obs/hop.F90:","category":"page"},{"location":"DataAssimilation/ObservationOperators/#","page":"HOP_DRIVER","title":"HOP_DRIVER","text":" :\n :\nIF(LHOP_RESULTS) THEN\n!$OMP CRITICAL\n  ! Output for comparison between online and offline results:\n  WRITE(CFILENAME,'(\"hop_results\",I4.4)') MYPROC\n  OPEN(NEWUNIT=IU,FILE=CFILENAME,POSITION='APPEND',ACTION='WRITE',FORM='FORMATTED')\n  DO JOBS = 1,KDLEN\n    DO JBODY=1,IMXBDY\n      IF (JBODY>ICMBDY(JOBS)) CYCLE\n      IBODY = ROBODY%MLNKH2B(JOBS)+(JBODY-1)\n      WRITE(IU,'(6I8,2F30.14)') MYPROC, KSET, JOBS, NINT(ROBHDR%DATA(JOBS,ROBHDR%SEQNO_AT_HDR)),&\n        & NINT(ROBODY%DATA(IBODY,ROBODY%VERTCO_REFERENCE_1_AT_BODY)), &\n        & NINT(ROBODY%DATA(IBODY,ROBODY%VARNO_AT_BODY)), ZHOFX(JOBS,JBODY), ZXPPB(JOBS,JBODY)\n\n    ENDDO\n  ENDDO\n  CLOSE(IU)\n!$OMP END CRITICAL\nENDIF\n :\n :","category":"page"},{"location":"DataAssimilation/ObservationOperators/#","page":"HOP_DRIVER","title":"HOP_DRIVER","text":"The HOPdriver script (based a script provided by MF) sorts the contents of the `hopresults0001` file for comparison with some results made available by ECMWF/MF:","category":"page"},{"location":"DataAssimilation/ObservationOperators/#","page":"HOP_DRIVER","title":"HOP_DRIVER","text":" :\n :\n#\n# Check HOP_DRIVER results (available for gfotran and intel)\n#\nln -s $HOPDIR/${HOPOBS}/results.$HOPCOMPILER .\ncat hop_results* | sort -k1,1n -k2,2n -k3,3n -k5,5n -k6,6n > results.driver\necho\ncmp -s results.$HOPCOMPILER results.driver\nif [ $? -eq 0] ; then\n  echo \"RESULTS ARE STRICTLY IDENTICAL TO THE REFERENCE FOR HOPCOMPILER=$HOPCOMPILER :-)\"\nelse\n  echo Compare exactly against the results dumped from hop:\n  echo \"xxdiff results.$HOPCOMPILER results.driver &\"\n  diff results.$HOPCOMPILER results.driver\n  exit 1\nfi\n :\n :","category":"page"},{"location":"DataAssimilation/ObservationOperators/#","page":"HOP_DRIVER","title":"HOP_DRIVER","text":"On cca you will find useful output from HOPDRIVER in cca:TEMP/hmhome/rfexp/archive/HOPDRIVEROUT:","category":"page"},{"location":"DataAssimilation/ObservationOperators/#","page":"HOP_DRIVER","title":"HOP_DRIVER","text":"fort.4\nNODE.001_01\nhop_results0001\nresults.gfortran\nresults.driver","category":"page"},{"location":"DataAssimilation/ObservationOperators/#The-code-1","page":"HOP_DRIVER","title":"The code","text":"","category":"section"},{"location":"DataAssimilation/ObservationOperators/#","page":"HOP_DRIVER","title":"HOP_DRIVER","text":"HOP_DRIVER is a short program written by Deborah Salmond (ECMWF) to test code changes made to the observation operator. The program src/arpifs/programs/hop_driver.F90 is summarised here.","category":"page"},{"location":"DataAssimilation/ObservationOperators/#","page":"HOP_DRIVER","title":"HOP_DRIVER","text":"The program sets up the model geometry and observations:","category":"page"},{"location":"DataAssimilation/ObservationOperators/#","page":"HOP_DRIVER","title":"HOP_DRIVER","text":" :\n :\nCALL GEOMETRY_SET(YRGEOMETRY)\nCALL MODEL_SET(YRMODEL)\n\nCALL IFS_INIT('gc7a')\n\nCALL SUINTDYN\n\nCALL SUGEOMETRY(YRGEOMETRY)        !From GEOMETRY_SETUP\n\nCALL SURIP(YRGEOMETRY%YRDIM)             !From MODEL_CREATE\n\n! Set up Observations, Sets\nCALL SUDIMO(YRGEOMETRY,NULOUT)     !From SU0YOMB\nCALL SUOAF              !From SU0YOMB\nCALL SUALOBS            !From SU0YOMB\nCALL SURINC             !From SU0YOMB\nCALL SETUP_TESTVAR      !From SU0YOMB\nCALL SUOBS(YRGEOMETRY)              !From CNT1\nCALL ECSET(-1,NOBTOT,0) !From OBSV\nCALL SUPHEC(YRGEOMETRY,NULOUT)\n\n! Setup varbc (from cnt1.F90) and read VARBC.cycle\nCALL YVARBC%SETUP_TRAJ\n :\n :","category":"page"},{"location":"DataAssimilation/ObservationOperators/#","page":"HOP_DRIVER","title":"HOP_DRIVER","text":"HOP_DRIVER then loops over the number of observation sets (NSETOT) and reads a GOM PLUS for each observation set. HRETR and HOP are then called:","category":"page"},{"location":"DataAssimilation/ObservationOperators/#","page":"HOP_DRIVER","title":"HOP_DRIVER","text":" :\n :\nDO ISET=1,NSETOT\n  IDLEN   = MLNSET(ISET)\n  IMXBDY = MAX(MMXBDY(ISET),1)\n\n  ALLOCATE(ZHOFX(IDLEN,IMXBDY))\n  ZHOFX=RMDI\n\n  ! READ GOM_PLUS FROM DUMP\n  CALL GOM_PLUS_READ_DUMP(YGP5,ISET)\n\n  IF(IDLEN /= YGP5%NDLEN) THEN\n    CALL ABOR1('Sets are incompatible')\n  ENDIF\n\n  :\n  :\n  :\n\n  CALL HRETR(YRGEOMETRY%YRDIMV,IDLEN,IMXBDY,ISET,1,YGP5,YVARBC)\n\n  CALL HOP(YRGEOMETRY%YRDIMV,YGP5,YVARBC,IDLEN,IMXBDY,ISET,1,LDOOPS=.TRUE.,PHOFX=ZHOFX)\n\n  !write(0,*)'ZHOFX',ZHOFX\n  DEALLOCATE(ZHOFX)\n\n  CALL GOM_PLUS_DESTROY(YGP5)\n\nENDDO\n\n :\n :","category":"page"},{"location":"QuickStart/ECMWF/TheHarmonieScript/#The-Harmonie-Script-1","page":"The Harmonie Script","title":"The Harmonie Script","text":"","category":"section"},{"location":"DataAssimilation/DFS/#DFS-1","page":"DFS","title":"DFS","text":"","category":"section"},{"location":"DataAssimilation/DFS/#","page":"DFS","title":"DFS","text":"The DFS calculation software is still in under development. It is however possible to run the software already now even though it is not fully automated. Start by downloading the tar-file dfscalc.tar","category":"page"},{"location":"DataAssimilation/DFS/#","page":"DFS","title":"DFS","text":"The following instructions is also available in the README file.","category":"page"},{"location":"DataAssimilation/DFS/#","page":"DFS","title":"DFS","text":"To run the DFS calculations and plot the results do the following","category":"page"},{"location":"DataAssimilation/DFS/#","page":"DFS","title":"DFS","text":"Edit the include.paths script to set dates and paths to your experiment and dfs directory\nRun prep_dfs in batch mode. This script generates two sets of ccma files, one with perturbed observations and one original unperturbed. \nBefore running the minimisation for the disturbed observations the namelist of your experiment must be copied to a file called \"namelminim\" in the dfs script dir. In one of your HMDate-files search for \"Start of log: fort.4\" and copy everything between the hash lines \"#############################\" into namel_minim.\nRun RunMinim in batch mode. This will generate new an-fg statistics for the perturbed observations.\nBefore running extract you need to create a compiled MANDALAY. This is easiest done by doing the following:","category":"page"},{"location":"DataAssimilation/DFS/#","page":"DFS","title":"DFS","text":"Set up a new experiment Check out src/obd/ddl/mandalay.sql Replace this file by the mandalay.sql in dfs_scr (included in this tar-file) Start your experiment and let it run until the compilation is complete Copy the created MANDALAY to dfs_scr/bin (or point to it in extract_dfs)","category":"page"},{"location":"DataAssimilation/DFS/#","page":"DFS","title":"DFS","text":"It is also necessary to compile dfscomp.F90 and dfstot.F90 e.g:","category":"page"},{"location":"DataAssimilation/DFS/#","page":"DFS","title":"DFS","text":"gfortran -o bin/dfscomp.x dfscomp.F90\ngfortran -o bin/dfstot.x dfstot.F90","category":"page"},{"location":"DataAssimilation/DFS/#","page":"DFS","title":"DFS","text":"Now run extract_dfs in batch mode. This generates the file $STARTDIR/OUTPUT/dsf.tot (STARTDIR in specified in include.paths) that contains the DFS statistics for the period. This can be plotted e.g. with the included R-script.\nPlot the resuts with dfs_plot.R. Place dfs.tot and dfs_plot.R in the same directory and type: Rscript dfs_plot.R This generates the file dfs_tot.eps in the same directory.","category":"page"},{"location":"DomainDefinition/ModelDomain/#Model-Domain-1","page":"Model Domain","title":"Model Domain","text":"","category":"section"},{"location":"#Harmonie-System-Documentation-1","page":"Home","title":"Harmonie System Documentation","text":"","category":"section"},{"location":"QuickStart/ECMWF/ECMWF_teleport/#Teleport-1","page":"Teleport","title":"Teleport","text":"","category":"section"},{"location":"DataAssimilation/Screening/#","page":"Screening","title":"Screening","text":"EditURL=\"https://hirlam.org/trac//wiki//Screening?action=edit\"","category":"page"},{"location":"DataAssimilation/Screening/#Screening-1","page":"Screening","title":"Screening","text":"","category":"section"},{"location":"DataAssimilation/Screening/#Introduction-1","page":"Screening","title":"Introduction","text":"","category":"section"},{"location":"DataAssimilation/Screening/#","page":"Screening","title":"Screening","text":"Screening (configuration 002 of ARPEGE/IFS model) carries out quality control of observations. ","category":"page"},{"location":"DataAssimilation/Screening/#","page":"Screening","title":"Screening","text":"A useful presentation (Martin Ridal) from the \"Hirlam-B Training Week on HARMONIE system\" training course is available here: MR_screenandminim.pdf. Most of the information on this page is based on his presentation.","category":"page"},{"location":"DataAssimilation/Screening/#Inputs-1","page":"Screening","title":"Inputs","text":"","category":"section"},{"location":"DataAssimilation/Screening/#","page":"Screening","title":"Screening","text":"First guess (the same file with 5  different names):\nICMSHMIN1INIT\nICMSHMIN1IMIN\nICMRFMIN10000\nELSCFMIN1ALBC000\nELSCFMIN1ALBC\nInput/output ODB directory structure\n${d_DB}/ECMA\n${d_DB}/ECMA.${base1}\nConstants and statistics (MAY NEED TO BE UPDATED)\ncorrel.dat\nsigmab.dat\nrszcoef_fmt\nerrgrib\nrt_coef_atovs_newpred_ieee.dat\nbcor_noaa.dat\nchanspec_noaa.dat\nrmtberr_noaa.dat\ncstlim_noaa.dat\nNamelist: See %screening in nam/harmonie_namelists.pm","category":"page"},{"location":"DataAssimilation/Screening/#Screening-tasks-1","page":"Screening","title":"Screening tasks","text":"","category":"section"},{"location":"DataAssimilation/Screening/#","page":"Screening","title":"Screening","text":"(Based on Martin Ridal's presentation).","category":"page"},{"location":"DataAssimilation/Screening/#","page":"Screening","title":"Screening","text":"Preliminary check of observations\nCheck of completeness of the reports\nCheck if station altitude is present\nCheck of the reporting practice for SYNOP & TEMP mass observations \nBlacklisting: A blacklist is applied to discard observations of known poor quality and/or that cannot be properly handled by the data assimilation. A selection of variables for assimilation is done using the data selection part of the blacklist file and the information hard-coded in Arpege/Aladin (orographic rejection limit, land-sea rejection...). Decisions based on the blacklist are feedback to the CMA. Blacklisting is defined in src/bla/mf_blacklist.b \nBackground quality control: flags are assigned to observations – 1 =>  probably correct, 2 => probably incorrect, 3 => incorrect.\nVertical consistency of multilevel report:\nThe duplicated levels, in multi-level reports, are removed from the reports\nIf 4 consecutive layers are found to be of suspicious quality then these layers are rejected\nRemoval of duplicated reports\nIn case of co-located airep reports of the same observation types (time, position), some or all of the content of one of the reports is rejected\nRedundancy check\nperformed for active reports that are co-located and originate from the same station\nLAND SYNOP: the report closest to the centre of the screening time window with most active data is retained\nSHIP SYNOP: redundant if the moving platforms are within a circle of 1^o^ radius src/arpifs/obs_preproc/sufglim.F90 RSHIDIS = 111000._JPRB\nTEMP and PILOT: same stations are considered at the same time in the redundancy check\nA SYNOP mass observation is redundant if there are any TEMP geopotential height observations (made in the same time and the same station) that are no more than 50hPa above the SYNOP mass observation\nThinning: High resolution data needs to be reduced to reduce correlated errors and reduce the amount of data","category":"page"},{"location":"DataAssimilation/Screening/#Output-1","page":"Screening","title":"Output","text":"","category":"section"},{"location":"DataAssimilation/Screening/#","page":"Screening","title":"Screening","text":"The quality control information will be put into the input ECMA ODB(s) and a newly created CCMA to used by the 3DVAR minimization.","category":"page"},{"location":"DataAssimilation/Screening/#","page":"Screening","title":"Screening","text":"A valuable summary about screening decisions can be found in HM_Date_YYYYMMDDHH.html:","category":"page"},{"location":"DataAssimilation/Screening/#","page":"Screening","title":"Screening","text":"Look for “SCREENING STATISTICS” to get:\nSTATUS summary\nEVENT summary\nNumber of variables, departures and missing departures\nDiagnostic JO-table\nCCMA ODB and updated ECMA ODB","category":"page"},{"location":"DataAssimilation/Screening/#","page":"Screening","title":"Screening","text":"Screening Events listed under \"EVENT SUMMARY OF REPORTS:\"","category":"page"},{"location":"DataAssimilation/Screening/#","page":"Screening","title":"Screening","text":" Description\n1 NO DATA IN THE REPORT\n2 ALL DATA REJECTED\n3 BAD REPORTING PRACTICE\n4 REJECTED DUE TO RDB FLAG\n5 ACTIVATED DUE TO RDB FLAG\n6 ACTIVATED BY WHITELIST\n7 HORIZONTAL POSITION OUT OF RANGE\n8 VERTICAL POSITION OUT OF RANGE\n9 TIME OUT OF RANGE\n10 REDUNDANT REPORT\n11 REPORT OVER LAND\n12 REPORT OVER SEA\n13 MISSING STATION ALTITUDE\n14 MODEL SUR. TOO FAR FROM STAT. ALT.\n15 REPORT REJECTED THROUGH THE NAMELIST\n16 FAILED QUALITY CONTROL","category":"page"},{"location":"Overview/Binaries/#Harmonie-binaries-1","page":"Harmonie binaries","title":"Harmonie binaries","text":"","category":"section"},{"location":"Overview/FileFormats/#File-Formats-in-Harmonie-1","page":"File Formats in Harmonie","title":"File Formats in Harmonie","text":"","category":"section"},{"location":"DataAssimilation/SingleObs/#Single-observation-impact-experiment-1","page":"Single Obs","title":"Single observation impact experiment","text":"","category":"section"},{"location":"DataAssimilation/SingleObs/#General-1","page":"Single Obs","title":"General","text":"","category":"section"},{"location":"DataAssimilation/SingleObs/#","page":"Single Obs","title":"Single Obs","text":"The results of single observation impact experiment provide useful information of the observation operator and error statistics. Among others, it is a useful tool for diagnosing background error statistics. The procedure described below is the recommended one and it has been tested on HARMONIE harmonie-43h21, with some modifications. The example below with the new system is for a AROME domain covering Denmark (DOMAIN=DKCOEXP). Three TEMP observation types have been implemented in scr/Create_singe_obs as deviations to the background:","category":"page"},{"location":"DataAssimilation/SingleObs/#","page":"Single Obs","title":"Single Obs","text":"A temperature increase of 1K\nA wind speed increase of 1 m/s\nA specific humidity reduction to 90% of the background.","category":"page"},{"location":"DataAssimilation/SingleObs/#Illustrative-example-of-single-observation-impact-experiment-on-ecgb/cca-1","page":"Single Obs","title":"Illustrative example of single observation impact experiment on ecgb/cca","text":"","category":"section"},{"location":"DataAssimilation/SingleObs/#","page":"Single Obs","title":"Single Obs","text":"create hm_home/sinob directory. Then cd hm_home/sinob.\ncreate experiment by typing ~hlam/Harmonie setup -r ~hlam/harmonie_release/tags/harmonie-43h2.1.\nEdit ecf/config_exp.h  as follows:\nset ANASURF=none,\nset SINGLEOBS=yes,\nset LSMIXBC=no,\nEdit scr/include.ass  as follows:\nset USEOBSOUL=1,\nCopy a correction of the file Createsingleobs by typing \ncp ~hlam/harmone_release/git/develop/scr/Create_single_obs scr/Create_single_obs\nCopy a correction for gl\nmkdir -p util/gl/mod/ ; cp ~hlam/harmone_release/git/develop/util/gl/mod/module_rotations.f90 util/gl/mod\nLaunch the single observation impact experiment by standing in hm_home/sinob typing:\n~hlam/Harmonie start DTG=2012061003 DTGEND=2012061006\nThe resulting analysis file be found as cca:$SCRATCH/hm_home/sinob/archive/2012/06/10/06/MXMIN1999+0000. You can now diagnose the 3D-VAR analysis increments of the sinob-experiment taking the difference between the analysis  MXMIN1999+0000 (analysis) and the first guess, cca:$SCRATCH/hm_home/sinob/archive/2012/06/10/03/ICMSHHARM+0003. Plot horizontal and vertical cross-sections of temperature and other variables using your favorite software (EpyGram for example). ","category":"page"},{"location":"DataAssimilation/SingleObs/#","page":"Single Obs","title":"Single Obs","text":"Note that you can change position of observation, observation error, variable to be observed etc. Investigate these options by taking a closer look at the script Createsingleobs.","category":"page"},{"location":"DataAssimilation/SingleObs/#","page":"Single Obs","title":"Single Obs","text":"Read more about radiance single observation experiments here. In ec:/smx/sinob_wiki_ml you will also find OBSOUL_amsua7, a file for generating a satellati radiance amsu a channel 7 single observation impact experiment.","category":"page"},{"location":"DataAssimilation/CHKEVO/#ECHKEVO-1","page":"CHKEVO","title":"ECHKEVO","text":"","category":"section"},{"location":"DataAssimilation/CHKEVO/#Introduction-1","page":"CHKEVO","title":"Introduction","text":"","category":"section"},{"location":"DataAssimilation/CHKEVO/#","page":"CHKEVO","title":"CHKEVO","text":"This page describes how to activate CHKEVO for diagnosing forecast model spin-up of pressure. This diagnostic is available in trunk from r16488. Yann Michel (MF) kindly suggested some of the changes required. The diagnostics are generated as part of a forecast model run up to 3 h or 6 h. A known problem is that the method fails when the first lateral boundary conditions are read by the model. The suggestion is to use BDINT=3 and forecast length 3 h. FULL-POS should also be deactivated in config_exp.h.","category":"page"},{"location":"DataAssimilation/CHKEVO/#Preparations-1","page":"CHKEVO","title":"Preparations","text":"","category":"section"},{"location":"DataAssimilation/CHKEVO/#","page":"CHKEVO","title":"CHKEVO","text":"It is assumed you already have a well defined experiment called your_exp. The following instructions are valid for a 3h diagnostic forecast.","category":"page"},{"location":"DataAssimilation/CHKEVO/#NAMCHK-namelist-1","page":"CHKEVO","title":"NAMCHK namelist","text":"","category":"section"},{"location":"DataAssimilation/CHKEVO/#","page":"CHKEVO","title":"CHKEVO","text":"Enable CHKEVO in the namelist (in the %arome entries):\ncd $HOME/hm_home/your_exp\n~hlam/Harmonie co nam/harmonie_namelists.pm\nEdit NAMCHK:\nNAMCHK=>{\n'LECHKEVO' => '.TRUE.,',\n'LECHKTND' => '.TRUE.,',\n'LECHKPS' => '.TRUE.,',\n},","category":"page"},{"location":"DataAssimilation/CHKEVO/#ecf/config_exp.h-1","page":"CHKEVO","title":"ecf/config_exp.h","text":"","category":"section"},{"location":"DataAssimilation/CHKEVO/#","page":"CHKEVO","title":"CHKEVO","text":"Edit your ecf/config_exp.h  as follows:\nPOSTP=\"none\"                          # Postprocessing by Fullpos (inline|offline|none).\nBDINT=3\nHH_LIST=\"00-21:3\"                     # Which cycles to run, replaces FCINT\nLL_LIST=\"3\"                           # Forecast lengths for the cycles [h], replaces LL, LLMAIN\nAlternatively for a 6 h diagnostic forecast:\nPOSTP=\"none\"                          # Postprocessing by Fullpos (inline|offline|none).\nBDINT=6\nHH_LIST=\"00-18:6\"                     # Which cycles to run, replaces FCINT\nLL_LIST=\"6\"                           # Forecast lengths for the cycles [h], replaces LL, LLMAIN","category":"page"},{"location":"DataAssimilation/CHKEVO/#Results-1","page":"CHKEVO","title":"Results","text":"","category":"section"},{"location":"DataAssimilation/CHKEVO/#","page":"CHKEVO","title":"CHKEVO","text":"After running the forecast with CHKEVO activated the statistics of surface pressure tendencies are written to NODE.001_01 log file. This log file is included in the HM_Date_YYYYMMDDHH.html log file (written to $SCRATCH/hm_home/your_exp/archive/log on ecgate). The results can be obtained by grepping the log file as follows:","category":"page"},{"location":"DataAssimilation/CHKEVO/#","page":"CHKEVO","title":"CHKEVO","text":"grep \"^ CHKEVO : \" HM_Date_2013041118.html | tail -n +2","category":"page"},{"location":"DataAssimilation/CHKEVO/#","page":"CHKEVO","title":"CHKEVO","text":"This gives the RMS and AVG of pressure tendency for each time step. (The first line is removed as the reading of the start file produces zeros):","category":"page"},{"location":"DataAssimilation/CHKEVO/#","page":"CHKEVO","title":"CHKEVO","text":" CHKEVO :   2.5683273661035013       0.42575646791552352     \n CHKEVO :   2.5432078820872874       0.36700119757663685     \n CHKEVO :   1.4402533781888094       0.23533175032737094     \n CHKEVO :   1.3677546254375832       0.22965677860570116     \n CHKEVO :   1.1506125378848564       0.20575065246468008     \n CHKEVO :  0.98597708942270756       0.19299583141063531\n.....","category":"page"},{"location":"DataAssimilation/CHKEVO/#","page":"CHKEVO","title":"CHKEVO","text":"The first column contains the string CHKEVO :\nSecond column contains the RMS of dps/dt averaged over the domain.\nSecond column contains the AVG of dps/dt averaged over the domain.","category":"page"},{"location":"DataAssimilation/CHKEVO/#","page":"CHKEVO","title":"CHKEVO","text":"The RMS of dps/dt alone can be extracted with:","category":"page"},{"location":"DataAssimilation/CHKEVO/#","page":"CHKEVO","title":"CHKEVO","text":"grep \"^ CHKEVO : \" HM_Date_2013041118.html | tail -n +2 | awk '{print $3}'","category":"page"},{"location":"DataAssimilation/CHKEVO/#Plotting-1","page":"CHKEVO","title":"Plotting","text":"","category":"section"},{"location":"DataAssimilation/CHKEVO/#","page":"CHKEVO","title":"CHKEVO","text":"Some instructions here ...","category":"page"},{"location":"DataAssimilation/CHKEVO/#","page":"CHKEVO","title":"CHKEVO","text":"grep \"^ CHKEVO : \" HM_Date_2013041118.html | tail -n +2 > dps.dat\nwget https://hirlam.org/trac/raw-attachment/wiki/HarmonieSystemDocumentation/CHKEVO/plotCHKEVO.py\nchmod 755 ./plotCHKEVO.py\n./plotCHKEVO.py -h\n./plotCHKEVO.py -i ps.dat  && eog plot.png\n# OR\n./plotCHKEVO.py -i ps.dat -t 75  && eog plot.png","category":"page"},{"location":"DataAssimilation/CHKEVO/#","page":"CHKEVO","title":"CHKEVO","text":"To get the unit of hPa/3h the time-step is taken into account using the -t option. If, for example, the time-step is 60 s the values in the second column will be multiplied with 60.*3. and then divided by 100.","category":"page"},{"location":"DomainDefinition/VerticalGrid/#Vertical-Grid-1","page":"Vertical Grid","title":"Vertical Grid","text":"","category":"section"},{"location":"System/GitDeveloperDocumentation/#Developing-in-the-Hirlam-GitHub-organization-1","page":"GitHub","title":"Developing in the Hirlam GitHub organization","text":"","category":"section"},{"location":"System/GitDeveloperDocumentation/#Introduction-1","page":"GitHub","title":"Introduction","text":"","category":"section"},{"location":"System/GitDeveloperDocumentation/#","page":"GitHub","title":"GitHub","text":"Since 2018 and CY43 HIRLAM have used git for code revision control and gitolite as the git server on hirlam.org. HIRLAM is now moving to using Github for ''software development and version control''. This page provides information on how to access the GitHub Hirlam organisation and how to commit your developments, specifically Harmonie. As was the case with hirlam.org's gitolite a fork-and-branch workflow will be used to manage developments.","category":"page"},{"location":"System/GitDeveloperDocumentation/#Becoming-a-member-of-Hirlam-1","page":"GitHub","title":"Becoming a member of Hirlam","text":"","category":"section"},{"location":"System/GitDeveloperDocumentation/#","page":"GitHub","title":"GitHub","text":"Create a GitHub account: https://github.com – click on Sign up. Details here\nAdd your public ssh key(s) to the account. Details here\nContact your friendly System-core to be invited to the GitHub Hirlam organisation","category":"page"},{"location":"System/GitDeveloperDocumentation/#Fork-and-branch-1","page":"GitHub","title":"Fork and branch","text":"","category":"section"},{"location":"System/GitDeveloperDocumentation/#","page":"GitHub","title":"GitHub","text":"You can create a user fork of Harmonie by doing the following:","category":"page"},{"location":"System/GitDeveloperDocumentation/#","page":"GitHub","title":"GitHub","text":"Go to https://github.com/Hirlam/Harmonie\nClick on Fork to create a fork of Harmonie for your user (USER)\nClone your fork:","category":"page"},{"location":"System/GitDeveloperDocumentation/#","page":"GitHub","title":"GitHub","text":"$ git clone git@github.com:USER/Harmonie.git $HOME/git_harmonie/USER/Harmonie","category":"page"},{"location":"System/GitDeveloperDocumentation/#","page":"GitHub","title":"GitHub","text":"Further information is available here: https://docs.github.com/en/github/getting-started-with-github/fork-a-repo ","category":"page"},{"location":"System/GitDeveloperDocumentation/#Keep-your-fork-synced-1","page":"GitHub","title":"Keep your fork synced","text":"","category":"section"},{"location":"System/GitDeveloperDocumentation/#","page":"GitHub","title":"GitHub","text":"In a terminal change directory to the clone of you fork:","category":"page"},{"location":"System/GitDeveloperDocumentation/#","page":"GitHub","title":"GitHub","text":"$ cd $HOME/git_harmonie/USER/Harmonie","category":"page"},{"location":"System/GitDeveloperDocumentation/#","page":"GitHub","title":"GitHub","text":"List the current configured remote repository for your fork.","category":"page"},{"location":"System/GitDeveloperDocumentation/#","page":"GitHub","title":"GitHub","text":"$ git remote -v\norigin\tgit@github.com:USER/Harmonie.git (fetch)\norigin\tgit@github.com:USER/Harmonie.git (push)","category":"page"},{"location":"System/GitDeveloperDocumentation/#","page":"GitHub","title":"GitHub","text":"Specify a new remote upstream repository that will be synced with the fork.","category":"page"},{"location":"System/GitDeveloperDocumentation/#","page":"GitHub","title":"GitHub","text":"$ git remote add upstream git@github.com:Hirlam/Harmonie.git","category":"page"},{"location":"System/GitDeveloperDocumentation/#","page":"GitHub","title":"GitHub","text":"Verify the new upstream repository you've specified for your fork.","category":"page"},{"location":"System/GitDeveloperDocumentation/#","page":"GitHub","title":"GitHub","text":"$ git remote -v\norigin\tgit@github.com:ewhelan/Harmonie.git (fetch)\norigin\tgit@github.com:ewhelan/Harmonie.git (push)\nupstream\tgit@github.com:Hirlam/Harmonie.git (fetch)\nupstream\tgit@github.com:Hirlam/Harmonie.git (push)","category":"page"},{"location":"System/GitDeveloperDocumentation/#","page":"GitHub","title":"GitHub","text":"Update develop in your fork.","category":"page"},{"location":"System/GitDeveloperDocumentation/#","page":"GitHub","title":"GitHub","text":"$ git checkout develop\n$ git pull upstream develop\n$ git push origin develop","category":"page"},{"location":"System/GitDeveloperDocumentation/#","page":"GitHub","title":"GitHub","text":"Update pre-CY46h1 in your fork.","category":"page"},{"location":"System/GitDeveloperDocumentation/#","page":"GitHub","title":"GitHub","text":"$ git checkout pre-CY46h1\n$ git pull upstream pre-CY46h1\n$ git push origin pre-CY46h1","category":"page"},{"location":"System/GitDeveloperDocumentation/#","page":"GitHub","title":"GitHub","text":"Further information is available here: https://docs.github.com/en/github/getting-started-with-github/fork-a-repo#keep-your-fork-synced","category":"page"},{"location":"System/GitDeveloperDocumentation/#Contributing-developments-–-develop-1","page":"GitHub","title":"Contributing developments – develop","text":"","category":"section"},{"location":"System/GitDeveloperDocumentation/#","page":"GitHub","title":"GitHub","text":"Contributions for develop should be developed in your Harmonie fork in a development branch (feature/bugfix/...). The following details how you can get your development upstream.","category":"page"},{"location":"System/GitDeveloperDocumentation/#Create-a-feature-branch-1","page":"GitHub","title":"Create a feature branch","text":"","category":"section"},{"location":"System/GitDeveloperDocumentation/#","page":"GitHub","title":"GitHub","text":"$ cd $HOME/git_harmonie/USER/Harmonie\n$ git checkout develop\n$ git checkout -b feature/descriptive_name_for_developments","category":"page"},{"location":"System/GitDeveloperDocumentation/#Keep-up-to-date-with-develop-1","page":"GitHub","title":"Keep up to date with develop","text":"","category":"section"},{"location":"System/GitDeveloperDocumentation/#","page":"GitHub","title":"GitHub","text":"Sync your fork as described above\nMerge develop updates in to your branch","category":"page"},{"location":"System/GitDeveloperDocumentation/#","page":"GitHub","title":"GitHub","text":"$ cd $HOME/git_harmonie/USER/Harmonie\n$ git checkout feature/descriptive_name_for_developments\n$ git merge develop","category":"page"},{"location":"System/GitDeveloperDocumentation/#Creating-a-pull-request-1","page":"GitHub","title":"Creating a pull request","text":"","category":"section"},{"location":"System/GitDeveloperDocumentation/#","page":"GitHub","title":"GitHub","text":"Once you have committed to your feature branch and wanted them included in the upstream repo you should do the following:","category":"page"},{"location":"System/GitDeveloperDocumentation/#","page":"GitHub","title":"GitHub","text":"Push your branch to your fork:","category":"page"},{"location":"System/GitDeveloperDocumentation/#","page":"GitHub","title":"GitHub","text":"$ cd $HOME/git_harmonie/USER/Harmonie\n$ git checkout feature/descriptive_name_for_developments\n$ git push origin feature/descriptive_name_for_developments","category":"page"},{"location":"System/GitDeveloperDocumentation/#","page":"GitHub","title":"GitHub","text":"When you push your branch information on how to create a pull request will be presented:","category":"page"},{"location":"System/GitDeveloperDocumentation/#","page":"GitHub","title":"GitHub","text":"remote: Resolving deltas: 100% (x/x), completed with x local objects.\nremote: \nremote: Create a pull request for 'feature/descriptive_name_for_developments' on GitHub by visiting:\nremote:      https://github.com/USER/Harmonie/pull/new/feature/descriptive_name_for_developments\nremote: ","category":"page"},{"location":"System/GitDeveloperDocumentation/#","page":"GitHub","title":"GitHub","text":"Follow this link","category":"page"},{"location":"System/GitDeveloperDocumentation/#","page":"GitHub","title":"GitHub","text":"request a reviewer\nadd labels to the developemnt (feature/enhancement/...)\nadd comments to help with the review process (Testbed members used/Changes expected if any/...)","category":"page"},{"location":"System/GitDeveloperDocumentation/#","page":"GitHub","title":"GitHub","text":"Once the pull request has been approved by the System-core team it will be merged in to develop","category":"page"},{"location":"System/GitDeveloperDocumentation/#","page":"GitHub","title":"GitHub","text":"Further information is available here: https://docs.github.com/en/github/collaborating-with-issues-and-pull-requests/creating-a-pull-request","category":"page"},{"location":"System/GitDeveloperDocumentation/#Contributing-developments-–-pre-CY46h1-1","page":"GitHub","title":"Contributing developments – pre-CY46h1","text":"","category":"section"},{"location":"System/GitDeveloperDocumentation/#","page":"GitHub","title":"GitHub","text":"Contributions to pre-CY46h1 should be developed in your Harmonie fork in a development branch (feature/bugfix/...). The following details how you can get your development ''upstream''.","category":"page"},{"location":"System/GitDeveloperDocumentation/#Create-a-''feature''-branch-1","page":"GitHub","title":"Create a ''feature'' branch","text":"","category":"section"},{"location":"System/GitDeveloperDocumentation/#","page":"GitHub","title":"GitHub","text":"$ cd $HOME/git_harmonie/USER/Harmonie\n$ git checkout pre-CY46h1\n$ git checkout -b feature/descriptive_name_for_developments","category":"page"},{"location":"System/GitDeveloperDocumentation/#Keep-up-to-date-with-pre-CY46h1-1","page":"GitHub","title":"Keep up to date with pre-CY46h1","text":"","category":"section"},{"location":"System/GitDeveloperDocumentation/#","page":"GitHub","title":"GitHub","text":"Sync your fork as described above\nMerge develop updates in to your branch","category":"page"},{"location":"System/GitDeveloperDocumentation/#","page":"GitHub","title":"GitHub","text":"$ cd $HOME/git_harmonie/USER/Harmonie\n$ git checkout feature/descriptive_name_for_developments\n$ git merge pre-CY46h1","category":"page"},{"location":"System/GitDeveloperDocumentation/#Creating-a-pull-request-2","page":"GitHub","title":"Creating a pull request","text":"","category":"section"},{"location":"System/GitDeveloperDocumentation/#","page":"GitHub","title":"GitHub","text":"Once you have committed to your feature branch and wanted them included in the upstream repo you should do the following:","category":"page"},{"location":"System/GitDeveloperDocumentation/#","page":"GitHub","title":"GitHub","text":"Push your branch to your fork:","category":"page"},{"location":"System/GitDeveloperDocumentation/#","page":"GitHub","title":"GitHub","text":"$ cd $HOME/git_harmonie/USER/Harmonie\n$ git checkout feature/descriptive_name_for_developments\n$ git push origin feature/descriptive_name_for_developments","category":"page"},{"location":"System/GitDeveloperDocumentation/#","page":"GitHub","title":"GitHub","text":"When you push your branch information on how to create a pull request will be presented:","category":"page"},{"location":"System/GitDeveloperDocumentation/#","page":"GitHub","title":"GitHub","text":"remote: Resolving deltas: 100% (x/x), completed with x local objects.\nremote: \nremote: Create a pull request for 'feature/descriptive_name_for_developments' on GitHub by visiting:\nremote:      https://github.com/USER/Harmonie/pull/new/feature/descriptive_name_for_developments\nremote: ","category":"page"},{"location":"System/GitDeveloperDocumentation/#","page":"GitHub","title":"GitHub","text":"Follow this link","category":"page"},{"location":"System/GitDeveloperDocumentation/#","page":"GitHub","title":"GitHub","text":"request a reviewer\nadd labels to the developemnt (feature/enhancement/...)\nadd comments to help with the review process (Testbed members used/Changes expected if any/...)","category":"page"},{"location":"System/GitDeveloperDocumentation/#","page":"GitHub","title":"GitHub","text":"Once the pull request has been approved by the System-core team it will be merged in to develop","category":"page"},{"location":"System/GitDeveloperDocumentation/#","page":"GitHub","title":"GitHub","text":"Further information is available here: https://docs.github.com/en/github/collaborating-with-issues-and-pull-requests/creating-a-pull-request","category":"page"},{"location":"System/GitDeveloperDocumentation/#Moving-my-branches-from-hirlam.org-1","page":"GitHub","title":"Moving my branches from hirlam.org","text":"","category":"section"}]
}
