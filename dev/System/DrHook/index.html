<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>DrHook · Harmonie wiki</title><script async src="https://www.googletagmanager.com/gtag/js?id=UA-221448594-1"></script><script>  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-221448594-1', {'page_path': location.pathname + location.search + location.hash});
</script><script data-outdated-warner src="../../assets/warner.js"></script><link rel="canonical" href="https://hirlam.github.io/HarmonieSystemDocumentation/dev/System/DrHook/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.044/juliamono.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.png" alt="Harmonie wiki logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">Harmonie wiki</a></span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Getting Started</span><ul><li><a class="tocitem" href="../GitDeveloperDocumentation/">GitHub workflow</a></li><li><a class="tocitem" href="../../Overview/da_graph/">Graphical Overview</a></li><li><a class="tocitem" href="../RunningHarmonieOnAtos/">Running on Atos</a></li><li><input class="collapse-toggle" id="menuitem-2-4" type="checkbox"/><label class="tocitem" for="menuitem-2-4"><span class="docs-label">Overview</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../Overview/Content/">Content</a></li><li><a class="tocitem" href="../../Overview/Binaries/">Binaries</a></li><li><a class="tocitem" href="../../Overview/FileFormats/">File Formats</a></li><li><a class="tocitem" href="../../Overview/Source/">Source</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2-5" type="checkbox"/><label class="tocitem" for="menuitem-2-5"><span class="docs-label">Experiment Configuration</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../ExperimentConfiguration/ConfigureYourExperiment/">Experiment</a></li><li><a class="tocitem" href="../../ExperimentConfiguration/Namelists/">Namelist</a></li><li><a class="tocitem" href="../../ExperimentConfiguration/UseofObservation/">Observations</a></li><li><a class="tocitem" href="../../ExperimentConfiguration/PlatformConfiguration/">Platform</a></li><li><a class="tocitem" href="../../ExperimentConfiguration/How_to_use_hires_topography/">HiRes Topography</a></li><li><a class="tocitem" href="../../ExperimentConfiguration/ModelDomain/">Domain</a></li><li><a class="tocitem" href="../../ExperimentConfiguration/VerticalGrid/">Vertical Grid</a></li></ul></li></ul></li><li><span class="tocitem">NWP Components</span><ul><li><input class="collapse-toggle" id="menuitem-3-1" type="checkbox"/><label class="tocitem" for="menuitem-3-1"><span class="docs-label">Observations</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><input class="collapse-toggle" id="menuitem-3-1-1" type="checkbox"/><label class="tocitem" for="menuitem-3-1-1"><span class="docs-label">Preprocessing</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../Observations/ObservationPreprocessing/">Preprocessing</a></li><li><a class="tocitem" href="../../Observations/Oulan/">Oulan</a></li><li><a class="tocitem" href="../../Observations/Bator/">Bator</a></li><li><a class="tocitem" href="../../Observations/Cope/">Cope</a></li><li><a class="tocitem" href="../../Observations/ObservationData/">ObservationData</a></li><li><a class="tocitem" href="../../Observations/Conrad/">Conrad</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-1-2" type="checkbox"/><label class="tocitem" for="menuitem-3-1-2"><span class="docs-label">How to</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../Observations/SYNOP/">SYNOP</a></li><li><a class="tocitem" href="../../Observations/Amv/">AMV</a></li><li><a class="tocitem" href="../../Observations/Iasi/">IASI</a></li><li><a class="tocitem" href="../../Observations/Atovs/">ATOVS</a></li><li><a class="tocitem" href="../../Observations/Scatt/">Scatt</a></li><li><a class="tocitem" href="../../Observations/Ascat/">AScat</a></li><li><a class="tocitem" href="../../Observations/GNSS/">GNSS</a></li><li><a class="tocitem" href="../../Observations/Modes/">Modes</a></li><li><a class="tocitem" href="../../Observations/RadarData/">Radar</a></li></ul></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-2" type="checkbox"/><label class="tocitem" for="menuitem-3-2"><span class="docs-label">Data Assimilation</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><input class="collapse-toggle" id="menuitem-3-2-1" type="checkbox"/><label class="tocitem" for="menuitem-3-2-1"><span class="docs-label">Surface</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../DataAssimilation/Surface/CANARI/">CANARI</a></li><li><a class="tocitem" href="../../DataAssimilation/Surface/CANARI_OI_MAIN/">CANARI OI MAIN</a></li><li><a class="tocitem" href="../../DataAssimilation/Surface/CANARI_EKF_SURFEX/">CANARI EKF SURFEX</a></li><li><a class="tocitem" href="../../DataAssimilation/Surface/SurfaceAnalysis/">Surface Analysis</a></li></ul></li><li><a class="tocitem" href="../../DataAssimilation/Screening/">Screening</a></li><li><a class="tocitem" href="../../DataAssimilation/StructureFunctions/">Structure functions</a></li><li><a class="tocitem" href="../../DataAssimilation/DataAssimilation4DVAR/">4DVAR</a></li><li><a class="tocitem" href="../../DataAssimilation/DigitalFilterInitialization/">Digital Filter Initialization</a></li><li><a class="tocitem" href="../../DataAssimilation/ObservationOperators/">HOP_DRIVER</a></li><li><a class="tocitem" href="../../DataAssimilation/SingleObs/">Single Obs</a></li><li><a class="tocitem" href="../../DataAssimilation/LSMIXandJk/">LSMIX and Jk</a></li><li><a class="tocitem" href="../../DataAssimilation/DFS/">DFS</a></li><li><a class="tocitem" href="../../DataAssimilation/MTEN/">MTEN</a></li><li><a class="tocitem" href="../../DataAssimilation/CHKEVO/">CHKEVO</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-3" type="checkbox"/><label class="tocitem" for="menuitem-3-3"><span class="docs-label">Boundaries</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../Boundaries/BoundaryFilePreparation/">Preparation</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-4" type="checkbox"/><label class="tocitem" for="menuitem-3-4"><span class="docs-label">Forecast Model</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../ForecastModel/Forecast/">Forecast</a></li><li><a class="tocitem" href="../../ForecastModel/Outputlist/">Output List</a></li><li><a class="tocitem" href="../../ForecastModel/HR/">High Res</a></li><li><input class="collapse-toggle" id="menuitem-3-4-4" type="checkbox"/><label class="tocitem" for="menuitem-3-4-4"><span class="docs-label">Single Column Model</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../ForecastModel/SingleColumnModel/MUSC/">MUSC</a></li><li><a class="tocitem" href="../../ForecastModel/SingleColumnModel/Forcing/">Forcing</a></li><li><a class="tocitem" href="../../ForecastModel/SingleColumnModel/MUSC_vars/">MUSC vars</a></li></ul></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-5" type="checkbox"/><label class="tocitem" for="menuitem-3-5"><span class="docs-label">Climate Generation</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../ClimateGeneration/ClimateGeneration/">Climate Generation</a></li><li><a class="tocitem" href="../../ClimateGeneration/DownloadInputData/">Input Data</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-6" type="checkbox"/><label class="tocitem" for="menuitem-3-6"><span class="docs-label">EPS</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../EPS/Howto/">Howto</a></li><li><a class="tocitem" href="../../EPS/System/">System</a></li><li><a class="tocitem" href="../../EPS/BDSTRATEGY/">BDSTRATEGY</a></li><li><a class="tocitem" href="../../EPS/SLAF/">SLAF</a></li><li><a class="tocitem" href="../../EPS/SPP/">SPP</a></li><li><a class="tocitem" href="../../EPS/SPPT/">SPPT</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-7" type="checkbox"/><label class="tocitem" for="menuitem-3-7"><span class="docs-label">Post Processing</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../PostProcessing/Diagnostics/">Diagnostics</a></li><li><a class="tocitem" href="../../PostProcessing/FileConversions/">FileConversions</a></li><li><a class="tocitem" href="../../PostProcessing/Fullpos/">FullPos</a></li><li><a class="tocitem" href="../../PostProcessing/gl/">GL</a></li><li><a class="tocitem" href="../../PostProcessing/xtool/">xtool</a></li><li><a class="tocitem" href="../../PostProcessing/PostPP/">PostPP</a></li><li><a class="tocitem" href="../../PostProcessing/Interpolation/">Interpolation GL</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-8" type="checkbox"/><label class="tocitem" for="menuitem-3-8"><span class="docs-label">Verification</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../Verification/Extract4verification/">Extract4verification</a></li><li><a class="tocitem" href="../../Verification/Verification/">Verification</a></li><li><a class="tocitem" href="../../Verification/HARP/">HARP</a></li><li><a class="tocitem" href="../../Verification/Obsmon/">Obsmon</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-9" type="checkbox"/><label class="tocitem" for="menuitem-3-9"><span class="docs-label">Visualization</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../Visualization/EPyGrAM/">EpyGram</a></li></ul></li></ul></li><li><span class="tocitem">System</span><ul><li><input class="collapse-toggle" id="menuitem-4-1" type="checkbox"/><label class="tocitem" for="menuitem-4-1"><span class="docs-label">Build</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../Build/General/">Software requirements</a></li><li><a class="tocitem" href="../../Build/Build_with_makeup/">Makeup</a></li><li><a class="tocitem" href="../../Build/Build_with_cmake/">CMake</a></li><li><a class="tocitem" href="../../Build/gmkpack/">Gmkpack</a></li><li><a class="tocitem" href="../../Build/Gmkpack_vs_Make/">Gmkpack vs Make</a></li><li><a class="tocitem" href="../../Build/CompileHarmonie/">Compile Harmonie</a></li><li><a class="tocitem" href="../../Build/Installation/">Installation</a></li><li><a class="tocitem" href="../../Build/Redhat7Install/">Redhat7 Install</a></li><li><a class="tocitem" href="../../Build/Centos6Install/">Centos6 Install</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4-2" type="checkbox"/><label class="tocitem" for="menuitem-4-2"><span class="docs-label">Phasing</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../MFaccess/">MF Access</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4-3" type="checkbox"/><label class="tocitem" for="menuitem-4-3"><span class="docs-label">Suite Management</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../SuiteManagement/ECFLOW/">ECFLOW</a></li></ul></li><li><a class="tocitem" href="../TheHarmonieScript/">The Harmonie script</a></li><li><a class="tocitem" href="../Fast_start_on_cca/">Fast start on cca</a></li><li><a class="tocitem" href="../QuickStartLocal/">Local</a></li><li><a class="tocitem" href="../HarmonieTestbed/">Testbed</a></li><li><a class="tocitem" href="../ECMWF_teleport/">Teleport</a></li><li class="is-active"><a class="tocitem" href>DrHook</a><ul class="internal"><li><a class="tocitem" href="#Background"><span>Background</span></a></li><li><a class="tocitem" href="#Activating-Dr.Hook"><span>Activating Dr.Hook</span></a></li><li><a class="tocitem" href="#Overheads"><span>Overheads</span></a></li></ul></li><li><a class="tocitem" href="../StandaloneOdb/">Stand alone ODB</a></li><li><a class="tocitem" href="../UpdateNamelists/">Update Namelist</a></li><li><a class="tocitem" href="../Scalability_and_Refactoring/">Scalability and refactoring</a></li><li><a class="tocitem" href="../HarmonieBenchMark/">Benchmark</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">System</a></li><li class="is-active"><a href>DrHook</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>DrHook</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/Hirlam/Harmonie/blob/pre-CY46h1/docs/src/System/DrHook.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Profiling-and-traceback-tool-Dr.Hook"><a class="docs-heading-anchor" href="#Profiling-and-traceback-tool-Dr.Hook">Profiling &amp; traceback tool Dr.Hook</a><a id="Profiling-and-traceback-tool-Dr.Hook-1"></a><a class="docs-heading-anchor-permalink" href="#Profiling-and-traceback-tool-Dr.Hook" title="Permalink"></a></h1><h2 id="Background"><a class="docs-heading-anchor" href="#Background">Background</a><a id="Background-1"></a><a class="docs-heading-anchor-permalink" href="#Background" title="Permalink"></a></h2><p>Dr.Hook (&amp; the Medicine Head :-) was developed at ECMWF in 2003 to overcome problems in catching runtime errors. Their IBM system at the time was quite impotent to produce meaningful traceback upon crash. It was decided that something need to be done urgently.</p><p>Dr.Hook gets its name from Fujitsu VPP&#39;s hook-functionality in their Fortran compiler, which enabled to call user functions upon enter and exit of a routine. Dr.Hook is of course a former US rock-band from 70&#39;s, which probably did not survive to this millenium due to heavy drug use!  </p><p>In about week or so late 2003 the first version of Dr.Hook saw daylight. It turned out nearly immediately that we could try to gather information for profiling purposes, too, like wall &amp; CPU clock times, possibly MFlop/s and memory consumption information.</p><p>One drawback with Dr.Hook was that (initially just) Fortran code needed to be instrumented by subroutine calls, which was a bother. However, for IFS code and automatique insertion script was developed greatly simplifiying the task.</p><h2 id="Activating-Dr.Hook"><a class="docs-heading-anchor" href="#Activating-Dr.Hook">Activating Dr.Hook</a><a id="Activating-Dr.Hook-1"></a><a class="docs-heading-anchor-permalink" href="#Activating-Dr.Hook" title="Permalink"></a></h2><p>Two things have to be in place in order to use Dr.Hook:</p><ol><li>Fortran (or C) codes must contain explicit Dr.Hook calls to enable instrumentation, starting from the main program</li><li>Certain environment variable(s) need to be set</li></ol><h3 id="An-example-of-Fortran-instrumentation"><a class="docs-heading-anchor" href="#An-example-of-Fortran-instrumentation">An example of Fortran instrumentation</a><a id="An-example-of-Fortran-instrumentation-1"></a><a class="docs-heading-anchor-permalink" href="#An-example-of-Fortran-instrumentation" title="Permalink"></a></h3><pre><code class="language-fortran hljs">SUBROUTINE HOP(KDLEN,KDBDY,KSET,KHORIZ)
!**** *HOP* - Operator routine for all types of observations.
!     E. ANDERSSON            ECMWF          01/04/99
...
USE PARKIND1  ,ONLY : JPIM     ,JPRB
USE YOMHOOK   ,ONLY : LHOOK,   DR_HOOK
...
IMPLICIT NONE
...
REAL(KIND=JPRB) :: ZHOOK_HANDLE ! Stack variable i.e. do not use SAVE
...
! Before the very first statement
IF (LHOOK) CALL DR_HOOK(&#39;HOP&#39;,0,ZHOOK_HANDLE)
...
! Before any RETURN-clause
IF (LLcondition) THEN
  IF (LHOOK) CALL DR_HOOK(&#39;HOP&#39;,1,ZHOOK_HANDLE)
  RETURN
ENDIF
...
! Before the very last statement
IF (LHOOK) CALL DR_HOOK(&#39;HOP&#39;,1,ZHOOK_HANDLE)
END SUBROUTINE HOP
</code></pre><h3 id="Some-environment-variables"><a class="docs-heading-anchor" href="#Some-environment-variables">Some environment variables</a><a id="Some-environment-variables-1"></a><a class="docs-heading-anchor-permalink" href="#Some-environment-variables" title="Permalink"></a></h3><p>To activate Dr.Hook and to enable tracebacks upon failure:</p><pre><code class="language-bash hljs">export DR_HOOK=1</code></pre><p>This sets the Fortran-variable <code>LHOOK</code> to <code>.TRUE.</code>.</p><p>By default all usual Unix-signals are caught (like <code>SIGFPE=8</code>, <code>SIGSEGV=11</code>, etc.). Occasionally, during development, some of them can be turned off, e.g. <code>SIGFPE</code>:</p><pre><code class="language-bash hljs">export DR_HOOK_IGNORE_SIGNALS=8</code></pre><p>To enable low-overhead wall clock time profiling, set also:</p><pre><code class="language-bash hljs">export DR_HOOK_OPT=prof</code></pre><p>Also recommended options are:</p><pre><code class="language-bash hljs">export DR_HOOK_SHOW_PROCESS_OPTIONS=0
mkdir -p /some/path/hook
export DR_HOOK_PROFILE=/some/path/hook/drhook.prof.%d</code></pre><p>The former one reduces Dr.Hook informative output upon initialization. This can be messy as so many processors are printing the same, often useless, output to the stderr.</p><p>The latter defines the profile files&#39; location. The <code>%d</code> will be replaced with MPL-task id (= MPI-task plus 1).</p><p>Sometimes it is necessary to turn Dr.Hook off and <em>also</em> make sure no signals are caught by Dr.Hook – as this the (unfortunate?) default due to function call to <code>C_DRHOOK_INIT_SIGNALS</code> in <code>arp/setup/sumpini.F</code>. Now there is a new environment variable <code>DR_HOOK_INIT_SIGNALS</code> to prevent this. So, to make sure Dr.Hook does <em>not</em> interfere your run <em>at all</em>, give:</p><pre><code class="language-bash hljs">export DR_HOOK=0`
export DR_HOOK_INIT_SIGNALS=0</code></pre><h3 id="Timeline-memory-profiling"><a class="docs-heading-anchor" href="#Timeline-memory-profiling">Timeline memory profiling</a><a id="Timeline-memory-profiling-1"></a><a class="docs-heading-anchor-permalink" href="#Timeline-memory-profiling" title="Permalink"></a></h3><p>It is possible to activate timeline profiling to see jumps in memory usage. Output is written to stdout. Controlling variables are:</p><pre><code class="language-bash hljs">export DR_HOOK=1
export DR_HOOK_TIMELINE=1
#-- Optional:
export DR_HOOK_TIMELINE_FREQ=1 # the default = 1000000
export DR_HOOK_TIMELINE_MB=1 # th default jump 1 MByte</code></pre><p>Upon each <code>DR_HOOK_TIMELINE_FREQ</code>-call to <code>DR_HOOK</code> this will check for one MByte (or <code>DR_HOOK_TIMELINE_MB</code>) jumps in resident memory usage, and will print a line containing cumulutive wall clock time since start, resident memory size right now, high water mark so far, routine name (instrumented to Dr.Hook).</p><h3 id="Implicit-MPL-library-(and-MPI)-initialization"><a class="docs-heading-anchor" href="#Implicit-MPL-library-(and-MPI)-initialization">Implicit MPL-library (and MPI) initialization</a><a id="Implicit-MPL-library-(and-MPI)-initialization-1"></a><a class="docs-heading-anchor-permalink" href="#Implicit-MPL-library-(and-MPI)-initialization" title="Permalink"></a></h3><p>Be aware that the very first call to <code>DR_HOOK</code> also attempts to initialize MPL-library for you. Sometimes this is not desired or causes some hard to understand failures, especially with programs where MPI is not involved, but Dr.Hook calls are present. To turn this initialization off, set</p><pre><code class="language-bash hljs">export DR_HOOK_NOT_MPI=1</code></pre><p>For example, asyncronous I/O module <code>SAMIO</code> does that – from within its Fortran. It calls <em>before first Dr.Hook call</em> function</p><pre><code class="language-bash hljs">CALL C_DRHOOK_NOT_MPI()</code></pre><p>Thus, this can be used elsewhere, too (like in <code>util/gl</code> tools):</p><pre><code class="language-fortran hljs">PROGRAM SOME_UTILGL_TOOL
...
CALL C_DRHOOK_NOT_MPI()
!-- The following now does NOT initialize MPL nor MPI for you
IF (LHOOK) CALL DR_HOOK(&#39;SOME_UTILGL_TOOL&#39;,0,ZHOOK_HANDLE)
...
IF (LHOOK) CALL DR_HOOK(&#39;SOME_UTILGL_TOOL&#39;,1,ZHOOK_HANDLE)</code></pre><h2 id="Overheads"><a class="docs-heading-anchor" href="#Overheads">Overheads</a><a id="Overheads-1"></a><a class="docs-heading-anchor-permalink" href="#Overheads" title="Permalink"></a></h2><p>The <code>DR_HOOK=1</code> has practically no overhead on a scalar machine. Profiling with <code>DR_HOOK_OPT=prof</code> causes some 5% overhead.</p><p>On a vector machine overhead are so big that Dr.Hook should not be used there, unfortunately.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../ECMWF_teleport/">« Teleport</a><a class="docs-footer-nextpage" href="../StandaloneOdb/">Stand alone ODB »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.17 on <span class="colophon-date" title="Tuesday 10 May 2022 12:44">Tuesday 10 May 2022</span>. Using Julia version 1.6.6.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
