<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>CHKEVO · Harmonie wiki</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.png" alt="Harmonie wiki logo"/></a><div class="docs-package-name"><span class="docs-autofit">Harmonie wiki</span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Getting Started</span><ul><li><input class="collapse-toggle" id="menuitem-2-1" type="checkbox"/><label class="tocitem" for="menuitem-2-1"><span class="docs-label">Overview</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../Overview/Content/">Content</a></li><li><a class="tocitem" href="../../Overview/Binaries/">Binaries</a></li><li><a class="tocitem" href="../../Overview/FileFormats/">File Formats</a></li><li><a class="tocitem" href="../../Overview/Source/">Source</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2-2" type="checkbox"/><label class="tocitem" for="menuitem-2-2"><span class="docs-label">Quick Start</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../QuickStart/TheHarmonieScript/">The Harmonie script</a></li><li><input class="collapse-toggle" id="menuitem-2-2-2" type="checkbox"/><label class="tocitem" for="menuitem-2-2-2"><span class="docs-label">ECMWF</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../QuickStart/Fast_start_on_cca/">Fast start on cca</a></li></ul></li><li><a class="tocitem" href="../../QuickStart/QuickStartLocal/">Local</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2-3" type="checkbox"/><label class="tocitem" for="menuitem-2-3"><span class="docs-label">Build</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../Build/Build_with_makeup/">Makeup</a></li><li><a class="tocitem" href="../../Build/gmkpack/">Gmkpack</a></li><li><a class="tocitem" href="../../Build/Gmkpack_vs_Make/">Gmkpack vs Make</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2-4" type="checkbox"/><label class="tocitem" for="menuitem-2-4"><span class="docs-label">Experiment Configuration</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../ExperimentConfiguration/ConfigureYourExperiment/">Experiment</a></li><li><a class="tocitem" href="../../ExperimentConfiguration/Namelists/">Namelist</a></li><li><a class="tocitem" href="../../ExperimentConfiguration/PlatformConfiguration/">Platform</a></li><li><a class="tocitem" href="../../ExperimentConfiguration/How_to_use_hires_topography/">HiRes Topography</a></li><li><a class="tocitem" href="../../ExperimentConfiguration/ModelDomain/">Domain</a></li><li><a class="tocitem" href="../../ExperimentConfiguration/VerticalGrid/">Vertical Grid</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2-5" type="checkbox"/><label class="tocitem" for="menuitem-2-5"><span class="docs-label">Suite Management</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../SuiteManagement/ECFLOW/">ECFLOW</a></li></ul></li></ul></li><li><span class="tocitem">NWP Components</span><ul><li><input class="collapse-toggle" id="menuitem-3-1" type="checkbox" checked/><label class="tocitem" for="menuitem-3-1"><span class="docs-label">Data Assimilation</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><input class="collapse-toggle" id="menuitem-3-1-1" type="checkbox"/><label class="tocitem" for="menuitem-3-1-1"><span class="docs-label">Surface</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../Surface/CANARI/">CANARI</a></li><li><a class="tocitem" href="../Surface/CANARI_OI_MAIN/">CANARI OI MAIN</a></li><li><a class="tocitem" href="../Surface/CANARI_EKF_SURFEX/">CANARI EKF SURFEX</a></li><li><a class="tocitem" href="../Surface/SurfaceAnalysis/">Surface Analysis</a></li></ul></li><li><a class="tocitem" href="../Screening/">Screening</a></li><li><a class="tocitem" href="../StructureFunctions/">Structure functions</a></li><li><a class="tocitem" href="../DigitalFilterInitialization/">Digital Filter Initialization</a></li><li><a class="tocitem" href="../ObservationOperators/">HOP_DRIVER</a></li><li><a class="tocitem" href="../SingleObs/">Single Obs</a></li><li><a class="tocitem" href="../LSMIXandJk/">LSMIX and Jk</a></li><li><a class="tocitem" href="../DFS/">DFS</a></li><li><a class="tocitem" href="../MTEN/">MTEN</a></li><li class="is-active"><a class="tocitem" href>CHKEVO</a><ul class="internal"><li><a class="tocitem" href="#Introduction-1"><span>Introduction</span></a></li><li><a class="tocitem" href="#Preparations-1"><span>Preparations</span></a></li><li><a class="tocitem" href="#Results-1"><span>Results</span></a></li><li><a class="tocitem" href="#Plotting-1"><span>Plotting</span></a></li></ul></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-2" type="checkbox"/><label class="tocitem" for="menuitem-3-2"><span class="docs-label">Boundaries</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../Boundaries/BoundaryFilePreparation/">Preparation</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-3" type="checkbox"/><label class="tocitem" for="menuitem-3-3"><span class="docs-label">Forecast Model</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../ForecastModel/Forecast/">Forecast</a></li><li><a class="tocitem" href="../../ForecastModel/Outputlist/">Output List</a></li><li><input class="collapse-toggle" id="menuitem-3-3-3" type="checkbox"/><label class="tocitem" for="menuitem-3-3-3"><span class="docs-label">Single Column Model</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../ForecastModel/SingleColumnModel/MUSC/">MUSC</a></li><li><a class="tocitem" href="../../ForecastModel/SingleColumnModel/Forcing/">Forcing</a></li></ul></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-4" type="checkbox"/><label class="tocitem" for="menuitem-3-4"><span class="docs-label">Climate Generation</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../ClimateGeneration/ClimateGeneration/">Climate Generation</a></li><li><a class="tocitem" href="../../ClimateGeneration/DownloadInputData/">Input Data</a></li></ul></li><li><span class="tocitem">EPS</span></li><li><input class="collapse-toggle" id="menuitem-3-6" type="checkbox"/><label class="tocitem" for="menuitem-3-6"><span class="docs-label">Post Processing</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../PostProcessing/Diagnostics/">Diagnostics</a></li><li><a class="tocitem" href="../../PostProcessing/FileConversion/">FileConversion</a></li><li><a class="tocitem" href="../../PostProcessing/FullPos/">FullPos</a></li><li><a class="tocitem" href="../../PostProcessing/gl/">GL</a></li><li><a class="tocitem" href="../../PostProcessing/xtool/">xtool</a></li><li><a class="tocitem" href="../../PostProcessing/PostPP/">PostPP</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-7" type="checkbox"/><label class="tocitem" for="menuitem-3-7"><span class="docs-label">Verification</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../Verification/Extract4verification/">Extract4verification</a></li><li><a class="tocitem" href="../../Verification/Verification/">Verification</a></li><li><a class="tocitem" href="../../Verification/HARP/">HARP</a></li><li><a class="tocitem" href="../../Verification/Obsmon/">Obsmon</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-8" type="checkbox"/><label class="tocitem" for="menuitem-3-8"><span class="docs-label">Visualization</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../Visualization/EPyGrAM/">EpyGram</a></li></ul></li></ul></li><li><span class="tocitem">System</span><ul><li><a class="tocitem" href="../../System/GitDeveloperDocumentation/">GitHub</a></li><li><a class="tocitem" href="../../System/HarmonieTestbed/">Testbed</a></li><li><a class="tocitem" href="../../System/SourceCodeRepository/">SourceCodeReposity</a></li><li><a class="tocitem" href="../../System/MFaccess/">MF Access</a></li><li><a class="tocitem" href="../../System/ECMWF_teleport/">Teleport</a></li><li><a class="tocitem" href="../../System/DrHook/">DrHook</a></li><li><a class="tocitem" href="../../System/StandaloneOdb/">Stand alone ODB</a></li><li><a class="tocitem" href="../../System/Scalability_and_Refactoring/">Scalability and refactoring</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">NWP Components</a></li><li><a class="is-disabled">Data Assimilation</a></li><li class="is-active"><a href>CHKEVO</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>CHKEVO</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/Hirlam/Harmonie/blob/pre-CY46h1/docs/src/DataAssimilation/CHKEVO.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="ECHKEVO-1"><a class="docs-heading-anchor" href="#ECHKEVO-1">ECHKEVO</a><a class="docs-heading-anchor-permalink" href="#ECHKEVO-1" title="Permalink"></a></h1><h2 id="Introduction-1"><a class="docs-heading-anchor" href="#Introduction-1">Introduction</a><a class="docs-heading-anchor-permalink" href="#Introduction-1" title="Permalink"></a></h2><p>This page describes how to activate <code>CHKEVO</code> for diagnosing forecast model spin-up of pressure. This diagnostic is available in trunk from r16488. Yann Michel (MF) kindly suggested some of the changes required. The diagnostics are generated as part of a forecast model run up to 3 h or 6 h. A known problem is that the method fails when the first lateral boundary conditions are read by the model. The suggestion is to use <code>BDINT=3</code> and forecast length 3 h. FULL-POS should also be deactivated in <code>config_exp.h</code>.</p><h2 id="Preparations-1"><a class="docs-heading-anchor" href="#Preparations-1">Preparations</a><a class="docs-heading-anchor-permalink" href="#Preparations-1" title="Permalink"></a></h2><p>It is assumed you already have a well defined experiment called <code>your_exp</code>. The following instructions are valid for a 3h diagnostic forecast.</p><h3 id="NAMCHK-namelist-1"><a class="docs-heading-anchor" href="#NAMCHK-namelist-1">NAMCHK namelist</a><a class="docs-heading-anchor-permalink" href="#NAMCHK-namelist-1" title="Permalink"></a></h3><ul><li><p>Enable CHKEVO in the namelist (in the <code>%arome</code> entries):</p><pre><code class="language-bash">cd $HOME/hm_home/your_exp
~hlam/Harmonie co nam/harmonie_namelists.pm</code></pre></li><li><p>Edit <code>NAMCHK</code>:</p><pre><code class="language-bash">NAMCHK=&gt;{
&#39;LECHKEVO&#39; =&gt; &#39;.TRUE.,&#39;,
&#39;LECHKTND&#39; =&gt; &#39;.TRUE.,&#39;,
&#39;LECHKPS&#39; =&gt; &#39;.TRUE.,&#39;,
},</code></pre></li></ul><h3 id="ecf/config_exp.h-1"><a class="docs-heading-anchor" href="#ecf/config_exp.h-1"><code>ecf/config_exp.h</code></a><a class="docs-heading-anchor-permalink" href="#ecf/config_exp.h-1" title="Permalink"></a></h3><ul><li><p>Edit your <code>ecf/config_exp.h</code>  as follows:</p><pre><code class="language-bash">POSTP=&quot;none&quot;                          # Postprocessing by Fullpos (inline|offline|none).
BDINT=3
HH_LIST=&quot;00-21:3&quot;                     # Which cycles to run, replaces FCINT
LL_LIST=&quot;3&quot;                           # Forecast lengths for the cycles [h], replaces LL, LLMAIN</code></pre></li><li><p>Alternatively for a 6 h diagnostic forecast:</p><pre><code class="language-bash">POSTP=&quot;none&quot;                          # Postprocessing by Fullpos (inline|offline|none).
BDINT=6
HH_LIST=&quot;00-18:6&quot;                     # Which cycles to run, replaces FCINT
LL_LIST=&quot;6&quot;                           # Forecast lengths for the cycles [h], replaces LL, LLMAIN</code></pre></li></ul><h2 id="Results-1"><a class="docs-heading-anchor" href="#Results-1">Results</a><a class="docs-heading-anchor-permalink" href="#Results-1" title="Permalink"></a></h2><p>After running the forecast with CHKEVO activated the statistics of surface pressure tendencies are written to <code>NODE.001_01</code> log file. This log file is included in the <code>HM_Date_YYYYMMDDHH.html</code> log file (written to <code>$SCRATCH/hm_home/your_exp/archive/log on ecgate</code>). The results can be obtained by grepping the log file as follows:</p><pre><code class="language-bash">grep &quot;^ CHKEVO : &quot; HM_Date_2013041118.html | tail -n +2</code></pre><p>This gives the RMS and AVG of pressure tendency for each time step. (The first line is removed as the reading of the start file produces zeros):</p><pre><code class="language-bash"> CHKEVO :   2.5683273661035013       0.42575646791552352     
 CHKEVO :   2.5432078820872874       0.36700119757663685     
 CHKEVO :   1.4402533781888094       0.23533175032737094     
 CHKEVO :   1.3677546254375832       0.22965677860570116     
 CHKEVO :   1.1506125378848564       0.20575065246468008     
 CHKEVO :  0.98597708942270756       0.19299583141063531
.....</code></pre><ul><li>The first column contains the string <code>CHKEVO :</code></li><li>Second column contains the RMS of dps/dt averaged over the domain.</li><li>Second column contains the AVG of dps/dt averaged over the domain.</li></ul><p>The RMS of dps/dt alone can be extracted with:</p><pre><code class="language-bash">grep &quot;^ CHKEVO : &quot; HM_Date_2013041118.html | tail -n +2 | awk &#39;{print $3}&#39;</code></pre><h2 id="Plotting-1"><a class="docs-heading-anchor" href="#Plotting-1">Plotting</a><a class="docs-heading-anchor-permalink" href="#Plotting-1" title="Permalink"></a></h2><p>Some instructions here ...</p><pre><code class="language-bash">grep &quot;^ CHKEVO : &quot; HM_Date_2013041118.html | tail -n +2 &gt; dps.dat
wget https://hirlam.org/trac/raw-attachment/wiki/HarmonieSystemDocumentation/CHKEVO/plotCHKEVO.py
chmod 755 ./plotCHKEVO.py
./plotCHKEVO.py -h
./plotCHKEVO.py -i ps.dat  &amp;&amp; eog plot.png
# OR
./plotCHKEVO.py -i ps.dat -t 75  &amp;&amp; eog plot.png</code></pre><p>To get the unit of hPa/3h the time-step is taken into account using the <code>-t</code> option. If, for example, the time-step is <code>60</code> s the values in the second column will be multiplied with <code>60.*3</code>. and then divided by 100.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../MTEN/">« MTEN</a><a class="docs-footer-nextpage" href="../../Boundaries/BoundaryFilePreparation/">Preparation »</a></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Friday 15 October 2021 06:40">Friday 15 October 2021</span>. Using Julia version 1.6.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
